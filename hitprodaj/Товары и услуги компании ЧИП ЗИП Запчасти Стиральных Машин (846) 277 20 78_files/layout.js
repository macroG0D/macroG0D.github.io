window.bem={'b-page':true};
"use strict";var Wrapper={};Wrapper.prototype=Object.create(Block.prototype);Wrapper.constructor=Wrapper;Wrapper.prototype={options:{needToFixHeightContent:['adaptive','gnarled','rounded']},fixSidebarAndContentHeights:function(){var $page=$('.b-page');var themeName=$page.data('theme');var $wrapperContent=_getMainContainer(themeName);var $wrapperSidebar=_getSidebarContainer(themeName);var contentHeight=$wrapperContent.outerHeight();var sidebarHeight=$wrapperSidebar.outerHeight();var self=this;if(sidebarHeight>contentHeight){if(self.needToFix()){var offsetHeight=sidebarHeight-contentHeight;var containerSelector=".b-content, .b-section, .b-sect";var $lastEl=$wrapperContent.find(containerSelector).filter(function(){return!$(this).hasClass('b-section__rubric');}).last();var lastElementHeight=$lastEl.outerHeight();$lastEl.css({"minHeight":lastElementHeight+offsetHeight});}else{$wrapperContent.css({"minHeight":sidebarHeight});}}
function _getMainContainer(theme){switch(theme){case"rounded":case"gnarled":return $('.b-container__wrap');break;default:return $('.b-wrapper__content');}}
function _getSidebarContainer(theme){return theme=="gnarled"?$('.b-container__sidebar'):$('.b-wrapper__sidebar');}},needToFix:function(){var self=this;var $page=$('.b-page');var themeName=$page.data('theme');return $.inArray(themeName,self.options.needToFixHeightContent)!==-1;},init:function(){var self=this;Block.apply(self,arguments);if(self.needToFix()){self.fixSidebarAndContentHeights();}}};$(window).load(function(){window.bem['b-wrapper']=Object.create(Wrapper.prototype);var wrapper=bem['b-wrapper'];if(!wrapper.wasInitialized){wrapper.init();}});
$(document).ready(function(){$('.b-search').on('submit',function(){if($('.b-search__input',this).val()==''){return false;}});});
$(document).ready(function(){var $header=$('.b-header');var loaderFix=false;if(!Modernizr.touchevents){$(document).on('mouseenter','.b-menu__item',function(){$header.css("z-index","105");var $this=$(this);if($(this).children('#b-products').length==1){if($(this).hasClass('loaded')&&$(this).find('ul li').length>0){$('.b-menu__item-childrens',this).css("min-width",$(this).width());}else{window.openSubMenu;if($this.find('ul').length==0){var products=document.querySelector('.b-menu__item #b-products');var url=products?products.getAttribute('data-ajax-url'):'';var idc=window.location.href.split('-').slice(-1)[0].slice(0,-1).slice(1);if(url){var idcompany=+$('.b-menu__item #b-products').data('idcompany');var data={id:idc,length:products.getAttribute('data-length')||15};if(idcompany>0){data.idcompany=idcompany;}
if(!loaderFix){loaderFix=true;window.openSubMenu=setTimeout(function(){$.ajax({url:url,data:data,dataType:'JSON',success:function(data){$this.append(data);if($this.find('ul li').length>0){$this.children('a').addClass('b-main-menu-hover');$('.b-menu__item-childrens',$this).css("min-width",$this.width());$('.b-menu__item-childrens',$this).addClass('b-menu__item-childrens_opened');}
loaderFix=false;}});},100);}}}else{if($this.find('ul li').length>0){$this.children('a').addClass('b-main-menu-hover');$header.css("z-index","1000");$('.b-menu__item-childrens',this).css("min-width",$(this).width());$(this).children('.b-menu__item-childrens').addClass('b-menu__item-childrens_opened');}}}}}).on('mouseleave','.b-menu__item',function(){if($(this).children('#b-products').length==1){$(this).children('a').removeClass('b-main-menu-hover');$(this).children('.b-menu__item-childrens').removeClass('b-menu__item-childrens_opened');$header.css("z-index","1");clearTimeout(window.openSubMenu)}});}});
$(document).ready(function(){$('.b-phone__show-all:not(.clickHandlerInit)').on('click',function(){$(this).parent().toggleClass('opened-all');});window.bem.bPhones={initPhones:function(){var $dropDowns=$('.b-phone__all_view_dropdown:not(.init)');$dropDowns.each(function(){var $dd=$(this);var $button=$dd.prev();$('body').append($dd.addClass('init'));$button.on('click',function(){var $el=$(this).parent();var left=Math.round($el.offset().left);var top=Math.round($el.offset().top+$el[0].offsetHeight);if(!$dd.hasClass('opened')){setTimeout(function(){$dd.css({'left':left,'top':top}).addClass('opened');$el.addClass('b-phone__numbers_dd_opened');normalizePosition($dd);},20);}
else{$dd.removeClass('opened');$('.b-phone__numbers_dd_opened').removeClass('b-phone__numbers_dd_opened');}});});}}
window.bem.bPhones.initPhones();$('.b-phone__show-all, .b-phone__show-dropdown').addClass('clickHandlerInit');$(window).on('click resize',function(e){if(!$(e.target).hasClass('b-phone__show-all')){$('.b-phone__numbers').removeClass('opened-all');}
if(!$(e.target).hasClass('b-phone__show-dropdown')){$('.b-phone__all_view_dropdown.init').removeClass('opened');$('.b-phone__numbers_dd_opened').removeClass('b-phone__numbers_dd_opened');}});function getRelationPosition($elem){var $win=$(window);return{'left':$elem.offset().left-$win.scrollLeft(),'top':$elem.offset().top-$win.scrollTop(),'right':$win.scrollLeft()+$win.innerWidth()-$elem.offset().left-$elem.outerWidth(),'bottom':$win.scrollTop()+$win.innerHeight()-$elem.offset().top-$elem.outerHeight(),}}
function normalizePosition($elem){var pos=getRelationPosition($elem);if(pos.bottom<0){if(pos.bottom+pos.top>=0){$elem.css('top',parseInt($elem.css('top'))+pos.bottom);}
else{$elem.css('top',parseInt($elem.css('top'))-pos.top);}}
if(pos.left<0){if(pos.left+pos.right>=0){$elem.css('left',parseInt($elem.css('left'))-pos.left);}}
if(pos.right<0){if(pos.left+pos.right>=0){$elem.css('left',parseInt($elem.css('left'))+pos.right);}}}});
$(function(){$('.i-filters-loader').each(function(){$(this).ajaxFilters({get:$(this).data('get'),url:$(this).data('url'),position:$(this).data('position'),page:$(this).data('page')});});});
function Rotator(){Block.apply(this,arguments);}
Rotator.prototype=Object.create(Block.prototype);Rotator.constructor=Rotator;Rotator.prototype.cycleDimentions={"gallery":{width:200,height:200},"product":{width:"100%",height:375}};Rotator.prototype.getCycleSettings=function(settings){var self=this;var defaults={fx:'fade',timeout:5000,speed:300,requeueOnImageNotLoaded:false,random:1,pause:true,pager:'.b-rotator__caption',pagerAnchorBuilder:function(idx,slide){return'<li><a href="#"><img src="'+slide.src+'" width="50" height="50" /></a></li>';}};return $.extend({},defaults,settings);};Rotator.prototype.initCycle=function(){var self=this;$('.b-rotator').each(function(){var $this=$(this);var $cycle=$('.b-cycle',this),$thisRotator=$cycle.closest('.b-rotator'),dimensions=$thisRotator.hasClass('b-rotator_view_showcase')?self.cycleDimentions.product:self.cycleDimentions.gallery;var Controls={prev:$thisRotator.find('.b-controls__prev'),next:$thisRotator.find('.b-controls__next')};var additionalCycleSettings=$.extend({},Controls,dimensions);$cycle.cycle(self.getCycleSettings(additionalCycleSettings));$(this).addClass('b-rotator_init').removeClass('i-ajax-indicator_big');});};Rotator.prototype.fixPriceBlockWithSale=function(){var $priceBlock=$('.b-rotator__price');if($priceBlock.length&&$priceBlock.find('.old_price').size()){$priceBlock.filter(function(){var self=$(this);if(self.find('.old_price').size()){self.addClass("b-rotator__price_with_sale");}});}};Rotator.prototype.initPaging=function(){};Rotator.prototype.init=function(){this.fixPriceBlockWithSale();this.initCycle();};$(function(){window.bem['b-rotator']=Rotator;var rotator=new bem['b-rotator'];if(!rotator.wasInitialized){rotator.init();}});
$(function(){if(!('informers_on_page'in window)){window.informers_on_page=[];window.loading_informers=false;function get_informers(){var $this=$(".b-informers").not(".no-ajax").eq(0);if($this.length==0||window.loading_informers){return false;}
var top=$(window).height()+$(window).scrollTop();var left=$(window).width()+$(window).scrollLeft();if(!($this.offset().top<top&&$this.offset().left<left+300)){return setTimeout(get_informers,300);}
window.loading_informers=true;$.ajax({url:"/ajax/Catalog/GetInformers/",type:"post",dataType:'json',data:({search:$this.data("search"),count:$this.data("count"),category:$this.data("category"),type:$this.data("type"),write_stats:$this.data("write_stats"),informers_on_page:informers_on_page}),success:function(data){if(!data.html){$this.addClass('hide');}
$this.find(".b-informers__content").html(data.html);if(data.html){var max_visible=$this.find("li").length;if(max_visible>4)max_visible=4;var width=$this.width();var margin=9;if($this.parents(".b-firm-logo__direct-wrap").length){width=320;margin=0;}
$this.addClass('open');var p=get_slider_params(width,242,0,max_visible,margin?6:0);var slider=$this.find(".informer_slider").bxSlider({slideWidth:p.width,minSlides:p.num,maxSlides:4,slideMargin:margin,moveSlides:0,pager:false,autoControls:true,infiniteLoop:false});$(window).on('resize orientationchange',function(e){var width=$this.width();if($this.parents(".b-firm-logo__direct-wrap").length){width=320;}
var p=get_slider_params(width,242,0,max_visible,margin?6:0);slider.reloadSlider({slideWidth:p.width,minSlides:p.num,maxSlides:4,slideMargin:margin,moveSlides:0,pager:false,autoControls:true,infiniteLoop:false});});}
window.informers_on_page=window.informers_on_page.concat(data.ids);$this.addClass('no-ajax');window.loading_informers=false;setTimeout(get_informers,300);window.attachBalloons();}});}
get_informers();}});
$(function(){var ajaxWait=0;$('.b-subscribe-firm__button').on('click',function(){var $this=$(this);if(!ajaxWait){ajaxWait=1;$.ajax({url:'/ajax/FirmSubscribe/CheckAuth/',type:'post',success:function(data){ajaxWait=0;if(data.isAuthorized){$(document).cabinetConfirm({message:'Вы действительно желаете подписаться на новости компании?',callbackFuncY:makeSubscribeRequest});}else{makeSubscribeRequest();}}});}
function makeSubscribeRequest(){$.ajax({url:'/ajax/FirmSubscribe/Subscribe/',type:'post',dataType:'json',data:({id:$this.data('name'),env:'minisite',lang:document.getElementsByTagName('html')[0].attributes.lang.value}),success:function(data){if(data.user_id){$(document).cabinetReport({message:data.message});}else{$('body').append(data.html);$('.b-subscribe-dialog').zkModal();}}});}});});
window.bViewedProductsBlockMain=false
$(document).ready(function(){$(".b-viewed-products__remove-button").click(function(event){event.preventDefault();$.getScript('/inc/js/jquery.mousewheel.js').done(function(){$(document).cabinetConfirm({message:'Вы действительно желаете удалить все последние просмотренные товары?',callbackFuncY:function(){$.ajax({url:"/ajax/Catalog/RemoveAllRecentlyViewed/",data:{'idcompany':((typeof(IDCOMPANY)!='undefined')?IDCOMPANY:0)},success:function(data){if(data.type=='success'){$(".b-sidebar-widget_view_viewed-products, .b-viewed-products__container, .b-viewed-products").remove();}
$(document).cabinetReport(data);}});}});});});(function(){var intervalSect={};var intervalSectSlider={};var intervalWidget={};if(!window.bViewedProductsBlockMain){window.bViewedProductsBlockMain=true;if($('.b-viewed-products__sect-slider-mount-point').length){intervalSectSlider=setInterval(function(){if(isElementInView($('.b-viewed-products__sect-slider-mount-point'))){clearInterval(intervalSectSlider);$.ajax({type:"POST",url:'/data/get-related-goods-for-minisite/',data:{mode:'sect-slider'},dataType:"JSON",success:function(response){if(!response||!$(response).children().length)return;$('.b-sect__block-viewed-products .b-sect__content').first().append(response);$('.b-sect__block-viewed-products').first().fadeIn();$(window).trigger('adding-new-products-slider');}});}},300);return;}
if($('.b-viewed-products__sect-mount-point').length){intervalSect=setInterval(function(){if(isElementInView(".b-viewed-products__sect-mount-point")){clearInterval(intervalSect);$.ajax({type:"POST",url:'/data/get-related-goods-for-minisite/',data:{mode:'sect'},dataType:"JSON",success:function(response){if(!response||!$(response).children().length)return;$('.b-viewed-products__sect').fadeIn();$('.b-viewed-products__sect').find('.b-related-goods__list').append($(response).children());$(window).resize();},});}},300);return;}
if($('.b-viewed-products__widget-mount-point').length){intervalWidget=setInterval(function(){if(isElementInView(".b-viewed-products__widget-mount-point")){clearInterval(intervalWidget);$.ajax({type:"POST",url:'/data/get-related-goods-for-minisite/',data:{mode:'widget'},dataType:"JSON",success:function(response){if(!response||!$(response).children().length)return;$('.b-sidebar-widget_view_viewed-products').find('.b-sidebar-widget__content').append($(response));$('.b-sidebar-widget_view_viewed-products').fadeIn();$(window).resize();},}).then(function(){function Rotator(){Block.apply(this,arguments);}
Rotator.prototype=Object.create(Block.prototype);Rotator.constructor=Rotator;Rotator.prototype.cycleDimentions={"product":{width:"100%",height:375}};Rotator.prototype.getCycleSettings=function(settings){var self=this;var defaults={fx:'fade',timeout:5000,speed:300,requeueOnImageNotLoaded:false,random:1,pause:true,pager:'.b-rotator__caption',pagerAnchorBuilder:function(idx,slide){return'<li><a href="#"><img src="'+slide.src+'" width="50" height="50" /></a></li>';}};return $.extend({},defaults,settings);};Rotator.prototype.initCycle=function(){var self=this;var $this=$('.b-sidebar-widget_view_viewed-products').find('.b-rotator');var $cycle=$('.b-cycle',$this),$thisRotator=$cycle.closest('.b-rotator'),dimensions=$thisRotator.hasClass('b-rotator_view_showcase')?self.cycleDimentions.product:self.cycleDimentions.gallery;var Controls={prev:$thisRotator.find('.b-controls__prev'),next:$thisRotator.find('.b-controls__next')};var additionalCycleSettings=$.extend({},Controls,dimensions);$cycle.cycle(self.getCycleSettings(additionalCycleSettings));$this.addClass('b-rotator_init').removeClass('i-ajax-indicator_big');};Rotator.prototype.fixPriceBlockWithSale=function(){var $priceBlock=$('.b-rotator__price');if($priceBlock.length&&$priceBlock.find('.old_price').size()){$priceBlock.filter(function(){var self=$(this);if(self.find('.old_price').size()){self.addClass("b-rotator__price_with_sale");}});}};Rotator.prototype.init=function(){this.fixPriceBlockWithSale();this.initCycle();};$(function(){var rotator=new Rotator;rotator.init();});});}},300);return;}
if($('.b-viewed-products__widget-new-mount-point').length){intervalWidget=setInterval(function(){if(isElementInView(".b-viewed-products__widget-new-mount-point")){clearInterval(intervalWidget);$.ajax({type:"POST",url:'/data/get-related-goods-for-minisite/',data:{mode:'widget-slider'},dataType:"JSON",success:function(response){if(!response||!$(response).children().length)return;$('.b-sidebar-widget_view_viewed-products .b-sidebar-widget__content').append($(response));$('.b-sidebar-widget_view_viewed-products').fadeIn();$(window).trigger('adding-new-products-slider');}});}},300);return;}}})();});
var TopImage={};TopImage.prototype=Object.create(Block.prototype);TopImage.prototype={init:function(){var self=this;self.resizeLogo();$('.b-top-img__image').on('load',function(e){self.resizeLogo();});$(window).on('resize',function(e){self.resizeLogo();});},resizeLogo:function(){var $logo=$('.b-firm-logo');var $topImageBlock=$('.b-top-img_theme_pretty, .b-firm-logo');var $topImage=$topImageBlock.find('.b-top-img__image');var image=new Image();image.src=$topImage.attr('src');image.onload=function(){var topImageHeight=$topImage.height()>320?300:$topImage.height();$topImageBlock.css('height',!$('.b-firm-logo__direct-wrap').length?topImageHeight:'auto');if(!document.addEventListener){$topImage.css({"margin-top":-($topImage.height()/2)});}
$logo.addClass('show');};}};(function(){$(function(){var topImageObject=Object.create(TopImage.prototype);if(!topImageObject.wasInitialized){if($('.b-top-img').length){topImageObject.init();}}});})();TopImage.prototype.init=function(){var self=this;var $topImageBlock=$('.b-top-img_theme_pretty, .b-firm-logo');var $topImage=$topImageBlock.find('.b-top-img__image');var topImageHeight=$topImage.height()>320?300:$topImage.height();var image=new Image();image.src=$topImage.attr('src');image.onload=function(){topImageHeight=$topImage.height()>320?300:$topImage.height();$topImageBlock.css('height',topImageHeight);self.resizeLogo();};$(window).on('resize',function(){var topImageHeight=$topImage.height()>320?300:$topImage.height();$topImageBlock.css('height',topImageHeight);self.resizeLogo();});$('.b-top-img__image').on('load',function(e){var topImageHeight=$topImage.height()>320?300:$topImage.height();$topImageBlock.css('height',topImageHeight);self.resizeLogo();});};
(function(){$(function(){if($('.b-firm-logo__td-title').text().length<34&&$('.b-firm-logo__td-title').parents('.b-firm-logo_mode_yandex-direct').length==0){$('.b-firm-logo__td-title').css("white-space","nowrap");}
var calculateMargin=function(){var $logoName=$('.b-firm-logo__hfname');var $topImg=$('.b-top-img');var topImgWidth=$topImg.width();var topImgOffsetLeft=$topImg.offset().left;var logoNameWidth=$logoName.outerWidth();var logoNameOffsetLeft=$logoName.offset().left-topImgOffsetLeft;var logoNameMargin=parseInt($logoName.css("margin-left"));var deltaLeft=0;if((logoNameOffsetLeft+logoNameWidth)>topImgWidth){deltaLeft=((logoNameOffsetLeft+logoNameWidth)-topImgWidth);$logoName.css({"margin-left":logoNameMargin-deltaLeft});}};if($('.b-firm-logo__hfname').length&&$('.b-top-img').length){calculateMargin();$(window).on("resize",function(e){calculateMargin();});}});})();
function SliderBanners(){}
SliderBanners.constructor=SliderBanners;SliderBanners.prototype.defaults={mode:'horizontal',nextText:'',prevText:'',auto:true,pager:false,pause:5000,onSliderLoad:function(){$('.b-banners').addClass('loaded');},onSlidePrev:function($slideElement,oldIndex,newIndex){if(oldIndex==0){var $prev=$(".b-banners__lazy:first");var $loadprev=$prev.attr("data-src");$prev.attr("src",$loadprev);$prev.hide();$prev.fadeIn(1000);$prev.removeClass("b-banners__lazy");}},onSlideBefore:function($slideElement,oldIndex,newIndex){var $lazy=$slideElement.find(".b-banners__lazy");var $load=$lazy.attr("data-src");$lazy.attr("src",$load);$lazy.hide();$lazy.fadeIn(1000);$lazy.removeClass("b-banners__lazy");}};SliderBanners.prototype.init=function(){var self=this;var $banners=$('.b-banners');var sliderObj;var sliderSettings=$.extend(true,self.defaults,{mode:$banners.data('mode'),auto:$banners.data('frequency')>0,pager:true,pause:$banners.data('frequency')});if(!$banners.data('initialized')){var $bannersList=$banners.find('.b-banners__list');if($bannersList.find('.b-banners__item').length>1){sliderObj=$bannersList.bxSlider(sliderSettings);self.handleResize(sliderObj,sliderSettings);}else{$banners.addClass('loaded');}
self.wasInitialized=true;$banners.attr('data-initialized',1);}};SliderBanners.prototype.handleResize=function(slider,sliderSettings){$(window).on('resize orientationchange',function(){slider.reloadSlider(sliderSettings);});};(function(){'use strict';$(function(){if($('.b-banners').length){var Banners=new SliderBanners;if(!Banners.wasInitialized){Banners.init();}}});})();
var Breadcrumb={};Breadcrumb.prototype=Object.create(Block.prototype);Breadcrumb.prototype={loaderFix:false,init:function(){var self=this;var $breadcrumbs=$('.b-breadcrumbs-new__item_parent');var $bl=$('.b-breadcrumbs-new');$breadcrumbs.on('hover',function(e){var $this=$(this);if($bl.attr('data-subMenuWidth')<$(window).width()){switch(e.type){case'mouseenter':self.showChilds($this);break;case'mouseleave':self.hideChilds($this);break;}}});$bl.addClass('init');},getChilds:function(options){return $.ajax({url:options.url,dataType:'JSON'});},showChilds:function(element){var self=this;var options={};options.url=element.data('ajax-url');if(!element.hasClass('loaded')){if(!self.loaderFix){self.loaderFix=true;self.getChilds(options).done(function(data){element.removeData('ajax-url');$('.b-breadcrumbs-new__item').removeClass('hover');element.addClass('loaded');element.append(data);self.loaderFix=false;setTimeout(function(){element.addClass('hover');},50);}).error(function(error,data){console.error(error);self.loaderFix=false;});}}else{element.addClass('hover');}},hideChilds:function(element){element.removeClass('hover');}};(function(){$(function(){window.bem['b-breadcrumbs']=Breadcrumb;var Breadcrumbs=Object.create(Breadcrumb.prototype);if(!Breadcrumbs.wasInitialized){Breadcrumbs.init();}});})();
(function($){$(function(){if(window.bem['b-mobile-breadcrumbs']){return true;}
window.bem['b-mobile-breadcrumbs']=true;});})(jQuery);
window.googleTranslateLoaded=false;$(function(){if(window.gLangs){window.googleTranslateElementInit=function(){new google.translate.TranslateElement({pageLanguage:$(document).find('html').attr('lang'),includedLanguages:window.gLangs,layout:google.translate.TranslateElement.InlineLayout.SIMPLE,gaTrack:true,gaId:window.siteGA},'b-google-translate');};if(!window.googleTranslateLoaded){var gt=document.createElement('script');gt.type='text/javascript';gt.async=true;gt.src='//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gt,s);window.googleTranslateLoaded=true}}});
(function(){var ajaxWait=0;$('.b-our-counter').on('click touch',function(e){e.preventDefault();var $this=$(this);if(!ajaxWait){ajaxWait=1;$.ajax({url:"/ajax/FirmStatistic/GetInfo/html/",type:"POST",dataType:"html",data:{idcompany:$(this).attr("data-name")},success:function(data){$('body').append('<div class="b-our-counter-dialog" data-title="Статистика компании">'+data+'</div>');$('.b-our-counter-dialog').zkModal();ajaxWait=0;}});}});})();
$(function(){$('.b-counter_type_zerokz').each(function(){var token=$(this).data('li-token');var _zero_kz_=_zero_kz_||[];_zero_kz_.push(["id",token]);_zero_kz_.push(["type",1]);(function(){var a=document.getElementsByTagName("script")[0],s=document.createElement("script");s.type="text/javascript";s.async=true;s.src=(document.location.protocol=="https:"?"https:":"http:")
+"//c.zero.kz/z.js";a.parentNode.insertBefore(s,a);})();$(this).append("<span id='_zero_"+token+"'><a href='http://zero.kz/?s="+token+"' target='_blank'><img src='//c.zero.kz/z.png?u="+token+"' width='88' height='31' alt='ZERO.kz' /></a></span>");});});
$(function(){$('.b-counter_type_mailru').each(function(){var $this=$(this);var token=$(this).data('li-token');window.setTimeout(function(){$this.append('<a href="http://top.mail.ru/jump?from='+token+'" target="_blank"><img src="//top-fwz1.mail.ru/counter?id='+token+';t=502;l=1" style="border:0;" height="30" width="88" alt="Рейтинг@Mail.ru" /></a>');},300);});});
$(function(){$('.b-counter_type_yandex').each(function(){var $this=$(this);var token=$this.data('li-token');var metrikaUrl=$this.data('metrika-url');window.setTimeout(function(){$this.append('<!-- Yandex.Metrika informer -->'+'<a href="https://metrika.yandex.ru/stat/?id='+token+'&amp;from=informer"'+'target="_blank" rel="nofollow"><img src="'+metrikaUrl+'informer/'+token+'/3_1_FFFFFFFF_EFEFEFFF_0_pageviews"'+'style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" /></a>'+'<!-- /Yandex.Metrika informer -->');},400);});});
if(!window.callback){var ajaxWait=0;window.callback=function(targetId,mode,phone,id){if(!ajaxWait){ajaxWait=1;$.ajax({type:"POST",url:'/data/recall-form/',data:{id:id},success:function(response){ajaxWait=0;$('body').append(response);$('.b-recall-dialog').zkModal();$('.b-recall, .b-recall__button').removeClass('i-ajax-indicator');}});}}}
!window.bem?window.bem={}:'';if(!window.bem.bRecall){window.bem.bRecall=true;$('.b-recall, .b-recall__button').live('click',function(){var $this=$(this);$this.addClass('i-ajax-indicator');window.callback(0,$this.data('mode'),'',$this.data('id'));});}
(function($){$.fn.cabinetReport=$.fn.reportMessage=function(options){$('.i-report-message').remove();var $this=$('<div class="i-report-message"></div>');var defaults={'message':'','type':'success','animationSpeed':300,'autoHide':5000,'onClose':function(){}};$this.config=$.extend(defaults,options);$this.addClass("i-report-message_type_"+$this.config.type);$this.closeButton=$('<button class="i-report-message__close"><i class="b-font-icon b-font-icon__cancel"></i></button>');$this.append($this.closeButton).append($this.config.message);$this.getScrollTop=function(){if(typeof pageYOffset!='undefined'){return pageYOffset;}
else{var B=document.body;var D=document.documentElement;D=(D.clientHeight)?D:B;return D.scrollTop;}};$this.closeHandler=function(e){if(($(e.target).parents('.i-report-message').length==0&&!$(e.target).hasClass('i-report-message'))||$(e.target).hasClass('i-report-message__close')||$(e.target).parents('.i-report-message__close').length>0){$this.removeReport();}};$this.removeReport=function(){$(document.body).off('touchend click',$this.closeHandler);clearTimeout($this.data('autoHide'));$this.removeData('autoHide');$this.fadeOut($this.config.animationSpeed,function(){$this.remove();config.onClose();});};var top=(($(window).height()-$this.outerHeight())/2)+$(window).scrollTop();$(document.body).append($this);$this.fadeIn($this.config.animationSpeed);$this.css({margin:'auto',left:0,right:0,width:$this.width(),zIndex:10100,top:top,position:'absolute'});if($this.config.autoHide>0){$this.data('autoHide',setTimeout(function(){$this.removeReport();},$this.config.autoHide));}
$(document.body).on('touchend click',$this.closeHandler);return this;};})(jQuery);
(function($){var defaults={firstInputAutoFocus:true,footer:'.zk-modal-footer',close:'remove',withoutPadding:false,maxAutoHeight:0};var options={};$.fn.zkModal=function(params){if(this.length>1){this.each(function(){$(this).zkModal(params);});return this;}
else if(this.length===0){return this;}
if(!window.bem.bModal){window.bem.bModal={count:0,active:[]};}
var el=this;var $page=$('.b-page');var $body=$('body');var init=function(){window.bem.bModal.count=window.bem.bModal.count+1;var id='zkModal-'+window.bem.bModal.count;var cls=options.withoutPadding?' b-modal_without-padding':'';var title=el.data('title')?'<div class="b-modal__title">'+el.data('title')+'</div>':'';$('body').append('<div id="'+id+'" class="b-modal'+cls+'"><div class="b-modal__overlay"></div><div class="b-modal__window">'+'<div class="b-modal__header"><div class="b-modal__close"></div>'+title+'</div>'+'<div class="b-modal__content"></div><div class="b-modal__footer"></div></div></div>');$('#'+id+' .b-modal__content').append(el);var $footer=$(options.footer,el).first();if($footer.length>0){$('#'+id+' .b-modal__footer').append($footer);}
el.addClass('init');};var showModal=function(){if(window.bem.bModal.active.length){window.bem.bModal.active[0].block.removeClass('opened');}
else{addBodyPadding(window.innerWidth-$body.width());$page.addClass('noscroll');}
var $el=el.closest('.b-modal').addClass('opened');window.bem.bModal.active.unshift({block:$el,header:$el.find('.b-modal__header')[0],footer:$el.find('.b-modal__footer')[0],$content:$el.find('.b-modal__content'),options:options,close:closeModal});$(window).trigger('new-modal');if(options.firstInputAutoFocus){$('input:visible, textarea:visible',$el).first().focus();}};var closeModal=function(){options.close==='remove'?el.closest('.b-modal').remove():el.closest('.b-modal').removeClass('opened');window.bem.bModal.active.shift();if(window.bem.bModal.active.length){window.bem.bModal.active[0].block.addClass('opened');}
else{addBodyPadding(0);$page.removeClass('noscroll');}};var addBodyPadding=function(pl){if(pl<0){pl=0;}
$body.css('padding-right',pl);};if(!params){if(!el.hasClass('init')){options=defaults;init();}
showModal();}
else if(params&&typeof params==='object'){options=$.extend(defaults,params);if(!el.hasClass('init')){init();}
showModal();}
else if(params==='close'){closeModal();}};$(window).on('resize orientationchange new-modal',function(){if(window.bem.bModal&&window.bem.bModal.active&&window.bem.bModal.active.length){var maxHeight=window.innerHeight-window.bem.bModal.active[0].header.offsetHeight-window.bem.bModal.active[0].footer.offsetHeight-20;var maxAutoHeight=window.bem.bModal.active[0].options.maxAutoHeight;if(maxAutoHeight){var height=maxHeight>maxAutoHeight?maxAutoHeight:maxHeight;window.bem.bModal.active[0].$content.css('height',height);}
else{window.bem.bModal.active[0].$content.css('max-height',maxHeight);}}});$('body').on('click','.b-modal__overlay, .b-modal__close',function(e){e.preventDefault();window.bem.bModal.active[0].$content.children().zkModal("close");});$(document).keydown(function(e){if(e.keyCode===27){window.bem.bModal.active[0].$content.children().zkModal('close');}});})(jQuery);
!window.store?window.store={}:'';window.store.theme=document.getElementsByTagName('html')[0].dataset.theme;window.bem.bShopcart={productQuantityClicked:0,summary:{},ajaxWait:0,cls:{buyInCart:'b-buy_status_inShopCard',buyNotInCart:'b-buy_status_notInShopCard',infoMsgHidden:'b-info-message_hidden'},selectors:{shopcartGoodsList:'.b-shopcart',shopcartForm:'.b-shopcart',buyText:'.b-button__name, .b-button__title, .b-button__text, .b-buy__small-text, .b-bttn__text',buyIcon:'.b-button__icon',shopcartCount:'.b-cart__count, .b-cart__quantity, .b-shopcart__count',sendOrderBtn:'.b-bttn_view_order',minOrderWrapper:'.b-shopcart__min-order-warning',quantityInput:'.b-shopcart__quantity-input',quantityControl:'.b-shopcart__quantity-control',summary:'.b-shopcart__summary',productRemoveBtn:'.b-shopcart__product-remove',deliverySelect:'.b-shopcart__select-delivery',paymentSelect:'.b-shopcart__select-payment',showCheckoutBtn:'.b-bttn_view_shopcart',showGoodsTableLink:'.b-cart',resumeShoppingLink:'.b-shopcart__continue-shopping-link'},checkoutFields:['name','surname','patronymic','city','address'],companies:typeof window.SHOPCART_COMPANIES!=='undefined'?JSON.parse(window.SHOPCART_COMPANIES):[],existCompanyProduct:function(idcompany){return typeof this.companies==='object'&&this.companies.indexOf(parseInt(idcompany))!==-1;},show:function($all_firms,payment){var self=this;var data=$all_firms?{all_firms:true}:{};data['payment']=(typeof payment!=='undefined')?payment:0;if(!self.ajaxWait){self.ajaxWait=1;$.ajax({type:"POST",url:'/data/shopcart/',dataType:"HTML",data:data,success:function(response){$('body').append(response);$(self.selectors.shopcartGoodsList).zkModal({firstInputAutoFocus:false});$(self.selectors.paymentSelect).trigger('change');},complete:function(){self.ajaxWait=0;}});}},updateCartQuantity:function(quantity){$(this.selectors.shopcartCount).text(quantity||"");var label=$('.b-cart__name').first().text().split('(')[0];if(quantity>0){$('.b-cart__name').text(label+' ('+quantity+')');}else{$('.b-cart__name').text(label);}},addProductClickHandler:function(id,show,el,payment){var self=this;this.checkAndBuy(function(){self.addProduct(id,show,el,payment);},parseInt(window.NOT_CHECKED_TEST)&&!self.existCompanyProduct(window.IDCOMPANY));},checkAndBuy:function(callback,check){if(check){$(document).cabinetReport({message:'Обращаем внимание, что администрация '+window.SITE.substring(0,1).toUpperCase()+window.SITE.substring(1)+' в настоящее время не получала регистрационные документы компании для проверки.',onClose:callback});}else{callback();}},addProduct:function(id,show,el,payment){var self=this;if(!self.ajaxWait){self.ajaxWait=1;$.ajax({type:"POST",url:'/data/shopcart-add-product/',data:{id:id},dataType:"JSON",success:function(response){self.updateCartQuantity(response.shopcart_count);self.updateBuyButtonsStatus([id],'toCart');if(typeof response.companies!=='undefined'){self.companies=response.companies;}
self.ajaxWait=0;if(show==='list'){self.show(true,payment);}
else if(show==='order'){self.showCheckout($(el).data('idcompany'),payment);}
else{$(document).cabinetReport(response.report);}},complete:function(){self.ajaxWait=0;}});}},removeProduct:function(el){var self=this;var $this=$(el);var product=$this.parents('.b-shopcart__product:first');var confirmText=window.store.theme==='mobile'?$this.data('confirm'):'';if(!confirmText||confirm(confirmText)){$.ajax({url:'/data/shopcart-remove-product/',type:'GET',data:{id:product.data('id')},dataType:'JSON',success:function(response){if(response.type=='success'){self.updateSummary(response.shopcart);self.updateCartQuantity(response.count);if(!response.count){$('.b-shopcart__wrapper_view_empty').removeClass('b-shopcart__wrapper_hidden');$('.b-shopcart__wrapper_view_main').addClass('b-shopcart__wrapper_hidden');$this.closest('.b-modal').find('.b-modal__footer').addClass('i-hide');}
if(!response.shopcart.count&&response.count){$this.closest('.b-shopcart__firm').remove();}
product.remove();self.updateMinOrder(response);self.updateBuyButtonsStatus([product.data('id')]);}
else{$(document).cabinetReport(response.report);}}});}},updateBuyButtonsStatus:function(ids,act){for(var key in ids){var $buy=$('.b-buy[data-name="'+ids[key]+'"]');if(act==='toCart'){$buy.removeClass(this.cls.buyNotInCart).addClass(this.cls.buyInCart);$buy.find(this.selectors.buyText).text($buy.data('translateInCart'));if(!$('.b-page').hasClass('b-page_theme_rounded')){$buy.find('.b-font-icon').addClass('b-font-icon__ok');}}else{$buy.addClass(this.cls.buyNotInCart).removeClass(this.cls.buyInCart);$buy.find(this.selectors.buyText).text($buy.data('translateBuy'));if(!$('.b-page').hasClass('b-page_theme_rounded')){$buy.find('.b-font-icon').removeClass('b-font-icon__ok');}}}},updateMinOrder:function(response){var self=this;var min_order_warning=$(self.selectors.minOrderWrapper+'[data-idcompany='+response.shopcart.idcompany+']');var submit=$(self.selectors.showCheckoutBtn+'[data-idcompany='+response.shopcart.idcompany+']').first();if(response.shopcart.valid_min_order){min_order_warning.addClass(self.cls.infoMsgHidden);submit.removeAttr("disabled");}else{min_order_warning.removeClass(self.cls.infoMsgHidden);submit.attr("disabled",true);}},checkProductQuantity:function($el){var count=parseFloat($el.val());var min_order=$el.data('min')>0.01?parseFloat($el.data('min')):1;if(count<min_order){count=min_order;}
$el.val(count);},updateProductQuantity:function(el){var $this=$(el);var $product=$this.closest('.b-shopcart__product');var self=this;self.checkProductQuantity($this);$this.val(parseFloat($this.val()));var data={id:$product.data('id'),quantity:$this.val()};$.ajax({url:'/data/shopcart-product-set-quantity/',type:'POST',dataType:'JSON',data:data,success:function(response){if(response.type=='success'){for(var k in response.product){$product.find('[field="'+k+'"]').html(response.product[k]).val(response.product[k]);}
self.updateMinOrder(response);self.updateSummary(response.shopcart);}}});},updateProductControl:function(el){var self=this;var $this=$(el);var $input=$this.parent().find(self.selectors.quantityInput);var count=parseFloat($input.val());$input.val($this.data('plus')?count+1:count-1);self.productQuantityClicked=parseInt(performance.now());self.checkProductQuantity($input);setTimeout(function(){if(parseInt(performance.now())-self.productQuantityClicked>990){$input.trigger('change');}},1000);},updateSummary:function(summary){var clearRegEx=new RegExp("##","gm");summary.total_price=summary.total_price.replace(clearRegEx,'');summary.final_price=summary.final_price.replace(clearRegEx,'');var self=this;summary?self.summary=summary:'';var selector=self.selectors.summary+(summary.idcompany?'[data-idcompany='+summary.idcompany+']':'');$(selector).each(function(){var $this=$(this);for(var k in self.summary){$this.find("[field='"+k+"']").html(self.summary[k]);}
var discount=$this.find("[field='discount']");var delivery=$this.find("[field='delivery']");var total_price=$this.find("[field='total_price']");if(parseFloat(discount.html())>0){discount.parents('.b-shopcart__summary-row').removeClass('i-hide');}else{discount.parents('.b-shopcart__summary-row').addClass('i-hide');}
if(delivery.html()!=''){delivery.parents('.b-shopcart__summary-row').removeClass('i-hide');}else{delivery.parents('.b-shopcart__summary-row').addClass('i-hide');}
if($.merge(discount,delivery).filter(':visible').length>0){total_price.parents('.b-shopcart__summary-row').removeClass('i-hide');}else{total_price.parents('.b-shopcart__summary-row').addClass('i-hide');}});},showCheckout:function(idcompany,payment){var self=this;if(!self.ajaxWait){self.ajaxWait=1;$.ajax({type:"POST",url:'/data/shopcart-checkout/',data:{idcompany:idcompany,payment:payment},dataType:"HTML",success:function(response){$(self.selectors.shopcartGoodsList).zkModal('close');$('body').append(response);$(self.selectors.shopcartForm).zkModal({firstInputAutoFocus:false});$(self.selectors.paymentSelect).trigger('change');},complete:function(){self.ajaxWait=0;}});}},selectPayment:function(el){var $this=$(el);$('.b-form__credit-row').hide();if($this.find(':selected').data('credit')){$('.b-form__'+$this.find(':selected').val()).show();}else{$('.b-form__'+$this.find(':selected').val()).hide();}},selectDelivery:function(el){var self=this;var $this=$(el);var $form=$this.parents('.b-form');var requestData={order:$form.data('id'),order_company:$form.data('idcompany'),mobile:1,lang:$('html').attr('lang')};if($this.val()=='novaya_pochta'||$this.val()=='cdek'){var $ellSelected=$this.find(':selected');var dataPrice=$ellSelected.data("price");if($ellSelected.data('requiregabarit')==1){$('.b-shopcart__delivery-fields-container').removeClass('b-shopcart__delivery-fields-container_inactive');}
for(var i in self.checkoutFields){if(dataPrice=="calculated"||($ellSelected.data('requiregabarit')==1&&dataPrice=="fixed")){$('input[name="checkout_data['+self.checkoutFields[i]+']"]').parents('.b-form__row:first').hide();}}}else{$('.b-novaya-pochta-form').hide();$('.b-cdek-form').hide();self.setDelivery($this.val(),0);for(var n in self.checkoutFields){$('input[name="checkout_data['+self.checkoutFields[n]+']"]').parents('.b-form__row:first').show();}
$('.b-shopcart__delivery-fields-container').addClass('b-shopcart__delivery-fields-container_inactive');$("input[name=\"checkout_data[phone_number]\"]").parents(".b-form__row").show();$("input[name=\"checkout_data[index]\"]").parents(".b-form__row").show();}
if($this.val()=='novaya_pochta'){var $novaya_pochta_form=$('.b-novaya-pochta-form');if($novaya_pochta_form.length==0){if(dataPrice=="calculated"||($ellSelected.data('requiregabarit')==1&&dataPrice=="fixed")){$("input[name=\"checkout_data[index]\"]").parents(".b-form__row").hide();if(!self.ajaxWait){self.ajaxWait=1;$.ajax({url:'/ajax/NovayaPochta/GetBlank/html/',type:"post",dataType:'html',data:requestData,success:function(data){$("[name='checkout_data[payment]']").parents('.b-form__row:first').after(data);if($ellSelected.data('price')=='fixed'){$(".b-form__row_dimensions").show();}},complete:function(){self.ajaxWait=0;}});}}}
else{$novaya_pochta_form.show();}}
else if($this.val()=='cdek'){var $cdek_form=$('.b-cdek-form');if($cdek_form.length==0){if(dataPrice=="calculated"||($ellSelected.data('requiregabarit')==1&&dataPrice=="fixed")){$("input[name=\"checkout_data[phone_number]\"]").parents(".b-form__row").hide();$.ajax({url:'/ajax/Cdek/GetBlank/html/',type:"post",dataType:'html',data:requestData,success:function(data){$("[name='checkout_data[payment]']").parents('.b-form__row:first').after(data);if($ellSelected.data('price')=='fixed'){$(".cdek_dimensions").show();}}});}}else{$cdek_form.show();}}
return true;},setDelivery:function(delivery_id,delivery_price){var self=this;$.ajax({url:'/data/shopcart-set-delivery/',type:'POST',dataType:'JSON',data:{id:delivery_id,price:delivery_price,idcompany:$(this.selectors.shopcartForm).data('idcompany')},success:function(response){self.updateSummary(response.shopcart);}});},paymentRedirection:function(form){var $shopcartFormWrapper=$(this.selectors.shopcartForm);$shopcartFormWrapper.html("<div class='b-track-event' data-goal='shopcart-order-goal' data-idcompany='"+$shopcartFormWrapper.data('idcompany')+"'></div>Спасибо за Ваш заказ. В течение 10 секунд Вы будете переадресованы на сайт платежной системы для оплаты заказа. <br />"+form);setTimeout(function(){$shopcartFormWrapper.find('form').submit();},10000);},closeGoodsList:function(){$(this.selectors.shopcartGoodsList).zkModal('close');},init:function(){var self=this;$(document).on('click','.b-buy',function(e){var $this=$(this);var orderLink=(this.tagName=="a")?$this.attr('href'):$this.find('a:first').attr('href');if(orderLink=='#'){e.preventDefault();if(!$this.hasClass('b-contact-firm')){if(!$this.hasClass('b-buy_status_inShopCard')){self.addProductClickHandler($this.attr('data-name'),'list',this);}else{self.show(true);}}}else{if($this.hasClass('b-contact-firm')){e.preventDefault();}}});$(document).on('click','.privat_button',function(){var $this=$(this);var variant=$this.data('variant-id');var payment=$this.data('payment');if(!$('.b-buy_status_inShopCard[data-name='+variant+']').length){self.addProductClickHandler(variant,'order',this,payment);}else{self.show(false,payment);}});$(document).on('click',self.selectors.showGoodsTableLink,function(e){e.preventDefault();self.show(true);});$(document).on('click',self.selectors.resumeShoppingLink,function(e){self.closeGoodsList();});$(document).on('click',self.selectors.productRemoveBtn,function(){self.removeProduct(this);});$(document).on('change',self.selectors.quantityInput,function(){self.updateProductQuantity(this);});$(document).on('click',self.selectors.quantityControl,function(){self.updateProductControl(this);});$(document).on('click',self.selectors.showCheckoutBtn,function(){self.showCheckout($(this).data('idcompany'));});$(document).on('click',self.selectors.sendOrderBtn,function(){$('.b-checkout-form').submit();});$(document).on('change',self.selectors.deliverySelect,function(){self.selectDelivery(this);});$(document).on('change',self.selectors.paymentSelect,function(){self.selectPayment(this);});}};window.bem.bShopcart.init();
(function($){if(!$.fn.ajaxFilters){$.fn.ajaxFilters=function(options){var defaults={get:{},url:'',page:'',position:'left'};var $this=$(this);var $config=$.extend(defaults,options);var _methods={init:function(){this.getParams=$config.get;$(document.body).append($('<div class="b-filters__balloon b-filters__balloon_position_'+$config.position+'"></div>'));this.loadData(true);this.attachEvents();},loadData:function(first,caller){$.ajax({url:$config.url,type:"POST",dataType:first?"HTML":"JSON",data:{init:(first?1:0),priceFrom:this.getParams.priceFrom,priceTill:this.getParams.priceTill,filters:this.getParams.filters,category:this.getParams.category,folder:this.getParams.folder},success:function(data){if(first){$this.append(data);window.attachBalloons();}else{for(var i=0;i<data.attributes.length;i++){for(var k=0;k<data.attributes[i].values.length;k++){var v=data.attributes[i].values[k];var el=$this.find('.b-filters__item[data-id="'+v.id+'"]');el.removeClass('b-filters__item_empty_yes');if(!v.count){el.addClass('b-filters__item_empty_yes');}}}
if(data.total){$('.b-filters__attributes-submit').removeClass('disabled');}else{$('.b-filters__attributes-submit').addClass('disabled');}
var balloon=$('.b-filters__balloon');balloon.html("Товаров: <strong class='b-balloon__cnt'>"+data.total+(data.total>0?"</strong> <a href='#' class='b-balloon__show'>Показать</a>":""));var y=$(caller).offset().top+($(caller).outerHeight()-balloon.outerHeight())/2;var x=$(caller).offset().left;if($config.position=='left'){x-=(30+balloon.outerWidth());if(x+balloon.outerWidth()<20){x=20;}}else{x+=(20+$(caller).outerWidth());if(x+balloon.outerWidth()>$(document).width()-20){x=$(document).width()-balloon.outerWidth()-20;}}
balloon.css({top:y,left:x}).fadeIn(300);if(balloon.data('timeout')){window.clearTimeout(balloon.data('timeout'));}
var t=window.setTimeout(function(){balloon.fadeOut(300)},5000);balloon.data('timeout',t);}},complete:function(){if(window.filtersCutInited===true)return;$('.b-filters__values-list').each(function(i,item){$(item).attr('filter-list',i);if($(this).find('a.b-filters__item').length>15){$(item).find('a.b-filters__item:gt(14)').hide();$(item).find('a.b-filters__item:eq(14)').after('<a role="button" class="b-filters__link-show-all" parent-filter="'+i+'">Показать все</a>');}});$('.b-filters__link-show-all').on('click',function(){var filterListId=$(this).attr('parent-filter');var $filter=$('[filter-list='+filterListId+']');var $showLink=$(this).detach();if($filter.hasClass('b-filters__values-list_full')){$filter.find('a.b-filters__item:gt(14)').hide();$filter.find('a.b-filters__item:eq(14)').after($showLink);$filter.find('.b-filters__link-show-all').text('Показать все');$filter.removeClass('b-filters__values-list_full');}
else{$filter.find('a.b-filters__item:gt(14)').show();$filter.append($showLink);$filter.find('.b-filters__link-show-all').text('Скрыть');$filter.addClass('b-filters__values-list_full');}});window.filtersCutInited=true;}});},followFiltersLink:function(){var p=clone($this.getParams);if(p.filters){p.filters=p.filters.join('-');}
delete(p.category);delete(p.folder);for(var k in p){if(!p[k]){delete p[k];}}
document.location.href=$config.page+($.isEmptyObject(p)?'':'?'+$.param(p));},attachEvents:function(){$this.on('click','.b-filters__title',function(){if($(this).parents('.b-filters__attributes-selected').length==0&&!$(this).parent().hasClass('b-filters__attributes-item_state_not-possible-to-hide')){$(this).parent().toggleClass('b-filters__attributes-item_state_closed');}});$('.b-filters__balloon').on('click','a',function(){$this.followFiltersLink();return false;});$this.on('click','.b-filters__item',function(){var vid=$(this).data('id');$('.b-filters__item[data-id="'+vid+'"]').toggleClass('b-filters__item_state_selected');$('.b-filters__attributes-selected .b-filters__item[data-id="'+vid+'"]').toggleClass('b-filters__item_empty_yes').toggleClass('b-filters__item_canceled_yes');if(vid!=='price'){if($(this).hasClass('b-filters__item_state_selected')){$this.getParams.filters.push(vid);}else{var newFilters=[];for(var i=0;i<$this.getParams.filters.length;i++){if($this.getParams.filters[i]!=vid){newFilters.push(parseInt($this.getParams.filters[i]));}}
$this.getParams.filters=newFilters;}}else{if($(this).hasClass('b-filters__item_state_selected')){$this.getParams.priceFrom=$(this).data('from');$this.getParams.priceTill=$(this).data('till');$('.b-filters__prices input[data-type="from"]').val($this.getParams.priceFrom);$('.b-filters__prices input[data-type="till"]').val($this.getParams.priceTill);}else{$('.b-filters__prices input').val('');$(this).data('from',$this.getParams.priceFrom);$(this).data('till',$this.getParams.priceTill);delete($this.getParams.priceFrom);delete($this.getParams.priceTill);}}
var v=$(this).find('.b-filters__item-value');$this.loadData(false,(v.length>0)?v:this);return false;});$this.on('click','.b-filters__attributes-submit',function(event){event.preventDefault();if($(event.currentTarget).hasClass('disabled'))return false;$this.followFiltersLink();return false;});$this.on('click','.b-filters__remove-all-items',function(){delete($this.getParams.filters);delete($this.getParams.priceFrom);delete($this.getParams.priceTill);$this.followFiltersLink();return false;});$this.on('change','.b-filters__prices input',function(){var val=$.trim($(this).val()).replace(/,/,'.');$(this).removeClass('b-filters__prices_state_wrong');if(/^[0-9]+(\.[0-9]+)?$/.test(val)||!val){if(val){val=parseFloat(val).toFixed(2).replace(/\.00/i,'');}
$(this).val(val);var id=$(this).data('type');id='price'+id[0].toUpperCase()+id.substr(1);$this.getParams[id]=val?val:0;var follow=$(this).data('follow')?1:0;$(this).removeData('follow');if(follow){$this.followFiltersLink();}else{$this.loadData(false,$(this).parent());}}else{$(this).addClass('b-filters__prices_state_wrong');}}).on('keydown','.b-filters__prices input',function(e){if(e.keyCode==13){$(this).data('follow',true);$(this).change();}});},log:function(msg){if(console&&console.log){console.log(msg);}}};$.extend($this,_methods);if($.isEmptyObject($config.get)||$config.url.length<5){$this.log('Wrong config');}else{$this.init();}
return this;}}})(jQuery);
(function($){$.fn.balloon=function(options){var defaults={delay:300,offTimer:300,animationTime:300,css:{maxWidth:"400",padding:"5px",borderRadius:"6px",border:"solid 1px #777",boxShadow:"4px 4px 4px #555",color:"#666",backgroundColor:"#efefef",opacity:($.support.opacity)?"1":null,zIndex:2000,textAlign:"left"}};var css=$.extend(defaults.css,options.css);var $config=$.extend(defaults,options);$config.css=css;var $balloon=null;var $balloonTopArrow=null;var $balloonBottomArrow=null;var $balloonBody=null;var $this=this;var initBalloon=function(){$balloon=$('#balloon');$balloonTopArrow=$('#balloonTopArrow');$balloonBottomArrow=$('#balloonBottomArrow');$balloonBody=$('#balloonBody');$balloonBody.css($config.css).css({position:'relative',zIndex:$config.css['zIndex']+1});$balloonTopArrow.css({position:'relative',zIndex:$config.css['zIndex']+5,marginLeft:'20px',top:'1px'}).hide(0);$balloonBottomArrow.css({position:'relative',zIndex:$config.css['zIndex']+5,marginLeft:'20px',top:-1}).hide(0);$balloon.css({position:'absolute',zIndex:$config.css['zIndex']}).fadeOut(0);var i=0;$('.balloon-arrow',$balloonTopArrow).each(function(){$(this).width(i*2).css({marginLeft:-i,border:$config.css.border,backgroundColor:$config.css.backgroundColor,'border-top-width':0,'border-bottom-width':0}).height(1);i++;});var i=$('.balloon-arrow',$balloonBottomArrow).length-1;$('.balloon-arrow',$balloonBottomArrow).each(function(){$(this).width(i*2).css({marginLeft:-i,border:$config.css.border,backgroundColor:$config.css.backgroundColor,'border-top-width':0,'border-bottom-width':0}).height(1);i--;});attachBalloons();$(document).on('mouseover',function(e){if($balloon.data('target')&&($balloon.data('target').tagName==='INPUT'||$balloon.data('target').tagName==='TEXTAREA')){return true;}
if(e.target.id!==$balloon.attr('id')&&$(e.target).parents('#'+$balloon.attr('id')).length==0&&e.target!==$balloon.data('target')&&$(e.target).parents().is($balloon.data('target'))===false){hideBalloon();}else{if($balloon.data('offTimer')){clearTimeout($balloon.data('offTimer'));$balloon.removeData('offTimer');}}});};var hideBalloon=function(){if($balloon.css("display")=='none'){if($balloon.data('onTimer')){clearTimeout($balloon.data('onTimer'));$balloon.removeData('onTimer');}}
if(!$balloon.data('offTimer')){$balloon.data('offTimer',setTimeout(function(){$balloon.fadeOut(0);$balloon.removeData('offTimer');$($balloon.data('target')).data('originalValue',$($balloon.data('target')).val());},$config.offTimer));}};var attachBalloons=function(){$($this).each(function(){$(this).data('originalValue',$(this).val());var events=['mouseover'];var align='center';if(this.tagName==='INPUT'||this.tagName==='TEXTAREA'){events=['focus','blur','input keyup'];align='left';}
$(this).on(events[0],function(){var text='';if($(this).data('balloon-text')){text=$(this).data('balloon-text');}else{text=$(this).attr('alt')||$(this).attr('title')||$(this).attr('hint');}
$balloonTopArrow.hide();$balloonBottomArrow.hide();$balloonTopArrow.css('marginLeft',20);$balloonBottomArrow.css('marginLeft',20);$balloonBody.html(text);$balloon.css({width:'auto',left:0,top:0,whiteSpace:'nowrap'});$(this).removeAttr('title');$(this).removeAttr('alt');$(this).removeAttr('hint');$(this).data('balloon-text',text);var l=$(this).offset().left-parseInt($balloonTopArrow.css("marginLeft"));if(align=='left'){l=l+parseInt($balloonTopArrow.css("marginLeft"));}
if(align=='center'){l=l+(totalWidth(this)/2)-1;}
var t=$(this).offset().top+totalHeight(this);var width=(totalWidth($balloon)>$config.css.maxWidth)?$config.css.maxWidth:$balloon.width();$balloon.width(width);$balloon.css('min-width',width);var bLeft=$(document).scrollLeft();var bTop=$(document).scrollTop();var bRight=$(window).width()+bLeft;var bBottom=$(window).height()+bTop;$balloonTopArrow.show(0);width=parseInt(width);if(parseInt(l)+parseInt(width)>bRight){var c=(parseInt(width)+parseInt($(this).offset().left))-bRight;if(c>width-40){c=width-40;}
l-=c;var m=parseInt($balloonTopArrow.css('marginLeft'));var nm=m+c;$balloonBottomArrow.css('marginLeft',nm);$balloonTopArrow.css('marginLeft',nm);}
$balloon.css({'left':l,'top':t}).data('target',this);clearTimeout($balloon.data('offTimer'));$balloon.removeData('offTimer');if(!$balloon.data('onTimer')){$balloon.data('onTimer',setTimeout(function(){$balloon.fadeIn($config.animationTime);$balloon.removeData('onTimer');},$config.delay));}});if(events.length>1){$(this).on(events[1],function(){hideBalloon();});$(this).on(events[2],function(){if($(this).val()!==$(this).data('originalValue')){hideBalloon();}});}});};var totalHeight=function(el){var height=$(el).height()
+parseInt($(el).css("paddingTop"))
+parseInt($(el).css("paddingBottom"));if(parseInt($(el).css("borderTopWidth"),10)){height+=parseInt($(el).css("borderTopWidth"),10);}
if(parseInt($(el).css("borderBottomWidth"),10)){height+=parseInt($(el).css("borderBottomWidth"),10);}
return height;};var totalWidth=function(el){var width=$(el).width()
+parseInt($(el).css("paddingLeft"))
+parseInt($(el).css("paddingRight"));if(parseInt($(el).css("borderRightWidth"),10)){width+=parseInt($(el).css("borderRightWidth"),10);}
if(parseInt($(el).css("borderLeftWidth"),10)){width+=parseInt($(el).css("borderLeftWidth"),10);}
return width;};initBalloon();};$(function(){var $balloon=$("<div id='balloon'></div>");$balloon.append("<div id='balloonTopArrow'><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div>");$balloon.append('<div id="balloonBody"></div>');$balloon.append("<div id='balloonBottomArrow'><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div><div class='balloon-arrow'></div>");$(document.body).append($balloon);window.attachBalloons();});window.attachBalloons=function(){$('.b-balloon').each(function(){$(this).balloon({delay:500,css:{opacity:1,backgroundColor:"#FBF2D7",border:"solid 1px #E1D8AD",boxShadow:"0px 0px 10px #AAAAAA",padding:"10px",color:'#000000',borderRadius:"2px",maxWidth:"500"}});});}})(jQuery);
;
/*!
 * jQuery Cycle Lite Plugin
 * http://malsup.com/jquery/cycle/lite/
 * Copyright (c) 2008-2012 M. Alsup
 * Version: 1.7 (20-FEB-2013)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * Requires: jQuery v1.3.2 or later
 */
(function($){"use strict";var ver='Lite-1.7';var msie=/MSIE/.test(navigator.userAgent);$.fn.cycle=function(options){return this.each(function(){options=options||{};if(this.cycleTimeout)
clearTimeout(this.cycleTimeout);this.cycleTimeout=0;this.cyclePause=0;var $cont=$(this);var $slides=options.slideExpr?$(options.slideExpr,this):$cont.children();var els=$slides.get();if(els.length<2){return;}
var opts=$.extend({},$.fn.cycle.defaults,options||{},$.metadata?$cont.metadata():$.meta?$cont.data():{});var meta=$.isFunction($cont.data)?$cont.data(opts.metaAttr):null;if(meta)
opts=$.extend(opts,meta);opts.before=opts.before?[opts.before]:[];opts.after=opts.after?[opts.after]:[];opts.after.unshift(function(){opts.busy=0;});var cls=this.className;opts.width=parseInt((cls.match(/w:(\d+)/)||[])[1],10)||opts.width;opts.height=parseInt((cls.match(/h:(\d+)/)||[])[1],10)||opts.height;opts.timeout=parseInt((cls.match(/t:(\d+)/)||[])[1],10)||opts.timeout;if($cont.css('position')=='static')
$cont.css('position','relative');if(opts.width)
$cont.width(opts.width);if(opts.height&&opts.height!='auto')
$cont.height(opts.height);var first=0;$slides.css({position:'absolute',top:0}).each(function(i){$(this).css('z-index',els.length-i);});$(els[first]).css('opacity',1).show();if(msie)
els[first].style.removeAttribute('filter');if(opts.fit&&opts.width)
$slides.width(opts.width);if(opts.fit&&opts.height&&opts.height!='auto')
$slides.height(opts.height);if(opts.pause)
$cont.hover(function(){this.cyclePause=1;},function(){this.cyclePause=0;});var txFn=$.fn.cycle.transitions[opts.fx];if(txFn)
txFn($cont,$slides,opts);$slides.each(function(){var $el=$(this);this.cycleH=(opts.fit&&opts.height)?opts.height:$el.height();this.cycleW=(opts.fit&&opts.width)?opts.width:$el.width();});if(opts.cssFirst)
$($slides[first]).css(opts.cssFirst);if(opts.timeout){if(opts.speed.constructor==String)
opts.speed={slow:600,fast:200}[opts.speed]||400;if(!opts.sync)
opts.speed=opts.speed/2;while((opts.timeout-opts.speed)<250)
opts.timeout+=opts.speed;}
opts.speedIn=opts.speed;opts.speedOut=opts.speed;opts.slideCount=els.length;opts.currSlide=first;opts.nextSlide=1;var e0=$slides[first];if(opts.before.length)
opts.before[0].apply(e0,[e0,e0,opts,true]);if(opts.after.length>1)
opts.after[1].apply(e0,[e0,e0,opts,true]);if(opts.click&&!opts.next)
opts.next=opts.click;if(opts.next)
$(opts.next).unbind('click.cycle').bind('click.cycle',function(){return advance(els,opts,opts.rev?-1:1);});if(opts.prev)
$(opts.prev).unbind('click.cycle').bind('click.cycle',function(){return advance(els,opts,opts.rev?1:-1);});if(opts.timeout)
this.cycleTimeout=setTimeout(function(){go(els,opts,0,!opts.rev);},opts.timeout+(opts.delay||0));});};function go(els,opts,manual,fwd){if(opts.busy)
return;var p=els[0].parentNode,curr=els[opts.currSlide],next=els[opts.nextSlide];if(p.cycleTimeout===0&&!manual)
return;if(manual||!p.cyclePause){if(opts.before.length)
$.each(opts.before,function(i,o){o.apply(next,[curr,next,opts,fwd]);});var after=function(){if(msie)
this.style.removeAttribute('filter');$.each(opts.after,function(i,o){o.apply(next,[curr,next,opts,fwd]);});queueNext(opts);};if(opts.nextSlide!=opts.currSlide){opts.busy=1;$.fn.cycle.custom(curr,next,opts,after);}
var roll=(opts.nextSlide+1)==els.length;opts.nextSlide=roll?0:opts.nextSlide+1;opts.currSlide=roll?els.length-1:opts.nextSlide-1;}else{queueNext(opts);}
function queueNext(opts){if(opts.timeout)
p.cycleTimeout=setTimeout(function(){go(els,opts,0,!opts.rev);},opts.timeout);}}
function advance(els,opts,val){var p=els[0].parentNode,timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}
opts.nextSlide=opts.currSlide+val;if(opts.nextSlide<0){opts.nextSlide=els.length-1;}
else if(opts.nextSlide>=els.length){opts.nextSlide=0;}
go(els,opts,1,val>=0);return false;}
$.fn.cycle.custom=function(curr,next,opts,cb){var $l=$(curr),$n=$(next);$n.css(opts.cssBefore);var fn=function(){$n.animate(opts.animIn,opts.speedIn,opts.easeIn,cb);};$l.animate(opts.animOut,opts.speedOut,opts.easeOut,function(){$l.css(opts.cssAfter);if(!opts.sync)
fn();});if(opts.sync)
fn();};$.fn.cycle.transitions={fade:function($cont,$slides,opts){$slides.not(':eq(0)').hide();opts.cssBefore={opacity:0,display:'block'};opts.cssAfter={display:'none'};opts.animOut={opacity:0};opts.animIn={opacity:1};},fadeout:function($cont,$slides,opts){opts.before.push(function(curr,next,opts,fwd){$(curr).css('zIndex',opts.slideCount+(fwd===true?1:0));$(next).css('zIndex',opts.slideCount+(fwd===true?0:1));});$slides.not(':eq(0)').hide();opts.cssBefore={opacity:1,display:'block',zIndex:1};opts.cssAfter={display:'none',zIndex:0};opts.animOut={opacity:0};opts.animIn={opacity:1};}};$.fn.cycle.ver=function(){return ver;};$.fn.cycle.defaults={animIn:{},animOut:{},fx:'fade',after:null,before:null,cssBefore:{},cssAfter:{},delay:0,fit:0,height:'auto',metaAttr:'cycle',next:null,pause:false,prev:null,speed:1000,slideExpr:null,sync:true,timeout:4000};})(jQuery);
$(function(){$('.b-counter_type_liveinternetkz').each(function(){var token=$(this).data('li-token');var invisible=$(this).data('invisible');if(!invisible){$(this).append('<a href="//www.liveinternet.ru/click;'+token+'" target="_blank"><img src="//counter.yadro.ru/logo;'+token+'?14.1" title="LiveInternet: показано число просмотров за 24 часа, посетителей за 24 часа и за сегодня" alt="" border="0" width="88" height="31"/></a>');}});});
$(function(){$('.b-counter_type_liveinternet').each(function(){var token=$(this).data('li-token');var invisible=$(this).data('invisible');if(!invisible){$(this).append("<a rel='nofollow' href='http://www.liveinternet.ru/click;"+token+"' "+"target=_blank><img src='//counter.yadro.ru/hit;"+token+"?t14.1;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+";"+Math.random()+"' alt='' title='LiveInternet: показано число просмотров за 24"+" часа, посетителей за 24 часа и за сегодня' "+"border='0' width='88' height='31'><\/a>");}else{new Image().src="//counter.yadro.ru/hit;"+token+"?r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+";"+Math.random();}});});
(function(){var script=document.createElement('script');script.type='text/javascript';script.async=true;script.src=["/","inc/js/","trap",".js"].join('');var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(script,s);})();
if($.browser.msie&&parseInt($.browser.version)<9){;(function(window,document){var version='3.6.2pre';var options=window.html5||{};var reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var supportsHtml5Styles;var expando='_html5shiv';var expanID=0;var expandoData={};var supportsUnknownElements;(function(){try{var a=document.createElement('a');a.innerHTML='<xyz></xyz>';supportsHtml5Styles=('hidden'in a);supportsUnknownElements=a.childNodes.length==1||(function(){(document.createElement)('a');var frag=document.createDocumentFragment();return(typeof frag.cloneNode=='undefined'||typeof frag.createDocumentFragment=='undefined'||typeof frag.createElement=='undefined');}());}catch(e){supportsHtml5Styles=true;supportsUnknownElements=true;}}());function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement('p'),parent=ownerDocument.getElementsByTagName('head')[0]||ownerDocument.documentElement;p.innerHTML='x<style>'+cssText+'</style>';return parent.insertBefore(p.lastChild,parent.firstChild);}
function getElements(){var elements=html5.elements;return typeof elements=='string'?elements.split(' '):elements;}
function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];if(!data){data={};expanID++;ownerDocument[expando]=expanID;expandoData[expanID]=data;}
return data;}
function createElement(nodeName,ownerDocument,data){if(!ownerDocument){ownerDocument=document;}
if(supportsUnknownElements){return ownerDocument.createElement(nodeName);}
if(!data){data=getExpandoData(ownerDocument);}
var node;if(data.cache[nodeName]){node=data.cache[nodeName].cloneNode();}else if(saveClones.test(nodeName)){node=(data.cache[nodeName]=data.createElem(nodeName)).cloneNode();}else{node=data.createElem(nodeName);}
return node.canHaveChildren&&!reSkip.test(nodeName)?data.frag.appendChild(node):node;}
function createDocumentFragment(ownerDocument,data){if(!ownerDocument){ownerDocument=document;}
if(supportsUnknownElements){return ownerDocument.createDocumentFragment();}
data=data||getExpandoData(ownerDocument);var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;for(;i<l;i++){clone.createElement(elems[i]);}
return clone;}
function shivMethods(ownerDocument,data){if(!data.cache){data.cache={};data.createElem=ownerDocument.createElement;data.createFrag=ownerDocument.createDocumentFragment;data.frag=data.createFrag();}
ownerDocument.createElement=function(nodeName){if(!html5.shivMethods){return data.createElem(nodeName);}
return createElement(nodeName,ownerDocument,data);};ownerDocument.createDocumentFragment=Function('h,f','return function(){'+'var n=f.cloneNode(),c=n.createElement;'+'h.shivMethods&&('+
getElements().join().replace(/\w+/g,function(nodeName){data.createElem(nodeName);data.frag.createElement(nodeName);return'c("'+nodeName+'")';})+');return n}')(html5,data.frag);}
function shivDocument(ownerDocument){if(!ownerDocument){ownerDocument=document;}
var data=getExpandoData(ownerDocument);if(html5.shivCSS&&!supportsHtml5Styles&&!data.hasCSS){data.hasCSS=!!addStyleSheet(ownerDocument,'article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}'+'mark{background:#FF0;color:#000}');}
if(!supportsUnknownElements){shivMethods(ownerDocument,data);}
return ownerDocument;}
var html5={'elements':options.elements||'abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video','version':version,'shivCSS':(options.shivCSS!==false),'supportsUnknownElements':supportsUnknownElements,'shivMethods':(options.shivMethods!==false),'type':'default','shivDocument':shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment};window.html5=html5;shivDocument(document);}(this,document));}
$(function(){$('.b-cds').each(function(){if(!$(this).data('CDS')){var $iframe=$('<iframe src="'+$(this).data('site')+'/cds/" ></iframe>');$iframe.hide();$(document.body).append($iframe);$(this).data("CDS",1);$iframe.load(function(){$.ajax({url:'/data/get-user-navigation/',dataType:'HTML',success:function(newBlock){var $bNav=$('.b-nav').first();$bNav.hasClass('b-nav_mode_withoutUser')?$('.b-page__user').prepend(newBlock):$bNav.prepend(newBlock);}});});}});});
(function(){$(document).on('load_ga',function(){if(typeof(window.gaArr)=='object'){$.each(window.gaArr,function(k,v){v();});}
delete(window.gaArr);});})();
function Block(){this.wasInitialized=false;}
Block.prototype.init=function(){this.wasInitialized=true;};var create=function(o,properties){if(typeof o!=='object'&&typeof o!=='function')throw new TypeError('Object prototype may only be an Object: '+o);else if(o===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(typeof properties!='undefined')throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function F(){}
F.prototype=o;return new F();};if(!Object.create){Object.create=create;}
$(function(){$('.i-modal-report').each(function(){var report=$(this).data('report');$(document.body).cabinetReport(report);});});
(function($){$.fn.editMode=function(){var $this=$(this);$this.enabledMode=$this.data('status');$this.siteUrl=$this.data('site-url');$this.idcompany=$this.data('idcompany');$this.displayStatus=0;$this.config={types:{action:'site-action/edit/##id##',info:'about/',about:'about/#info',articles:'articles/#f-is_published=1&modeValue=##id##',news:'news/#f-is_published=1&modeValue=##id##',news_single:'news/edit/##id##/',articles_single:'articles/edit/##id##/',goods:'tovary-foto/#f-status=2&modeValue=##id##',product:'tovary-foto/edit/##id##/',product_variant:'tovary-foto/edit-variant/##id##/',promo:'site-action/',photos:'photo/#f-type=1&modeValue=##id##',discounts:'market/#market-settings_tabs_discounts',map:'edit_map/',page:'firm_pages/edit/##id##/',delivery:'market/#market-settings_tabs_delivery',payments:'market/#market-settings_tabs_payments',prices:'price/#f-status=1',price:'price/edit_doc/##id##/',docs:'docs/#f-status=1&modeValue=##id##',doc:'docs/edit/##id##/',offices:'branches/#f-status=0',faq_list:'faq/#f-status=1',faq:'faq/edit/##id##/',vacancies:'vacancies/#f-status=1',vacancy:'vacancies/edit/##id##/',partners:'partners_links/#f-status=1',partner:'partners_links/edit/##id##/',product_comments:'comments/?type=1',news_articles_comments:'comments/?type=2',company_comments:'comments/?type=0',contacts:'about/#contacts_anch',showcase:'showcase/'}};$.extend($this,{switchIt:function(){if($this.displayStatus){$this.displayStatus=0;$.cookie('editMode_'+$this.idcompany,'',{expires:30,path:'/'});$this.hidePanel();}else{$this.displayStatus=1;$.cookie('editMode_'+$this.idcompany,'1',{path:'/'});$this.showPanel();}},showPanel:function(){$('body').addClass('edit-mode-enabled');$this.css({left:($(document).width()-$this.outerWidth())/2});var btn=$('<a href="" target="_blank" class="b-edit-mode__button"></a>');$('.b-edit-mode__item').each(function(){var p=$(this).data('edit-type').split('#');var type=p[0];if(type){var id=p[1]?p[1]:0;var url=$this.siteUrl+'/cabinet/'+$this.config.types[type];url=url.replace(/##id##/i,id);$(this).append(btn.clone().attr('href',url));}});$this.show();},hidePanel:function(){$('body').removeClass('edit-mode-enabled');$('.b-edit-mode__button').remove();$this.hide();}});if($this.enabledMode&&$.cookie('editMode_'+$this.idcompany)){$this.switchIt();}
return $this;};$(function(){window.editMode=$('#b-edit-mode').editMode();$('.b-edit-mode__close').click(function(){window.editMode.switchIt();return false;});});})(jQuery);
function BlockUpperButton(){}
BlockUpperButton.prototype=Object.create(Block.prototype);BlockUpperButton.constructor=BlockUpperButton;BlockUpperButton.prototype.set_up_block_param=function(){var wrapperWidth=$('.b-wrapper').width();var width=($(window).width()-wrapperWidth)/2;var scrollTop=$(window).scrollTop();var $upperButton=$(".b-upper-button");$upperButton[(width<100)?"addClass":"removeClass"]('b-upper-button_narrow');$upperButton[(width<100&&width>45)?"addClass":"removeClass"]('b-upper-button_narrow_middle');$upperButton[(width<=45)?"addClass":"removeClass"]('b-upper-button_narrow_small');if(scrollTop>600){if(!$upperButton.hasClass('opened')){$upperButton.addClass('opened');$upperButton.fadeIn();}}else{$upperButton.removeClass('opened');$upperButton.fadeOut();}};BlockUpperButton.prototype.attachEvents=function(){var self=this;$(".b-upper-button").click(function(){$("html,body").animate({scrollTop:0},500);});window.onresize=function(event){self.set_up_block_param();};$(window).scroll(function(){self.set_up_block_param();});};BlockUpperButton.prototype.init=function(){this.set_up_block_param();this.attachEvents();};$(document).ready(function(){window.bem['b-upper-button']=BlockUpperButton;var BlockObject=new bem['b-upper-button'];if(!BlockObject.wasInitialized){BlockObject.init();}});BlockUpperButton.prototype.set_up_block_param=function(){var $window=$(window);var scrollTop=$window.scrollTop();var $upperButton=$(".b-upper-button");$upperButton.find(".b-upper-button__arrow").text("");if(scrollTop>600){if(!$upperButton.is(":visible")&&!$upperButton.is(":animated")){$upperButton.fadeIn();}}else{if($upperButton.is(":visible")&&!$upperButton.is(":animated")){$upperButton.fadeOut();}}};
jQuery.cookie=function(d,c,a){if("undefined"!=typeof c){a=a||{};null===c&&(c="",a.expires=-1);var b="";if(a.expires&&("number"==typeof a.expires||a.expires.toUTCString))"number"==typeof a.expires?(b=new Date,b.setTime(b.getTime()+864E5*a.expires)):b=a.expires,b="; expires="+b.toUTCString();var e=a.path?"; path="+a.path:"",f=a.domain?"; domain="+a.domain:"";a=a.secure?"; secure":"";document.cookie=[d,"=",encodeURIComponent(c),b,e,f,a].join("")}else{c=null;if(document.cookie&&""!=document.cookie){a=document.cookie.split(";");for(b=0;b<a.length;b++)if(e=jQuery.trim(a[b]),e.substring(0,d.length+1)==d+"="){c=decodeURIComponent(e.substring(d.length+1));break}}return c}};
(function($){
/*! jstz - v1.0.4 - 2012-12-12 */
(function(e){var t=function(){"use strict";var e="s",n=function(e){var t=-e.getTimezoneOffset();return t!==null?t:0},r=function(e,t,n){var r=new Date;return e!==undefined&&r.setFullYear(e),r.setDate(n),r.setMonth(t),r},i=function(e){return n(r(e,0,2))},s=function(e){return n(r(e,5,2))},o=function(e){var t=e.getMonth()>7?s(e.getFullYear()):i(e.getFullYear()),r=n(e);return t-r!==0},u=function(){var t=i(),n=s(),r=i()-s();return r<0?t+",1":r>0?n+",1,"+e:t+",0"},a=function(){var e=u();return new t.TimeZone(t.olson.timezones[e])};return{determine:a,date_is_dst:o}}();t.TimeZone=function(e){"use strict";var n=null,r=function(){return n},i=function(){var e=t.olson.ambiguity_list[n],r=e.length,i=0,s=e[0];for(;i<r;i+=1){s=e[i];if(t.date_is_dst(t.olson.dst_start_dates[s])){n=s;return}}},s=function(){return typeof t.olson.ambiguity_list[n]!="undefined"};return n=e,s()&&i(),{name:r}},t.olson={},t.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},t.olson.dst_start_dates=function(){"use strict";var e=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":e,"Asia/Yekaterinburg":e,"Asia/Omsk":e,"Asia/Krasnoyarsk":e,"Asia/Irkutsk":e,"Asia/Yakutsk":e,"Asia/Vladivostok":e,"Asia/Kamchatka":e,"Europe/Minsk":e,"Australia/Perth":new Date(2008,10,1,1,0,0,0)}}(),t.olson.ambiguity_list={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},typeof exports!="undefined"?exports.jstz=t:e.jstz=t})(this);$.cookie('timezone',jstz.determine().name(),{path:'/',expire:30});})(jQuery);
/*! jQuery UI - v1.11.1 - 2014-09-15
 * http://jqueryui.com
 * Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, slider.js, spinner.js, tabs.js, tooltip.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-pulsate.js, effect-shake.js, effect-slide.js, effect-transfer.js
 * Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap='#"+n+"']")[0],!!r&&i(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function a(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",r)}function r(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function o(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,a=t?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:a.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&n.length?n:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),a=isNaN(s);return(a||s>=0)&&t(i,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,n){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?r["inner"+i].call(this):this.each(function(){e(this).css(n,s(this,t)+"px")})},e.fn["outer"+i]=function(t,a){return"number"!=typeof t?r["outer"+i].call(this,t):this.each(function(){e(this).css(n,s(this,t,!0,a)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,a=e(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i,s){var a,n=e.plugins[t];if(n&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;n.length>a;a++)e.options[n[a][0]]&&n[a][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,a,n;for(n=0;null!=(a=i[n]);n++)try{s=e._data(a,"events"),s&&s.remove&&e(a).triggerHandler("remove")}catch(r){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var a,n,r,o,h={},l=t.split(".")[0];return t=t.split(".")[1],a=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[l]=e[l]||{},n=e[l][t],r=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new r(e,t)},e.extend(r,n,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),o=new i,o.options=e.widget.extend({},o.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,n=this._superApply;return this._super=e,this._superApply=a,t=s.apply(this,arguments),this._super=i,this._superApply=n,t}}(),void 0):(h[t]=s,void 0)}),r.prototype=e.widget.extend(o,{widgetEventPrefix:n?o.widgetEventPrefix||t:t},h,{constructor:r,namespace:l,widgetName:t,widgetFullName:a}),n?(e.each(n._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete n._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var i,s,a=u.call(arguments,1),n=0,r=a.length;r>n;n++)for(i in a[n])s=a[n][i],a[n].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(a){var n="string"==typeof a,r=u.call(arguments,1),o=this;return a=!n&&r.length?e.widget.extend.apply(null,[a].concat(r)):a,n?this.each(function(){var i,n=e.data(this,s);return"instance"===a?(o=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,r),i!==n&&void 0!==i?(o=i&&i.jquery?o.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,s);t?(t.option(a||{}),t._init&&t._init()):e.data(this,s,new i(a,this))}),o}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,a,n,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},s=t.split("."),t=s.shift(),s.length){for(a=r[t]=e.widget.extend({},this.options[t]),n=0;s.length-1>n;n++)a[s[n]]=a[s[n]]||{},a=a[s[n]];if(t=s.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=i}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var a,n=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=a=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,a=this.widget()),e.each(s,function(s,r){function o(){return t||n.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?n[r]:r).apply(n,arguments):void 0}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+n.eventNamespace,u=h[2];u?a.delegate(u,l,o):i.bind(l,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var a,n,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,a,n){"string"==typeof a&&(a={effect:a});var r,o=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),r=!e.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),r&&e.effects&&e.effects.effect[o]?s[t](a):o!==t&&s[o]?s[o](a.duration,a.easing,n):s.queue(function(i){e(this)[t](),n&&n.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,a="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!a&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):t.which?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,n,r=Math.max,o=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==a)return a;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=s.children()[0];return e("body").append(s),t=n.offsetWidth,s.css("overflow","scroll"),i=n.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),a=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,n="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:n?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),a=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:a,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||a?i.width():i.outerWidth(),height:s||a?i.height():i.outerHeight()}}},e.fn.position=function(a){if(!a||!a.of)return f.apply(this,arguments);a=e.extend({},a);var p,m,g,v,y,b,_=e(a.of),x=e.position.getWithinInfo(a.within),w=e.position.getScrollInfo(x),k=(a.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(a.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(a[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],a[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===a.at[0]?y.left+=m:"center"===a.at[0]&&(y.left+=m/2),"bottom"===a.at[1]?y.top+=g:"center"===a.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,N=e.extend({},y),M=t(T.my,u.outerWidth(),u.outerHeight());"right"===a.my[0]?N.left-=d:"center"===a.my[0]&&(N.left-=d/2),"bottom"===a.my[1]?N.top-=c:"center"===a.my[1]&&(N.top-=c/2),N.left+=M[0],N.top+=M[1],n||(N.left=h(N.left),N.top=h(N.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](N,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+M[0],p[1]+M[1]],my:a.my,at:a.at,within:x,elem:u})}),a.using&&(l=function(e){var t=v.left-N.left,i=t+m-d,s=v.top-N.top,n=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:N.left,top:N.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>n?"top":s>0?"bottom":"middle"};d>m&&m>o(t+i)&&(h.horizontal="center"),c>g&&g>o(s+n)&&(h.vertical="middle"),h.important=r(o(t),o(i))>r(o(s),o(n))?"horizontal":"vertical",a.using.call(this,e,h)}),u.offset(e.extend(N,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollLeft:s.offset.left,n=s.width,o=e.left-t.collisionPosition.marginLeft,h=a-o,l=o+t.collisionWidth-n-a;t.collisionWidth>n?h>0&&0>=l?(i=e.left+h+t.collisionWidth-n-a,e.left+=h-i):e.left=l>0&&0>=h?a:h>l?a+n-t.collisionWidth:a:h>0?e.left+=h:l>0?e.left-=l:e.left=r(e.left-o,e.left)},top:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollTop:s.offset.top,n=t.within.height,o=e.top-t.collisionPosition.marginTop,h=a-o,l=o+t.collisionHeight-n-a;t.collisionHeight>n?h>0&&0>=l?(i=e.top+h+t.collisionHeight-n-a,e.top+=h-i):e.top=l>0&&0>=h?a:h>l?a+n-t.collisionHeight:a:h>0?e.top+=h:l>0?e.top-=l:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var i,s,a=t.within,n=a.offset.left+a.scrollLeft,r=a.width,h=a.isWindow?a.scrollLeft:a.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-r-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-r-n,(0>i||o(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>o(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,a=t.within,n=a.offset.top+a.scrollTop,r=a.height,h=a.isWindow?a.scrollTop:a.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-r-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-r-n,e.top+p+f+m>u&&(0>s||o(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>d&&(i>0||d>o(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,a,r,o=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in s)t.style[r]=s[r];t.appendChild(h),i=o||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",a=e(h).offset().left,n=a>10&&11>a,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.document[0],s=this.options;try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(a){}return this.helper||s.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(s.iframeFix===!0?"iframe":s.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e4}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,a=this.options,n=this.document[0];return this.relativeContainer=null,a.containment?"window"===a.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===a.containment?(this.containment=[0,0,e(n).width()-this.helperProportions.width-this.margins.left,(e(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):a.containment.constructor===Array?(this.containment=a.containment,void 0):("parent"===a.containment&&(a.containment=this.helper[0].parentNode),i=e(a.containment),s=i[0],s&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,a,n,r=this.options,o=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return o&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),r.grid&&(a=r.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,l=i?a-this.offset.click.top>=i[1]||a-this.offset.click.top>i[3]?a:a-this.offset.click.top>=i[1]?a-r.grid[1]:a+r.grid[1]:a,n=r.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,h=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-r.grid[0]:n+r.grid[0]:n),"y"===r.axis&&(h=this.originalPageX),"x"===r.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var a=s.options,n=e.extend({},i,{item:s.element});s.sortables=[],e(a.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var a=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,a))})},drag:function(t,i,s){var a=this;e.each(s.sortables,function(){var n=!1,r=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(n=!1),n})),n?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(a).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var a=e("body"),n=s.options;a.css("cursor")&&(n._cursor=a.css("cursor")),a.css("cursor",n.cursor)},stop:function(t,i,s){var a=s.options;a._cursor&&e("body").css("cursor",a._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var a=e(i.helper),n=s.options;a.css("opacity")&&(n._opacity=a.css("opacity")),a.css("opacity",n.opacity)},stop:function(t,i,s){var a=s.options;a._opacity&&e(i.helper).css("opacity",a._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var a=s.options,n=!1,r=s.scrollParentNotHidden[0],o=s.document[0];r!==o&&"HTML"!==r.tagName?(a.axis&&"x"===a.axis||(s.overflowOffset.top+r.offsetHeight-t.pageY<a.scrollSensitivity?r.scrollTop=n=r.scrollTop+a.scrollSpeed:t.pageY-s.overflowOffset.top<a.scrollSensitivity&&(r.scrollTop=n=r.scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(s.overflowOffset.left+r.offsetWidth-t.pageX<a.scrollSensitivity?r.scrollLeft=n=r.scrollLeft+a.scrollSpeed:t.pageX-s.overflowOffset.left<a.scrollSensitivity&&(r.scrollLeft=n=r.scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(t.pageY-e(o).scrollTop()<a.scrollSensitivity?n=e(o).scrollTop(e(o).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(o).scrollTop())<a.scrollSensitivity&&(n=e(o).scrollTop(e(o).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(t.pageX-e(o).scrollLeft()<a.scrollSensitivity?n=e(o).scrollLeft(e(o).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(o).scrollLeft())<a.scrollSensitivity&&(n=e(o).scrollLeft(e(o).scrollLeft()+a.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var a=s.options;s.snapElements=[],e(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var a,n,r,o,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left,l=h+s.snapElements[c].width,u=s.snapElements[c].top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(a=m>=Math.abs(u-b),n=m>=Math.abs(d-y),r=m>=Math.abs(h-v),o=m>=Math.abs(l-g),a&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top-s.margins.top),n&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top-s.margins.top),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left-s.margins.left),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left-s.margins.left)),p=a||n||r||o,"outer"!==f.snapMode&&(a=m>=Math.abs(u-y),n=m>=Math.abs(d-b),r=m>=Math.abs(h-g),o=m>=Math.abs(l-v),a&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top-s.margins.top),n&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top-s.margins.top),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left-s.margins.left),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left-s.margins.left)),!s.snapElements[c].snapping&&(a||n||r||o||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=a||n||r||o||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var a,n=s.options,r=e.makeArray(e(n.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});r.length&&(a=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(t){e(this).css("zIndex",a+t)}),this.css("zIndex",a+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var a=e(i.helper),n=s.options;a.css("zIndex")&&(n._zIndex=a.css("zIndex")),a.css("zIndex",n.zIndex)},stop:function(t,i,s){var a=s.options;a._zIndex&&e(i.helper).css("zIndex",a._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,a=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(a=!0,!1):void 0}),a?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,a){if(!i.offset)return!1;var n=(t.positionAbs||t.position.absolute).left,r=(t.positionAbs||t.position.absolute).top,o=n+t.helperProportions.width,h=r+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return n>=l&&d>=o&&r>=u&&c>=h;case"intersect":return n+t.helperProportions.width/2>l&&d>o-t.helperProportions.width/2&&r+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(a.pageY,u,i.proportions().height)&&e(a.pageX,l,i.proportions().width);case"touch":return(r>=u&&c>=r||h>=u&&c>=h||u>r&&h>c)&&(n>=l&&d>=n||o>=l&&d>=o||l>n&&o>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,a,n=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,o=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;n.length>s;s++)if(!(n[s].options.disabled||t&&!n[s].accept.call(n[s].element[0],t.currentItem||t.element))){for(a=0;o.length>a;a++)if(o[a]===n[s].element[0]){n[s].proportions().height=0;continue e}n[s].visible="none"!==n[s].element.css("display"),n[s].visible&&("mousedown"===r&&n[s]._activate.call(n[s],i),n[s].offset=n[s].element.offset(),n[s].proportions({width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,a,n,r=e.ui.intersect(t,this,this.options.tolerance,i),o=!r&&this.isover?"isout":r&&!this.isover?"isover":null;o&&(this.options.greedy&&(a=this.options.scope,n=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===a}),n.length&&(s=e(n[0]).droppable("instance"),s.greedyChild="isover"===o)),s&&"isover"===o&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[o]=!0,this["isout"===o?"isover":"isout"]=!1,this["isover"===o?"_over":"_out"].call(this,i),s&&"isout"===o&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[s]>0?!0:(t[s]=1,a=t[s]>0,t[s]=0,a)},_create:function(){var t,i,s,a,n,r=this,o=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),n="ui-resizable-"+s,a=e("<div class='ui-resizable-handle "+n+"'></div>"),a.css({zIndex:o.zIndex}),"se"===s&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(a);this._renderAxis=function(t){var i,s,a,n;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(a,n),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=a&&a[1]?a[1]:"se")}),o.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(e(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){o.disabled||r.resizing||(e(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,a=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(t){var i,s,a,n=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(i+=e(n.containment).scrollLeft()||0,s+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,a=this.originalMousePosition,n=this.axis,r=t.pageX-a.left||0,o=t.pageY-a.top||0,h=this._change[n];return this._updatePrevProperties(),h?(i=h.apply(this,[t,r,o]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,a,n,r,o,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),a=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,n=s?0:u.sizeDiff.width,r={width:u.helper.width()-n,height:u.helper.height()-a},o=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(r,{top:h,left:o})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,a,n,r=this.options;n={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,i=n.maxHeight*this.aspectRatio,a=n.maxWidth/this.aspectRatio,t>n.minWidth&&(n.minWidth=t),s>n.minHeight&&(n.minHeight=s),n.maxWidth>i&&(n.maxWidth=i),n.maxHeight>a&&(n.maxHeight=a)),this._vBoundaries=n},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,n=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,o=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return n&&(e.width=t.minWidth),r&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),n&&l&&(e.left=o-t.minWidth),s&&l&&(e.left=o-t.maxWidth),r&&u&&(e.top=h-t.minHeight),a&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],a=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(a[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,a=this.originalPosition;return{top:a.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,a=i._proportionallyResizeElements,n=a.length&&/textarea/i.test(a[0].nodeName),r=n&&i._hasScroll(a[0],"left")?0:i.sizeDiff.height,o=n?0:i.sizeDiff.width,h={width:i.size.width-o,height:i.size.height-r},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};a&&a.length&&e(a[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,a,n,r,o,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,a=h.containerSize.height,n=h.containerSize.width,r=h._hasScroll(c,"left")?c.scrollWidth:n,o=h._hasScroll(c)?c.scrollHeight:a,h.parentData={element:c,left:s.left,top:s.top,width:r,height:o}))},resize:function(t){var i,s,a,n,r=e(this).resizable("instance"),o=r.options,h=r.containerOffset,l=r.position,u=r._aspectRatio||t.shiftKey,d={top:0,left:0},c=r.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(r._helper?h.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-h.left:r.position.left-d.left),u&&(r.size.height=r.size.width/r.aspectRatio,p=!1),r.position.left=o.helper?h.left:0),l.top<(r._helper?h.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-h.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio,p=!1),r.position.top=r._helper?h.top:0),a=r.containerElement.get(0)===r.element.parent().get(0),n=/relative|absolute/.test(r.containerElement.css("position")),a&&n?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-d.left:r.offset.left-h.left)),s=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-d.top:r.offset.top-h.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio,p=!1)),s+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-s,u&&(r.size.width=r.size.height*r.aspectRatio,p=!1)),p||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,a=t.containerPosition,n=t.containerElement,r=e(t.helper),o=r.offset(),h=r.outerWidth()-t.sizeDiff.width,l=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(n.css("position"))&&e(this).css({left:o.left-a.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(n.css("position"))&&e(this).css({left:o.left-a.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).resizable("instance"),a=s.options,n=s.originalSize,r=s.originalPosition,o={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-r.top||0,left:s.position.left-r.left||0},h=function(t,s){e(t).each(function(){var t=e(this),a=e(this).data("ui-resizable-alsoresize"),n={},r=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(a[t]||0)+(o[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})};"object"!=typeof a.alsoResize||a.alsoResize.nodeType?h(a.alsoResize):e.each(a.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,a=i.size,n=i.originalSize,r=i.originalPosition,o=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((a.width-n.width)/l)*l,c=Math.round((a.height-n.height)/u)*u,p=n.width+d,f=n.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(o)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(o)?(i.size.width=p,i.size.height=f,i.position.top=r.top-c):/^(sw)$/.test(o)?(i.size.width=p,i.size.height=f,i.position.left=r.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=r.top-c):(f=u-t.height,i.size.height=f,i.position.top=r.top+n.height-f),p-l>0?(i.size.width=p,i.position.left=r.left-d):(p=u-t.height,i.size.width=p,i.position.left=r.left+n.width-p))}}),e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,a=e.data(this,"selectable-item");return a?(s=!t.metaKey&&!t.ctrlKey||!a.$element.hasClass("ui-selected"),a.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),a.unselecting=!s,a.selecting=s,a.selected=s,s?i._trigger("selecting",t,{selecting:a.element}):i._trigger("unselecting",t,{unselecting:a.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,a=this.options,n=this.opos[0],r=this.opos[1],o=t.pageX,h=t.pageY;return n>o&&(i=o,o=n,n=i),r>h&&(i=h,h=r,r=i),this.helper.css({left:n,top:r,width:o-n,height:h-r}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===a.tolerance?l=!(i.left>o||n>i.right||i.top>h||r>i.bottom):"fit"===a.tolerance&&(l=i.left>n&&o>i.right&&i.top>r&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e4,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,a=!1,n=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")===n?(s=e(this),!1):void 0}),e.data(t.target,n.widgetName+"-item")===n&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(a=!0)}),a)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var a,n,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(n)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,a,n,r=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),o!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],a=s.item[0],n=this._intersectsWithPointer(s),n&&s.instance===this.currentContainer&&a!==this.currentItem[0]&&this.placeholder[1===n?"next":"prev"]()[0]!==a&&!e.contains(this.placeholder[0],a)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],a):!0)){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,a=this.placeholder.offset(),n=this.options.axis,r={};n&&"x"!==n||(r.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(r.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,a=s+this.helperProportions.height,n=e.left,r=n+e.width,o=e.top,h=o+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>o&&h>s+l,c="y"===this.options.axis||t+u>n&&r>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>n&&r>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>o&&h>a-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,a=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return s?this.floating?n&&"right"===n||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&i||"left"===a&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){o.push(this)}var s,a,n,r,o=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(n=e(l[s]),a=n.length-1;a>=0;a--)r=e.data(n[a],this.widgetFullName),r&&r!==this&&!r.options.disabled&&h.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,a,n,r,o,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(a=e(c[i]),s=a.length-1;s>=0;s--)n=e.data(a[s],this.widgetFullName),n&&n!==this&&!n.options.disabled&&(d.push([e.isFunction(n.options.items)?n.options.items.call(n.element[0],t,{item:this.currentItem}):e(n.options.items,n.element),n]),this.containers.push(n));for(i=d.length-1;i>=0;i--)for(r=d[i][1],o=d[i][0],s=0,l=o.length;l>s;s++)h=e(o[s]),h.data(this.widgetName+"-item",r),u.push({item:h,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,a,n;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(a=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=a.outerWidth(),s.height=a.outerHeight()),n=a.offset(),s.left=n.left,s.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)n=this.containers[i].element.offset(),this.containers[i].containerCache.left=n.left,this.containers[i].containerCache.top=n.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),a=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(a)}):"img"===s&&a.attr("src",t.currentItem.attr("src")),i||a.css("visibility","hidden"),a},update:function(e,a){(!i||s.forcePlaceholderSize)&&(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,a,n,r,o,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(a=1e4,n=null,u=c.floating||this._isFloating(this.currentItem),r=u?"left":"top",o=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[r],l=!1,t[d]-h>this.items[s][o]/2&&(l=!0),a>Math.abs(t[d]-h)&&(a=Math.abs(t[d]-h),n=this.items[s],this.direction=l?"up":"down"));if(!n&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;n?this._rearrange(t,n,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode),("document"===a.containment||"window"===a.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],i=e(a.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:a.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:a.scrollLeft())*s}},_generatePosition:function(t){var i,s,a=this.options,n=t.pageX,r=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),a.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/a.grid[1])*a.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-a.grid[1]:i+a.grid[1]:i,s=this.originalPageX+Math.round((n-this.originalPageX)/a.grid[0])*a.grid[0],n=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-a.grid[0]:s+a.grid[0]:s)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:o.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:o.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,a=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&a.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||a.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(a.push(function(e){this._trigger("remove",e,this._uiHash())}),a.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),a.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||a.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(a.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),s=0;a.length>s;s++)a[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(s=0;a.length>s;s++)a[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.accordion",{version:"1.11.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,a=this.headers.index(t.target),n=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:n=this.headers[(a+1)%s];break;case i.LEFT:case i.UP:n=this.headers[(a-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:n=this.headers[0];break;case i.END:n=this.headers[s-1]}n&&(e(t.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,i=this.options,s=i.heightStyle,a=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),a=s.uniqueId().attr("id");t.attr("aria-controls",a),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=a.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,a=e(t.currentTarget),n=a[0]===s[0],r=n&&i.collapsible,o=r?e():a.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:r?e():a,newPanel:o};t.preventDefault(),n&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=r?!1:this.headers.index(a),this.active=n?e():a,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),n||(a.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&a.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),a.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,i){var s,a,n,r=this,o=0,h=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},u=h&&l.down||l,d=function(){r._toggleComplete(i)};return"number"==typeof u&&(n=u),"string"==typeof u&&(a=u),a=a||u.easing||l.easing,n=n||u.duration||l.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:n,easing:a,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:n,easing:a,complete:d,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?o+=i.now:"content"!==r.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-o),o=0)}}),void 0):t.animate(this.hideProps,n,a,d):e.animate(this.showProps,n,a,d)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,a,n,r,o,h=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:h=!1,a=this.previousFilter||"",n=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),n===a?r=!0:n=a+n,o=RegExp("^"+i(n),"i"),s=this.activeMenu.find(this.options.items).filter(function(){return o.test(e(this).text())}),s=r&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(n=String.fromCharCode(t.keyCode),o=RegExp("^"+i(n),"i"),s=this.activeMenu.find(this.options.items).filter(function(){return o.test(e(this).text())})),s.length?(this.focus(t,s),s.length>1?(this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,a=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+a).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=n.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,a,n,r,o;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-i-s,n=this.activeMenu.scrollTop(),r=this.activeMenu.height(),o=t.outerHeight(),0>a?this.activeMenu.scrollTop(n+a):a+o>r&&this.activeMenu.scrollTop(n+a-r+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,a;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-a}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,a;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+a>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}}),e.widget("ui.autocomplete",{version:"1.11.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,a=this.element[0].nodeName.toLowerCase(),n="textarea"===a,r="input"===a;this.isMultiLine=n?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[n||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var n=e.ui.keyCode;switch(a.keyCode){case n.PAGE_UP:t=!0,this._move("previousPage",a);break;case n.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case n.UP:t=!0,this._keyEvent("previous",a);break;case n.DOWN:t=!0,this._keyEvent("next",a);break;case n.ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case n.TAB:this.menu.active&&this.menu.select(a);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(a),a.preventDefault());break;default:i=!0,this._searchTimeout(a)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var a=e.ui.keyCode;switch(s.keyCode){case a.PAGE_UP:this._move("previousPage",s);break;case a.PAGE_DOWN:this._move("nextPage",s);break;case a.UP:this._keyEvent("previous",s);break;case a.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,a;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(a=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:a})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(a.value),s=i.item.attr("aria-label")||a.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,a){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,a=e([]);return i&&(i=i.replace(/'/g,"\\'"),a=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),a};e.widget("ui.button",{version:"1.11.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,a=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(a)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,a=s.primary&&s.secondary,n=[];s.primary||s.secondary?(this.options.text&&n.push("ui-button-text-icon"+(a?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(n.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):n.push("ui-button-text-only"),t.addClass(n.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.1"}});var v;e.extend(a.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,a,n;s=t.nodeName.toLowerCase(),a="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),n=this._newInst(e(t),a),n.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,n):a&&this._inlineDatepicker(t,n)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,a,n,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[o?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(a=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:n,alt:a,title:a}):e("<button type='button'></button>").addClass(this._triggerClass).html(n?e("<img/>").attr({src:n,alt:a,title:a}):a)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,a,n=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,s=0,a=0;e.length>a;a++)e[a].length>i&&(i=e[a].length,s=a);return s},n.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,a,n){var r,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),o(c.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),a=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(a.append.remove(),a.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,a=e(t),n=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=a.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,a=e(t),n=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=a.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var a,n,r,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(a=i||{},"string"==typeof i&&(a={},a[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),n=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),o(l.settings,a),null!==r&&void 0!==a.dateFormat&&void 0===a.minDate&&(l.settings.minDate=this._formatDate(l,r)),null!==h&&void 0!==a.dateFormat&&void 0===a.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in a&&(a.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,n),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,a,n=e.datepicker._getInst(t.target),r=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return a=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",n.dpDiv),a[0]&&e.datepicker._selectDay(t.target,n.selectedMonth,n.selectedYear,a[0]),i=e.datepicker._get(n,"onSelect"),i?(s=e.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[s,n])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,a=e.datepicker._getInst(t.target);return e.datepicker._get(a,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(a,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(a){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,a,n,r,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),a=e.datepicker._get(i,"beforeShow"),n=a?a.apply(t,[t,i]):{},n!==!1&&(o(i.settings,n),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),a=s[1],n=17,o=t.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&r.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",n*a+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var a=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?a-r:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+o?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>h&&h>a?Math.abs(i.left+a-h):0),i.top-=Math.min(i.top,i.top+n>l&&l>n?Math.abs(n+o):0),i},_findPos:function(t){for(var i,s=this._getInst(t),a=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[a?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,a,n,r=this._curInst;!r||t&&r!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),a=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),s,a):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,a),i||a(),this._datepickerShowing=!1,n=this._get(r,"onClose"),n&&n.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var a=e(t),n=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(n,i+("M"===s?this._get(n,"showCurrentAtPos"):0),s),this._updateDatepicker(n))},_gotoToday:function(t){var i,s=e(t),a=this._getInst(s[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(i=new Date,a.selectedDay=i.getDate(),a.drawMonth=a.selectedMonth=i.getMonth(),a.drawYear=a.selectedYear=i.getFullYear()),this._notifyChange(a),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var a=e(t),n=this._getInst(a[0]);n["selected"+("M"===s?"Month":"Year")]=n["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(a)},_selectDay:function(t,i,s,a){var n,r=e(t);e(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(n=this._getInst(r[0]),n.selectedDay=n.currentDay=e("a",a).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=s,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,a=e(t),n=this._getInst(a[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),s=this._get(n,"onSelect"),s?s.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,a,n=this._get(t,"altField");n&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),a=this.formatDate(i,s,this._getFormatConfig(t)),e(n).each(function(){e(this).val(a)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var a,n,r,o,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>a+1&&t.charAt(a+1)===e;return i&&a++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,a="y"===e?s:1,n=RegExp("^\\d{"+a+","+s+"}"),r=i.substring(h).match(n);if(!r)throw"Missing number at position "+h;return h+=r[0].length,parseInt(r[0],10)},w=function(t,s,a){var n=-1,r=e.map(_(t)?a:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(r,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(n=t[0],h+=s.length,!1):void 0}),-1!==n)return n+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(a))throw"Unexpected literal at position "+h;h++};for(a=0;t.length>a;a++)if(b)"'"!==t.charAt(a)||_("'")?k():b=!1;else switch(t.charAt(a)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":o=new Date(x("@")),m=o.getFullYear(),g=o.getMonth()+1,v=o.getDate();break;case"!":o=new Date((x("!")-this._ticksTo1970)/1e4),m=o.getFullYear(),g=o.getMonth()+1,v=o.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(r=i.substr(h),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(n=this._getDaysInMonth(m,g-1),n>=v)break;g++,v-=n}if(o=this._daylightSavingAdjust(new Date(m,g-1,v)),o.getFullYear()!==m||o.getMonth()+1!==g||o.getDate()!==v)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),a,n);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),r,o);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,a=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||a("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":a("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,a=this._getDefaultDate(e),n=a,r=this._getFormatConfig(e);try{n=this.parseDate(i,s,r)||a}catch(o){s=t?"":s}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=s?n.getDate():0,e.currentMonth=s?n.getMonth():0,e.currentYear=s?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var a=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var a=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=a.getFullYear(),r=a.getMonth(),o=a.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r))}l=h.exec(i)}return new Date(n,r,o)},r=null==i||""===i?s:"string"==typeof i?n(i):"number"==typeof i?isNaN(i)?s:a(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?s:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,a=e.selectedMonth,n=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),a===e.selectedMonth&&n===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,a,n,r,o,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,N,M,C,A,P,I,H,z,F,E,L,W,j,O=new Date,R=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Y=this._get(e,"isRTL"),J=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),K=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),U=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),G=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-U,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-V[0]*V[1]+1,$.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-q,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",a=this._get(e,"nextText"),a=K?this.formatDate(a,this._daylightSavingAdjust(new Date(et,Z+q,1)),this._getFormatConfig(e)):a,n=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+a+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+a+"</span></a>",r=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?X:R,r=K?this.formatDate(r,o,this._getFormatConfig(e)):r,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=J?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;V[0]>w;w++){for(k="",this.maxRows=4,T=0;V[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",N="",G){if(N+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:N+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case V[1]-1:N+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:N+=" ui-datepicker-group-middle",S=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?n:s:"")+(/all|right/.test(S)&&0===w?Y?s:n:"")+this._generateMonthYearHeader(e,Z,et,Q,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)C=(x+u)%7,M+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[C]+"'>"+p[C]+"</span></th>";for(N+=M+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),H=G?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;H>F;F++){for(N+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)L=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],W=z.getMonth()!==Z,j=W&&!y||!L[0]||Q&&Q>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(W?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(W&&!v?"":" "+L[1]+(z.getTime()===X.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(W&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(W&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===X.getTime()?" ui-state-active":"")+(W?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);N+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),N+="</tbody></table>"+(G?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=N}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,a,n,r,o){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(n||!g)_+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=a&&a.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||a.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+o[u]+"</option>");_+="</select>"}if(y||(b+=_+(!n&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=a?Math.min(m,a.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!n&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),a=e.drawMonth+("M"===i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(s,a))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,a,n)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),a=i&&i>t?i:t;return s&&a>s?s:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var a=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,s+(0>t?t:a[0]*a[1]),1));return 0>t&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i,s,a=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=null,o=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=s),i[1].match(/[+\-].*/)&&(o+=s)),(!a||t.getTime()>=a.getTime())&&(!n||t.getTime()<=n.getTime())&&(!r||t.getFullYear()>=r)&&(!o||o>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new a,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.1",e.datepicker,e.widget("ui.dialog",{version:"1.11.1",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(a){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,a=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),n=Math.max.apply(null,a);return n>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",n+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),a=i.filter(":last");t.target!==a[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){a.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var a,n;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),a=s.click,s.click=function(){a.apply(t.element[0],arguments)},n={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(n).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,a){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(a))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(a,n){var r=n.offset.left-i.document.scrollLeft(),o=n.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(o>=0?"+":"")+o,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",a,t(n))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,a=s.resizable,n=this.uiDialog.css("position"),r="string"==typeof a?a:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:r,start:function(s,a){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(a))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(a,n){var r=i.uiDialog.offset(),o=r.left-i.document.scrollLeft(),h=r.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",a,t(n))}}).css("position",n)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,a={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(a[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,t){var i,s,a=this.uiDialog;"dialogClass"===e&&a.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=a.is(":data(ui-draggable)"),i&&!t&&a.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=a.is(":data(ui-resizable)"),s&&!t&&a.resizable("destroy"),s&&"string"==typeof t&&a.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.progressbar",{version:"1.11.1",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",r=[];for(i=s.values&&s.values.length||1,a.length>i&&(a.slice(i).remove(),a=a.slice(0,i)),t=a.length;i>t;t++)r.push(n);this.handles=a.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,a,n,r,o,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(a>i||a===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(a=i,n=e(this),r=t)}),o=this._start(t,r),o===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,n.addClass("ui-state-active").focus(),h=n.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-n.width()/2,top:t.pageY-h.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,a,n;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),a=this._valueMax()-this._valueMin(),n=this._valueMin()+s*a,this._trimAlignValue(n)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,a,n;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(a=this.values(),a[t]=i,n=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),s=this.values(t?0:1),n!==!1&&this.values(t,i))):i!==this.value()&&(n=this._trigger("slide",e,{handle:this.handles[t],value:i}),n!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,a,n;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,a=arguments[0],n=0;s.length>n;n+=1)s[n]=this._trimAlignValue(a[n]),this._change(null,n);this._refreshValue()},_setOption:function(t,i){var s,a=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(a=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;a>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,s,a,n,r=this.options.range,o=this.options,h=this,l=this._animateOff?!1:o.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,o.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},o.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:o.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},o.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:o.animate}))),t=i}):(s=this.value(),a=this._valueMin(),n=this._valueMax(),i=n!==a?100*((s-a)/(n-a)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,o.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},o.animate),"max"===r&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:o.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},o.animate),"max"===r&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(t){var i,s,a,n,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,r),i===!1))return}switch(n=this.options.step,s=a=this.options.values&&this.options.values.length?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:a=this._valueMin();break;case e.ui.keyCode.END:a=this._valueMax();break;case e.ui.keyCode.PAGE_UP:a=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;a=this._trimAlignValue(s+n);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;a=this._trimAlignValue(s-n)}this._slide(t,r,a)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.spinner",{version:"1.11.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var a=i.attr(s);void 0!==a&&a.length&&(t[s]=a)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(a){}try{s=decodeURIComponent(s)}catch(a){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,a){return e(a).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),a=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:a=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,a),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>a&&(t=0),0>t&&(t=a),t}for(var a=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var a,n,r,o=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(a=s.hash,r=a.substring(1),n=t.element.find(t._sanitizeSelector(a))):(r=h.attr("aria-controls")||e({}).uniqueId()[0].id,a="#"+r,n=t.element.find(a),n.length||(n=t._createPanel(r),n.insertAfter(t.panels[i-1]||t.tablist)),n.attr("aria-live","polite")),n.length&&(t.panels=t.panels.add(n)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":r,"aria-labelledby":o}),n.attr("aria-labelledby",o)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,a=e(t.currentTarget),n=a.closest("li"),r=n[0]===s[0],o=r&&i.collapsible,h=o?e():this._getPanelForTab(n),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:o?e():n,newPanel:h};t.preventDefault(),n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=o?!1:this.tabs.index(n),this.active=r?e():n,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(n),t),this._toggle(t,u))},_toggle:function(t,i){function s(){n.running=!1,n._trigger("activate",t,i)}function a(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&n.options.show?n._show(r,n.options.show,s):(r.show(),s())}var n=this,r=i.newPanel,o=i.oldPanel;this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),a()),o.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),r.length&&o.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,a=this.tabs.eq(t),n=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),o={tab:a,panel:r};this._isLocal(n[0])||(this.xhr=e.ajax(this._ajaxSettings(n,i,o)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),s._trigger("load",i,o)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,s){var a=this;return{url:t.attr("href"),beforeSend:function(t,n){return a._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:n},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.1",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),a=e.inArray(i,s);-1!==a&&s.splice(a,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var a=e.Event("blur");a.target=a.currentTarget=s[0],t.close(a,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,a=this,n=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){e.data("ui-tooltip-open")&&a._delay(function(){t&&(t.type=n),this._open(t,e,i)})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function a(e){l.of=e,n.is(":hidden")||n.position(l)}var n,r,o,h,l=e.extend({},this.options.position);if(s){if(n=this._find(i),n.length)return n.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),n=this._tooltip(i),this._addDescribedBy(i,n.attr("id")),n.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:a}),a(t)):n.position(e.extend({of:i},this.options.position)),this.hiding=!1,this.closing=!1,n.hide(),this._show(n,this.options.show),this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){n.is(":visible")&&(a(l.of),clearInterval(o))},e.fx.interval)),this._trigger("open",t,{tooltip:n}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}},i[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(n)}),t&&"mouseover"!==t.type||(r.mouseleave="close"),t&&"focusin"!==t.type||(r.focusout="close"),this._on(!0,i,r)}},close:function(t){var i=this,s=e(t?t.currentTarget:this.element),a=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),this.hiding=!0,a.stop(!0),this._hide(a,this.options.hide,function(){i._removeTooltip(e(this)),this.hiding=!1,this.closing=!1}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,s){e(s.element).attr("title",s.title),delete i.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:a}),this.hiding||(this.closing=!1))},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]=t,i},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var a=e.Event("blur");a.target=a.currentTarget=s[0],t.close(a,!0),e("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}});var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),a=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,n){var r,o=n.re.exec(i),h=o&&n.parse(o),l=n.space||"rgba";return h?(r=s[l](h),s[u[l].cache]=r[u[l].cache],a=s._rgba=r._rgba,!1):t}),a.length?("0,0,0,0"===a.join()&&e.extend(a,n.transparent),s):n[i]}function a(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var n,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",o=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,a){return new e.Color.fn.parse(t,i,s,a)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(a,r,o,h){if(a===t)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=e(a).css(r),r=t);var d=this,c=e.type(a),p=this._rgba=[];return r!==t&&(a=[a,r,o,h],c="array"),"string"===c?this.parse(s(a)||n._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(a[t.idx],t)}),this):"object"===c?(a instanceof l?f(u,function(e,t){a[t.cache]&&(d[t.cache]=a[t.cache].slice())}):f(u,function(t,s){var n=s.cache;f(s.props,function(e,t){if(!d[n]&&s.to){if("alpha"===e||null==a[e])return;d[n]=s.to(d._rgba)}d[n][t.idx]=i(a[e],t,!0)}),d[n]&&0>e.inArray(null,d[n].slice(0,3))&&(d[n][3]=1,s.from&&(d._rgba=s.from(d[n])))}),this):t},is:function(e){var i=l(e),s=!0,a=this;return f(u,function(e,n){var r,o=i[n.cache];return o&&(r=a[n.cache]||n.to&&n.to(a._rgba)||[],f(n.props,function(e,i){return null!=o[i.idx]?s=o[i.idx]===r[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),a=s._space(),n=u[a],r=0===this.alpha()?l("transparent"):this,o=r[n.cache]||n.to(r._rgba),h=o.slice();return s=s[n.cache],f(n.props,function(e,a){var n=a.idx,r=o[n],l=s[n],u=d[a.type]||{};null!==l&&(null===r?h[n]=l:(u.mod&&(l-r>u.mod/2?r+=u.mod:r-l>u.mod/2&&(r-=u.mod)),h[n]=i((l-r)*t+r,a)))}),this[a](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),a=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*a[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,a=e[1]/255,n=e[2]/255,r=e[3],o=Math.max(s,a,n),h=Math.min(s,a,n),l=o-h,u=o+h,d=.5*u;return t=h===o?0:s===o?60*(a-n)/l+360:a===o?60*(n-s)/l+120:60*(s-a)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==r?1:r]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],n=e[3],r=.5>=s?s*(1+i):s+i-s*i,o=2*s-r;return[Math.round(255*a(o,r,t+1/3)),Math.round(255*a(o,r,t)),Math.round(255*a(o,r,t-1/3)),n]},f(u,function(s,a){var n=a.props,r=a.cache,h=a.to,u=a.from;l.fn[s]=function(s){if(h&&!this[r]&&(this[r]=h(this._rgba)),s===t)return this[r].slice();var a,o=e.type(s),d="array"===o||"object"===o?s:arguments,c=this[r].slice();return f(n,function(e,t){var s=d["object"===o?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(a=l(u(c)),a[r]=c,a):l(c)},f(n,function(t,i){l.fn[t]||(l.fn[t]=function(a){var n,r=e.type(a),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===r?u:("function"===r&&(a=a.call(this,u),r=e.type(a)),null==a&&i.empty?this:("string"===r&&(n=o.exec(a),n&&(a=u+parseFloat(n[2])*("+"===n[1]?1:-1))),l[i.idx]=a,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,a){var n,r,o="";if("transparent"!==a&&("string"!==e.type(a)||(n=s(a)))){if(a=l(n||a),!c.rgba&&1!==a._rgba[3]){for(r="backgroundColor"===i?t.parentNode:t;(""===o||"transparent"===o)&&r&&r.style;)try{o=e.css(r,"backgroundColor"),r=r.parentNode}catch(h){}a=a.blend(o&&"transparent"!==o?o:"_default")}a=a.toRgbaString()}try{t.style[i]=a}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(r),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},n=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,a=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,n={};if(a&&a.length&&a[0]&&a[a[0]])for(s=a.length;s--;)i=a[s],"string"==typeof a[i]&&(n[e.camelCase(i)]=a[i]);else for(i in a)"string"==typeof a[i]&&(n[i]=a[i]);return n}function i(t,i){var s,n,r={};for(s in i)n=i[s],t[s]!==n&&(a[s]||(e.fx.step[s]||!isNaN(parseFloat(n)))&&(r[s]=n));return r}var s=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(a,n,r,o){var h=e.speed(n,r,o);return this.queue(function(){var n,r=e(this),o=r.attr("class")||"",l=h.children?r.find("*").addBack():r;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),n=function(){e.each(s,function(e,t){a[t]&&r[t+"Class"](a[t])})},n(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),r.attr("class",o),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){n(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(i,s,a,n){return s?e.effects.animateClass.call(this,{add:i},s,a,n):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,a,n){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,a,n):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,a,n,r){return"boolean"==typeof s||void 0===s?a?e.effects.animateClass.call(this,s?{add:i}:{remove:i},a,n,r):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,a,n)}}(e.fn.toggleClass),switchClass:function(t,i,s,a,n){return e.effects.animateClass.call(this,{add:i,remove:t},s,a,n)}})}(),function(){function t(t,i,s,a){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(a=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(a=s,s=i,i={}),e.isFunction(s)&&(a=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=a||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.1",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:t.width(),height:t.height()},n=document.activeElement;try{n.id}catch(r){n=document.body}return t.wrap(s),(t[0]===n||e.contains(t[0],n))&&e(n).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(a),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,a){return a=a||{},e.each(i,function(e,i){var n=t.cssUnit(i);n[0]>0&&(a[i]=n[0]*s+n[1])}),a}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(n)&&n.call(a[0]),e.isFunction(t)&&t()}var a=e(this),n=s.complete,o=s.mode;(a.is(":hidden")?"hide"===o:"show"===o)?(a[o](),i()):r.call(a[0],s,i)}var s=t.apply(this,arguments),a=s.mode,n=s.queue,r=e.effects.effect[s.effect];return e.fx.off||!r?a?this[a](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):n===!1?this.each(i):this.queue(n||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="show",this.effect.call(this,a)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="hide",this.effect.call(this,a)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="toggle",this.effect.call(this,a)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,a,n,r=e(this),o=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(r,t.mode||"hide"),d=t.direction||"up",c=o.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;r.parent().is(".ui-effects-wrapper")?e.effects.save(r.parent(),l):e.effects.save(r,l),r.show(),s=e.effects.createWrapper(r).css({overflow:"hidden"}),a=s[p](),n=parseFloat(s.css(f))||0,g[p]=v?a:0,m||(r.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?n:a+n),v&&(s.css(p,0),m||s.css(f,n+a)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&r.hide(),e.effects.restore(r,l),e.effects.removeWrapper(r),i()}})},e.effects.effect.bounce=function(t,i){var s,a,n,r=e(this),o=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(r,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=r.queue(),_=b.length;for((u||l)&&o.push("opacity"),e.effects.save(r,o),r.show(),e.effects.createWrapper(r),c||(c=r["top"===v?"outerHeight":"outerWidth"]()/3),u&&(n={opacity:1},n[v]=0,r.css("opacity",0).css(v,y?2*-c:2*c).animate(n,m,g)),l&&(c/=Math.pow(2,p-1)),n={},n[v]=0,s=0;p>s;s++)a={},a[v]=(y?"-=":"+=")+c,r.animate(a,m,g).animate(n,m,g),c=l?2*c:c/2;l&&(a={opacity:0},a[v]=(y?"-=":"+=")+c,r.animate(a,m,g)),r.queue(function(){l&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),r.dequeue()},e.effects.effect.clip=function(t,i){var s,a,n,r=e(this),o=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(r,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(r,o),r.show(),s=e.effects.createWrapper(r).css({overflow:"hidden"}),a="IMG"===r[0].tagName?s:r,n=a[c](),l&&(a.css(c,0),a.css(p,n/2)),f[c]=l?n:0,f[p]=l?0:n/2,a.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),i()}})},e.effects.effect.drop=function(t,i){var s,a=e(this),n=["position","top","bottom","left","right","opacity","height","width"],r=e.effects.setMode(a,t.mode||"hide"),o="show"===r,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:o?1:0};e.effects.save(a,n),a.show(),e.effects.createWrapper(a),s=t.distance||a["top"===l?"outerHeight":"outerWidth"](!0)/2,o&&a.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(o?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,a.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&a.hide(),e.effects.restore(a,n),e.effects.removeWrapper(a),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&a()}function a(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var n,r,o,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(n=0;d>n;n++)for(h=g.top+n*y,u=n-(d-1)/2,r=0;c>r;r++)o=g.left+r*v,l=r-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-n*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:o+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:o+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),a=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:a},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,a,n=e(this),r=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"hide"),h="show"===o,l="hide"===o,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(n,r),n.show(),s=e.effects.createWrapper(n).css({overflow:"hidden"}),a=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*a[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?a[0]:u,v[f[1]]=h?a[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),a=["backgroundImage","backgroundColor","opacity"],n=e.effects.setMode(s,t.mode||"show"),r={backgroundColor:s.css("backgroundColor")};"hide"===n&&(r.opacity=0),e.effects.save(s,a),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===n&&s.hide(),e.effects.restore(s,a),i()}})},e.effects.effect.pulsate=function(t,i){var s,a=e(this),n=e.effects.setMode(a,t.mode||"show"),r="show"===n,o="hide"===n,h=r||"hide"===n,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=a.queue(),p=c.length;for((r||!a.is(":visible"))&&(a.css("opacity",0).show(),d=1),s=1;l>s;s++)a.animate({opacity:d},u,t.easing),d=1-d;a.animate({opacity:d},u,t.easing),a.queue(function(){o&&a.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),a.dequeue()},e.effects.effect.shake=function(t,i){var s,a=e(this),n=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"effect"),o=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===o||"down"===o?"top":"left",p="up"===o||"left"===o,f={},m={},g={},v=a.queue(),y=v.length;for(e.effects.save(a,n),a.show(),e.effects.createWrapper(a),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,a.animate(f,d,t.easing),s=1;l>s;s++)a.animate(m,d,t.easing).animate(g,d,t.easing);a.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===r&&a.hide(),e.effects.restore(a,n),e.effects.removeWrapper(a),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),a.dequeue()},e.effects.effect.slide=function(t,i){var s,a=e(this),n=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(a,t.mode||"show"),o="show"===r,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(a,n),a.show(),s=t.distance||a["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(a).css({overflow:"hidden"}),o&&a.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(o?u?"+=":"-=":u?"-=":"+=")+s,a.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&a.hide(),e.effects.restore(a,n),e.effects.removeWrapper(a),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),a=e(t.to),n="fixed"===a.css("position"),r=e("body"),o=n?r.scrollTop():0,h=n?r.scrollLeft():0,l=a.offset(),u={top:l.top-o,left:l.left-h,height:a.innerHeight(),width:a.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-o,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:n?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})}});
(function($)
{"use strict";var MagicSuggest=function(element,options)
{var ms=this;var defaults={allowFreeEntries:true,cls:'',data:null,dataUrlParams:{},disabled:false,displayField:'name',editable:true,emptyText:function(){return cfg.editable?'Type or click here':'Click here';},emptyTextCls:'ms-empty-text',expanded:false,expandOnFocus:function(){return cfg.editable?false:true;},groupBy:null,hideTrigger:false,highlight:true,id:function(){return'ms-ctn-'+$('div[id^="ms-ctn"]').length;},infoMsgCls:'',inputCfg:{},invalidCls:'ms-ctn-invalid',matchCase:false,maxDropHeight:290,maxEntryLength:null,maxEntryRenderer:function(v){return'Please reduce your entry by '+v+' character'+(v>1?'s':'');},maxSuggestions:null,maxSelection:10,maxSelectionRenderer:function(v){return'You cannot choose more than '+v+' item'+(v>1?'s':'');},method:'POST',minChars:0,minCharsRenderer:function(v){return'Please type '+v+' more character'+(v>1?'s':'');},name:null,noSuggestionText:'No suggestions',preselectSingleSuggestion:true,renderer:null,required:false,resultAsString:false,selectionCls:'',selectionPosition:'inner',selectionRenderer:null,selectionStacked:false,sortDir:'asc',sortOrder:null,strictSuggest:false,style:'',toggleOnClick:false,typeDelay:400,useTabKey:false,useCommaKey:true,useZebraStyle:true,value:null,valueField:'id',width:function(){return $(this).width();}};var conf=$.extend({},options);var cfg=$.extend(true,{},defaults,conf);if($.isFunction(cfg.emptyText)){cfg.emptyText=cfg.emptyText.call(this);}
if($.isFunction(cfg.expandOnFocus)){cfg.expandOnFocus=cfg.expandOnFocus.call(this);}
if($.isFunction(cfg.id)){cfg.id=cfg.id.call(this);}
this.addToSelection=function(items,isSilent)
{if(!cfg.maxSelection||_selection.length<cfg.maxSelection){if(!$.isArray(items)){items=[items];}
var valuechanged=false;$.each(items,function(index,json){if($.inArray(json[cfg.valueField],ms.getValue())===-1){_selection.push(json);valuechanged=true;}});if(valuechanged===true){self._renderSelection();this.empty();if(isSilent!==true){$(this).trigger('selectionchange',[this,this.getSelectedItems()]);}}}};this.clear=function(isSilent)
{this.removeFromSelection(_selection.slice(0));};this.collapse=function()
{if(cfg.expanded===true){this.combobox.detach();cfg.expanded=false;$(this).trigger('collapse',[this]);}};this.disable=function()
{this.container.addClass('ms-ctn-disabled');cfg.disabled=true;ms.input.attr('disabled',true);};this.empty=function(){this.input.removeClass(cfg.emptyTextCls);this.input.val('');ms.input.attr('disabled',false);};this.enable=function()
{this.container.removeClass('ms-ctn-disabled');cfg.disabled=false;};this.expand=function()
{if(!cfg.expanded&&(this.input.val().length>=cfg.minChars||this.combobox.children().size()>0)){this.combobox.appendTo(this.container);self._processSuggestions();cfg.expanded=true;$(this).trigger('expand',[this]);}};this.isDisabled=function()
{return cfg.disabled;};this.isValid=function()
{return cfg.required===false||_selection.length>0;};this.getDataUrlParams=function()
{return cfg.dataUrlParams;};this.getName=function()
{return cfg.name;};this.getSelectedItems=function()
{return _selection;};this.getRawValue=function(){return ms.input.val()!==cfg.emptyText?ms.input.val():'';};this.getValue=function()
{return $.map(_selection,function(o){return o[cfg.valueField];});};this.removeFromSelection=function(items,isSilent)
{if(!$.isArray(items)){items=[items];}
var valuechanged=false;$.each(items,function(index,json){var i=$.inArray(json[cfg.valueField],ms.getValue());if(i>-1){_selection.splice(i,1);valuechanged=true;}});if(valuechanged===true){self._renderSelection();if(isSilent!==true){$(this).trigger('selectionchange',[this,this.getSelectedItems()]);}
if(cfg.expandOnFocus){ms.expand();}
if(cfg.expanded){self._processSuggestions();}}};this.setData=function(data){cfg.data=data;self._processSuggestions();};this.setName=function(name){cfg.name=name;if(ms._valueContainer){ms._valueContainer.name=name;}};this.setValue=function(data)
{var values=data,items=[];if(!$.isArray(data)){if(typeof(data)==='string'){if(data.indexOf('[')>-1){values=eval(data);}else if(data.indexOf(',')>-1){values=data.split(',');}}else{values=[data];}}
$.each(_cbData,function(index,obj){if($.inArray(obj[cfg.valueField],values)>-1){items.push(obj);}});if(items.length>0){this.addToSelection(items);}};this.setDataUrlParams=function(params)
{cfg.dataUrlParams=$.extend({},params);};var _selection=[],_comboItemHeight=0,_timer,_hasFocus=false,_groups=null,_cbData=[],_ctrlDown=false;var self={_displaySuggestions:function(data){ms.combobox.empty();var resHeight=0,nbGroups=0;if(_groups===null){self._renderComboItems(data);resHeight=_comboItemHeight*data.length;}
else{for(var grpName in _groups){nbGroups+=1;$('<div/>',{'class':'ms-res-group',html:grpName}).appendTo(ms.combobox);self._renderComboItems(_groups[grpName].items,true);}
resHeight=_comboItemHeight*(data.length+nbGroups);}
if(resHeight<ms.combobox.height()||resHeight<=cfg.maxDropHeight){ms.combobox.height(resHeight);}
else if(resHeight>=ms.combobox.height()&&resHeight>cfg.maxDropHeight){ms.combobox.height(cfg.maxDropHeight);}
if(data.length===1&&cfg.preselectSingleSuggestion===true){ms.combobox.children().filter(':last').addClass('ms-res-item-active');}
if(data.length===0&&ms.getRawValue()!==""){self._updateHelper(cfg.noSuggestionText);ms.collapse();}},_getEntriesFromStringArray:function(data){var json=[];$.each(data,function(index,s){var entry={};entry[cfg.displayField]=entry[cfg.valueField]=$.trim(s);json.push(entry);});return json;},_highlightSuggestion:function(html){var q=ms.input.val()!==cfg.emptyText?ms.input.val():'';if(q.length===0){return html;}
if(cfg.matchCase===true){html=html.replace(new RegExp('('+q+')(?!([^<]+)?>)','g'),'<em>$1</em>');}
else{html=html.replace(new RegExp('('+q+')(?!([^<]+)?>)','gi'),'<em>$1</em>');}
return html;},_moveSelectedRow:function(dir){if(!cfg.expanded){ms.expand();}
var list,start,active,scrollPos;list=ms.combobox.find(".ms-res-item");if(dir==='down'){start=list.eq(0);}
else{start=list.filter(':last');}
active=ms.combobox.find('.ms-res-item-active:first');if(active.length>0){if(dir==='down'){start=active.nextAll('.ms-res-item').first();if(start.length===0){start=list.eq(0);}
scrollPos=ms.combobox.scrollTop();ms.combobox.scrollTop(0);if(start[0].offsetTop+start.outerHeight()>ms.combobox.height()){ms.combobox.scrollTop(scrollPos+_comboItemHeight);}}
else{start=active.prevAll('.ms-res-item').first();if(start.length===0){start=list.filter(':last');ms.combobox.scrollTop(_comboItemHeight*list.length);}
if(start[0].offsetTop<ms.combobox.scrollTop()){ms.combobox.scrollTop(ms.combobox.scrollTop()-_comboItemHeight);}}}
list.removeClass("ms-res-item-active");start.addClass("ms-res-item-active");},_processSuggestions:function(source){var json=null,data=source||cfg.data;if(data!==null){if(typeof(data)==='function'){data=data.call(ms);}
if(typeof(data)==='string'&&data.indexOf(',')<0){$(ms).trigger('beforeload',[ms]);var params=$.extend({query:ms.input.val()},cfg.dataUrlParams);$.ajax({type:cfg.method,url:data,data:params,success:function(asyncData){json=JSON.parse(asyncData);self._processSuggestions(json);$(ms).trigger('load',[ms,json]);},error:function(){throw("Could not reach server");}});return;}else if(typeof(data)==='string'&&data.indexOf(',')>-1){_cbData=self._getEntriesFromStringArray(data.split(','));}else{if(data.length>0&&typeof(data[0])==='string'){_cbData=self._getEntriesFromStringArray(data);}else{_cbData=data.results||data;}}
self._displaySuggestions(self._sortAndTrim(_cbData));}},_render:function(el){$(ms).trigger('beforerender',[ms]);var w=$.isFunction(cfg.width)?cfg.width.call(el):cfg.width;ms.container=$('<div/>',{id:cfg.id,'class':'ms-ctn '+cfg.cls+
(cfg.disabled===true?' ms-ctn-disabled':'')+
(cfg.editable===true?'':' ms-ctn-readonly'),style:cfg.style}).width(w);ms.container.focus($.proxy(handlers._onFocus,this));ms.container.blur($.proxy(handlers._onBlur,this));ms.container.keydown($.proxy(handlers._onKeyDown,this));ms.container.keyup($.proxy(handlers._onKeyUp,this));ms.input=$('<input/>',$.extend({id:'ms-input-'+$('input[id^="ms-input"]').length,type:'text','class':cfg.emptyTextCls+(cfg.editable===true?'':' ms-input-readonly'),value:cfg.emptyText,readonly:!cfg.editable,disabled:cfg.disabled},cfg.inputCfg)).width(w-(cfg.hideTrigger?16:42));ms.input.focus($.proxy(handlers._onInputFocus,this));ms.input.click($.proxy(handlers._onInputClick,this));if(cfg.hideTrigger===false){ms.trigger=$('<div/>',{id:'ms-trigger-'+$('div[id^="ms-trigger"]').length,'class':'ms-trigger',html:'<div class="ms-trigger-ico"></div>'});ms.trigger.click($.proxy(handlers._onTriggerClick,this));ms.container.append(ms.trigger);}
ms.combobox=$('<div/>',{id:'ms-res-ctn-'+$('div[id^="ms-res-ctn"]').length,'class':'ms-res-ctn '}).width(w).height(cfg.maxDropHeight);ms.combobox.on('click','div.ms-res-item',$.proxy(handlers._onComboItemSelected,this));ms.combobox.on('mouseover','div.ms-res-item',$.proxy(handlers._onComboItemMouseOver,this));ms.selectionContainer=$('<div/>',{id:'ms-sel-ctn-'+$('div[id^="ms-sel-ctn"]').length,'class':'ms-sel-ctn'});ms.selectionContainer.click($.proxy(handlers._onFocus,this));if(cfg.selectionPosition==='inner'){ms.selectionContainer.append(ms.input);}
else{ms.container.append(ms.input);}
ms.helper=$('<div/>',{'class':'ms-helper '+cfg.infoMsgCls});self._updateHelper();ms.container.append(ms.helper);$(el).replaceWith(ms.container);switch(cfg.selectionPosition){case'bottom':ms.selectionContainer.insertAfter(ms.container);if(cfg.selectionStacked===true){ms.selectionContainer.width(ms.container.width());ms.selectionContainer.addClass('ms-stacked');}
break;case'right':ms.selectionContainer.insertAfter(ms.container);ms.container.css('float','left');break;default:ms.container.append(ms.selectionContainer);break;}
self._processSuggestions();if(cfg.value!==null){ms.setValue(cfg.value);self._renderSelection();}
$(ms).trigger('afterrender',[ms]);$("body").click(function(e){if(ms.container.hasClass('ms-ctn-bootstrap-focus')&&ms.container.has(e.target).length===0&&e.target.className.indexOf('ms-res-item')<0&&e.target.className.indexOf('ms-close-btn')<0&&ms.container[0]!==e.target){handlers._onBlur();}});if(cfg.expanded===true){cfg.expanded=false;ms.expand();}},_renderComboItems:function(items,isGrouped){var ref=this,html='';$.each(items,function(index,value){var displayed=cfg.renderer!==null?cfg.renderer.call(ref,value):value[cfg.displayField];var resultItemEl=$('<div/>',{'class':'ms-res-item '+(isGrouped?'ms-res-item-grouped ':'')+
(index%2===1&&cfg.useZebraStyle===true?'ms-res-odd':''),html:cfg.highlight===true?self._highlightSuggestion(displayed):displayed,'data-json':JSON.stringify(value)});resultItemEl.click($.proxy(handlers._onComboItemSelected,ref));resultItemEl.mouseover($.proxy(handlers._onComboItemMouseOver,ref));html+=$('<div/>').append(resultItemEl).html();});ms.combobox.html(html);_comboItemHeight=ms.combobox.find('.ms-res-item:first').outerHeight();},_renderSelection:function(){var ref=this,w=0,inputOffset=0,items=[],asText=cfg.resultAsString===true&&!_hasFocus;ms.selectionContainer.find('.ms-sel-item').remove();if(ms._valueContainer!==undefined){ms._valueContainer.remove();}
$.each(_selection,function(index,value){var selectedItemEl,delItemEl,selectedItemHtml=cfg.selectionRenderer!==null?cfg.selectionRenderer.call(ref,value):value[cfg.displayField];if(asText===true){selectedItemEl=$('<div/>',{'class':'ms-sel-item ms-sel-text '+cfg.selectionCls,html:selectedItemHtml+(index===(_selection.length-1)?'':',')}).data('json',value);}
else{selectedItemEl=$('<div/>',{'class':'ms-sel-item '+cfg.selectionCls,html:selectedItemHtml}).data('json',value);if(cfg.disabled===false){delItemEl=$('<span/>',{'class':'ms-close-btn'}).data('json',value).appendTo(selectedItemEl);delItemEl.click($.proxy(handlers._onTagTriggerClick,ref));}}
items.push(selectedItemEl);});ms.selectionContainer.prepend(items);ms._valueContainer=$('<input/>',{type:'hidden',name:cfg.name,value:JSON.stringify(ms.getValue())});ms._valueContainer.appendTo(ms.selectionContainer);if(cfg.selectionPosition==='inner'){ms.input.width(0);inputOffset=ms.input.offset().left-ms.selectionContainer.offset().left;w=ms.container.width()-inputOffset-(cfg.hideTrigger===true?16:42);ms.input.width(w);ms.container.height(ms.selectionContainer.height());}
if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}else{ms.helper.hide();}},_selectItem:function(item){if(cfg.maxSelection===1){_selection=[];}
ms.addToSelection(item.data('json'));item.removeClass('ms-res-item-active');if(cfg.expandOnFocus===false||_selection.length===cfg.maxSelection){ms.collapse();}
if(!_hasFocus){ms.input.focus();}else if(_hasFocus&&(cfg.expandOnFocus||_ctrlDown)){self._processSuggestions();if(_ctrlDown){ms.expand();}}},_sortAndTrim:function(data){var q=ms.getRawValue(),filtered=[],newSuggestions=[],selectedValues=ms.getValue();if(q.length>0){$.each(data,function(index,obj){var name=obj[cfg.displayField];if((cfg.matchCase===true&&name.indexOf(q)>-1)||(cfg.matchCase===false&&name.toLowerCase().indexOf(q.toLowerCase())>-1)){if(cfg.strictSuggest===false||name.toLowerCase().indexOf(q.toLowerCase())===0){filtered.push(obj);}}});}
else{filtered=data;}
$.each(filtered,function(index,obj){if($.inArray(obj[cfg.valueField],selectedValues)===-1){newSuggestions.push(obj);}});if(cfg.sortOrder!==null){newSuggestions.sort(function(a,b){if(a[cfg.sortOrder]<b[cfg.sortOrder]){return cfg.sortDir==='asc'?-1:1;}
if(a[cfg.sortOrder]>b[cfg.sortOrder]){return cfg.sortDir==='asc'?1:-1;}
return 0;});}
if(cfg.maxSuggestions&&cfg.maxSuggestions>0){newSuggestions=newSuggestions.slice(0,cfg.maxSuggestions);}
if(cfg.groupBy!==null){_groups={};$.each(newSuggestions,function(index,value){if(_groups[value[cfg.groupBy]]===undefined){_groups[value[cfg.groupBy]]={title:value[cfg.groupBy],items:[value]};}
else{_groups[value[cfg.groupBy]].items.push(value);}});}
return newSuggestions;},_updateHelper:function(html){ms.helper.html(html);if(!ms.helper.is(":visible")){ms.helper.fadeIn();}}};var handlers={_onBlur:function(){ms.container.removeClass('ms-ctn-bootstrap-focus');ms.collapse();_hasFocus=false;if(ms.getRawValue()!==''&&cfg.allowFreeEntries===true){var obj={};obj[cfg.displayField]=obj[cfg.valueField]=ms.getRawValue();ms.addToSelection(obj);}
self._renderSelection();if(ms.isValid()===false){ms.container.addClass('ms-ctn-invalid');}
if(ms.input.val()===''&&_selection.length===0){ms.input.addClass(cfg.emptyTextCls);ms.input.val(cfg.emptyText);}
else if(ms.input.val()!==''&&cfg.allowFreeEntries===false){ms.empty();self._updateHelper('');}
if(ms.input.is(":focus")){$(ms).trigger('blur',[ms]);}},_onComboItemMouseOver:function(e){ms.combobox.children().removeClass('ms-res-item-active');$(e.currentTarget).addClass('ms-res-item-active');},_onComboItemSelected:function(e){self._selectItem($(e.currentTarget));},_onFocus:function(){ms.input.focus();},_onInputClick:function(){if(ms.isDisabled()===false&&_hasFocus){if(cfg.toggleOnClick===true){if(cfg.expanded){ms.collapse();}else{ms.expand();}}}},_onInputFocus:function(){if(ms.isDisabled()===false&&!_hasFocus){_hasFocus=true;ms.container.addClass('ms-ctn-bootstrap-focus');ms.container.removeClass(cfg.invalidCls);if(ms.input.val()===cfg.emptyText){ms.empty();}
var curLength=ms.getRawValue().length;if(cfg.expandOnFocus===true){ms.expand();}
if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}else if(curLength<cfg.minChars){self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-curLength));}
self._renderSelection();$(ms).trigger('focus',[ms]);}},_onKeyDown:function(e){var active=ms.combobox.find('.ms-res-item-active:first'),freeInput=ms.input.val()!==cfg.emptyText?ms.input.val():'';$(ms).trigger('keydown',[ms,e]);if(e.keyCode===9&&(cfg.useTabKey===false||(cfg.useTabKey===true&&active.length===0&&ms.input.val().length===0))){handlers._onBlur();return;}
switch(e.keyCode){case 8:if(freeInput.length===0&&ms.getSelectedItems().length>0&&cfg.selectionPosition==='inner'){_selection.pop();self._renderSelection();$(ms).trigger('selectionchange',[ms,ms.getSelectedItems()]);ms.input.focus();e.preventDefault();}
break;case 9:case 27:case 13:e.preventDefault();break;case 17:_ctrlDown=true;break;case 40:e.preventDefault();self._moveSelectedRow("down");break;case 38:e.preventDefault();self._moveSelectedRow("up");break;default:if(_selection.length===cfg.maxSelection){e.preventDefault();}
break;}},_onKeyUp:function(e){var freeInput=ms.getRawValue(),inputValid=$.trim(ms.input.val()).length>0&&ms.input.val()!==cfg.emptyText&&(!cfg.maxEntryLength||$.trim(ms.input.val()).length<=cfg.maxEntryLength),selected,obj={};$(ms).trigger('keyup',[ms,e]);clearTimeout(_timer);if(e.keyCode===27&&cfg.expanded){ms.combobox.height(0);}
if((e.keyCode===9&&cfg.useTabKey===false)||(e.keyCode>13&&e.keyCode<32)){if(e.keyCode===17){_ctrlDown=false;}
return;}
switch(e.keyCode){case 40:case 38:e.preventDefault();break;case 13:case 9:case 188:if(e.keyCode!==188||cfg.useCommaKey===true){e.preventDefault();if(cfg.expanded===true){selected=ms.combobox.find('.ms-res-item-active:first');if(selected.length>0){self._selectItem(selected);return;}}
if(inputValid===true&&cfg.allowFreeEntries===true){obj[cfg.displayField]=obj[cfg.valueField]=freeInput;ms.addToSelection(obj);ms.collapse();ms.input.focus();}
break;}
default:if(_selection.length===cfg.maxSelection){self._updateHelper(cfg.maxSelectionRenderer.call(this,_selection.length));}
else{if(freeInput.length<cfg.minChars){self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-freeInput.length));if(cfg.expanded===true){ms.collapse();}}
else if(cfg.maxEntryLength&&freeInput.length>cfg.maxEntryLength){self._updateHelper(cfg.maxEntryRenderer.call(this,freeInput.length-cfg.maxEntryLength));if(cfg.expanded===true){ms.collapse();}}
else{ms.helper.hide();if(cfg.minChars<=freeInput.length){_timer=setTimeout(function(){if(cfg.expanded===true){self._processSuggestions();}else{ms.expand();}},cfg.typeDelay);}}}
break;}},_onTagTriggerClick:function(e){ms.removeFromSelection($(e.currentTarget).data('json'));},_onTriggerClick:function(){if(ms.isDisabled()===false&&!(cfg.expandOnFocus===true&&_selection.length===cfg.maxSelection)){$(ms).trigger('triggerclick',[ms]);if(cfg.expanded===true){ms.collapse();}else{var curLength=ms.getRawValue().length;if(curLength>=cfg.minChars){ms.input.focus();ms.expand();}else{self._updateHelper(cfg.minCharsRenderer.call(this,cfg.minChars-curLength));}}}}};if(element!==null){self._render(element);}};$.fn.magicSuggest=function(options){var obj=$(this);if(obj.size()===1&&obj.data('magicSuggest')){return obj.data('magicSuggest');}
obj.each(function(i){var cntr=$(this);if(cntr.data('magicSuggest')){return;}
if(this.nodeName.toLowerCase()==='select'){options.data=[];options.value=[];$.each(this.children,function(index,child){if(child.nodeName&&child.nodeName.toLowerCase()==='option'){options.data.push({id:child.value,name:child.text});if(child.selected){options.value.push(child.value);}}});}
var def={};$.each(this.attributes,function(i,att){def[att.name]=att.value;});var field=new MagicSuggest(this,$.extend(options,def));cntr.data('magicSuggest',field);field.container.data('magicSuggest',field);});if(obj.size()===1){return obj.data('magicSuggest');}
return obj;};})(jQuery);
$(function(){if(screen.width<1000){$.cookie("mobile",1);}else{$.cookie("mobile",null);}});
var hostname=window.location.hostname;var SITE='zakupka.com';var CURRENCY='грн';var OURS_SITES='zakupka.com|satom.ru|tomas.by|tomas.kz';var COLLAPSE_WIDTH=760;var zkTrackServicesConstants=zkTrackServicesConstants||{ga:{},ym:{serviceObject:[]}};var portals=['zakupka','satom','tomasby','tomaskz'];for(var n=1;n<=10;n++){for(var i in portals){var r=new RegExp(portals[i]+'\.p'+n,'i');if((r).test(hostname)){SITE=portals[i]+'.p'+n;}}}
if((/tomas\.by/i).test(hostname)){SITE='tomas.by';}else if((/tomas\.kz/i).test(hostname)){SITE='tomas.kz';}else if((/satom.ru/i).test(hostname)){SITE='satom.ru';}else if((/stroyspravka\.com/i).test(hostname)){SITE='stroyspravka.com';}else if(m=hostname.match(/tomaskz\.t\d/i)){SITE=m[0];}else if(m=hostname.match(/tomasby\.t\d/i)){SITE=m[0];}else if(m=hostname.match(/satom\.t\d/i)){SITE=m[0];}else if(m=hostname.match(/zakupka\.t\d/i)){SITE=m[0];}else if(m=hostname.match(/zakupka\.p\d/i)){SITE=m[0];}
if(typeof(SITE_PHP)!='undefined'&&SITE_PHP!=''){SITE=SITE_PHP;}
if((/satom/i).test(SITE)){CURRENCY='руб';}
if((/tomas\.?by/i).test(SITE)){CURRENCY='руб';}
if((/tomas\.?kz/i).test(SITE)){CURRENCY='тг';}
$(function(){if(!$('.b-image-tracker').length){var downloadImage=new Image();downloadImage.src='//'+SITE+"/track-image/";}});var env={data:{},checkPath:function(path,val){if(typeof(val)=='undefined'){val={};}
if(typeof(path)=='string'&&path!=''){var paths=path.split('.');env._addToItem(env.data,paths,val);return true;}
return false;},_addToItem:function(obj,paths,val){var itemP=paths[0];obj[itemP]=obj[itemP]||{};paths.shift();if(paths.length>0){return env._addToItem(obj[itemP],paths,val);}
if(typeof(obj[itemP])=='object'&&Object.keys(obj[itemP]).length==0){obj[itemP]=val;}
return obj;},getByPath:function(path,defaultVal){var paths=path.split(".");if(!env.checkPath(path,defaultVal)){return defaultVal;}
return env._getBypaths(env.data,paths,defaultVal);},_getBypaths:function(obj,paths,defaultVal){var itemP=paths[0];paths.shift();if(typeof(obj[itemP])=='undefined'){return defaultVal;}
if(paths.length>0){return env._getBypaths(obj[itemP],paths,defaultVal);}
return(typeof(obj[itemP])!='undefined')?obj[itemP]:defaultVal;},setDataByPath:function(path,data){if(typeof(path)!='string'||typeof(data)=='undefined'||!env.checkPath(path,data)){return false;}
var tempFunct=function(v){return false;};eval('tempFunct = function(v){ env.data.'+path+' = v; return true; }');return tempFunct(data);}};var er_b='<span class="sprite p_error_icon"></span><span class="p_error">';var er_e='</span>';(function($){$.fn.serializeJSON=function(){var json={};jQuery.map($(this).serializeArray(),function(n,i){json[n['name']]=n['value'];});return json;};})(jQuery);function highlightErrorField(id,elem){var field=elem?$(elem):$('#'+id);field.addClass('extpp_error b-form__input_style_error').one('focus',function(){$(this).removeClass('extpp_error b-form__input_style_error');if(!elem){$('#error_'+id).hide();}});var tab=field.parents('.zk-tabs-content-item').attr('tab');if(tab!==undefined){$('li[tab="'+tab+'"] a').click();window.location.hash=tab;}
$('input[name="'+id+'"]').one('focus',function(){$(this).removeClass('extpp_error b-form__input_style_error');$('#error_'+id).hide();});$('#ZKBalloon').fadeOut(300);}
function wrap_error(text){return er_b+text+er_e;}
function show_error(selector,msg){$(selector).html(wrap_error(msg)).show(0);}
function show_error_check_checkbox(selector){show_error(selector,'Необходимо заполнить поле');}
function show_error_field_empty(selector){show_error(selector,'Необходимо ввести значение');}
function print_message(text,type,selector){$(selector).html('<span class="message_'+type+'">'+text+'</span>').show();return true;}
function print_big_message(text,type,selector,nostrong){var body='<strong>'+text+'</strong>';if(nostrong){body=text;}
$(selector).html('<div class="big_report_block_'+type+'"><span class="ico"></span>'+body+'</div>').show();return true;}
function arrange_punctuation_marks(str){return str.replace(/[\,\.\:\;\!\?\)]{1}[a-zа-яё]|[a-zа-яё]+[\(]/gi,function(args){args=args.replace(/([\,\.\:\;\!\?\)])/gi,'$1 ',args);return args.replace(/([\(])/gi,' $1');});}
function scroll_to_error(fieldname){if($("#"+fieldname).parents(".no-scroll").length==0){if($('#'+fieldname+':visible').length==0&&$("#"+fieldname).parents('.zk-tabs-content-item').length>0){var tab=$("#"+fieldname).parents('.zk-tabs-content-item:first').attr("tab");var tabLink=$('li[tab="'+tab+'"] > a');if(tabLink.length>0){tabLink.click();}}
$.scrollTo($("#"+fieldname).parents(".extpp_row"),800,{offset:{top:-50}});}}
function check_field_is_empty(fieldname,error,min_length,required,show_error){if(!required&&$("#"+fieldname).length==0){return true;}
var show_error=typeof show_error=='undefined'?true:false;var fld_value=$.trim($("#"+fieldname).val());if(fld_value==''){if(show_error){show_error_field_empty("#error_"+fieldname);highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}}
return false;}else{min_length=(typeof min_length=='undefined')?0:parseInt(min_length);if(min_length>0&&fld_value.length<min_length){$("#error_"+fieldname).html(wrap_error('Минимальная длина текста для поля - '+min_length)).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}}
function check_field_is_required(fieldname,error,min_length){return check_field_is_empty(fieldname,error,min_length,true);}
function field_trigger_error(fieldname,error,msg,isFieldInFrame){msg=msg?msg:'Неверно заполнено поле';$("#error_"+fieldname).html(wrap_error(msg)).show();highlightErrorField(fieldname);if(error!=1){if(isFieldInFrame){fieldname='error_'+fieldname;}
scroll_to_error(fieldname);}
return false;}
function check_file_is_empty(fieldname,error){if($.trim($("."+fieldname).val())==''){$("#error_"+fieldname).html(wrap_error('Необходимо выбрать файл')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_select_is_empty(fieldname,error){var select_value=$("#"+fieldname+' :selected').val();if(select_value==undefined||select_value==''||select_value=='0'){$("#error_"+fieldname).html(wrap_error('Необходимо выбрать значение')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_checkbox_is_empty(fieldname,error){if($("#"+fieldname+" li input[type='checkbox']").filter(':checked').size()==0){$("#error_"+fieldname).html(wrap_error('Необходимо заполнить поле')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_radio_is_checked(fieldname,error,msg){if($("input[name='"+fieldname+"']:checked").length==0){highlightErrorField(fieldname);$("#error_"+fieldname).html(wrap_error(msg||'Необходимо выбрать значение')).show();if(error!=1){scroll_to_error("error_"+fieldname);}
return false;}else{return true;}}
function check_privacy_checkbox_is_checked(fieldname,error){return check_radio_is_checked(fieldname,error,'Необходимо согласиться с условиями');}
function check_field_overflow(fieldname,maxlength,error){var str=$("#"+fieldname).val();if(!str){return true;}
if(typeof tinyMCE!='undefined'&&tinyMCE.get(fieldname)){str=$(tinyMCE.get(fieldname).getContent({format:'raw'})).text();}
var dif=maxlength-str.length;if(dif<0){highlightErrorField(fieldname);$("#error_"+fieldname).html(wrap_error('Превышено максимально допустимое количество символов на '+(dif*-1)+'.')).show();if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_field_length(event){var maxlength=event.data.maxlength;var fieldname=event.data.fieldname;var content='';var dif=maxlength;if(typeof tinyMCE!='undefined'&&tinyMCE.get(fieldname)&&tinyMCE.get(fieldname).serializer!=null){content=$(tinyMCE.get(fieldname).getContent({format:'raw'})).text();dif=dif-content.length;}else{dif=dif-$('#'+fieldname).val().length;}
if(dif<0){$("#error_"+fieldname).html(wrap_error('Превышено максимально допустимое количество символов на '+(dif*-1)+'.')).show();highlightErrorField(fieldname);}else{$(this).removeClass('extpp_error b-form__input_style_error');if(typeof tinyMCE!='undefined'&&tinyMCE.get(fieldname)&&tinyMCE.get(fieldname).serializer!=null){$("#error_"+fieldname).html("<div style='text-align:right;margin-top:5px;'>Символов: "+content.length+"</div>").show();}else{$("#error_"+fieldname).html("").hide(0);}}}
function check_capslock(fieldname,error){var str=$("#"+fieldname).val().replace(/["|'|«|“][^"|'|«|»]*["|'|»|”]/g,'');var allowed_length=Math.ceil(str.length/2);var patt=new RegExp("[A-ZА-ЯЁҐЄЇІ]{"+allowed_length+",}");if((patt).test(str)){$("#error_"+fieldname).html(wrap_error('Пожалуйста, используйте заглавные буквы только для сокращений.')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_mail(mail){mail=$.trim(mail);return(/^(([єЄїЇіІґҐёЁа-яА-Яa-zA-Z0-9]|[!#$%\*\/\?\|^\{\}`~&'\+=_-])+\.)*([єЄїЇіІґҐёЁа-яА-Яa-zA-Z0-9]|[!#$%\*\/\?\|^\{\}`~&'\+=_-])+@([єЄїЇіІґҐёЁа-яА-Яa-zA-Z0-9-]+\.)+[єЄїЇіІґҐёЁа-яА-Яa-zA-Z0-9-]+$/i).test(mail);}
function check_field_mail(fieldname,error){var mail=$("#"+fieldname).val();if(check_mail(mail)===false){$("#error_"+fieldname).html(wrap_error('E-mail введен неверно')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_field_pass(fieldname,error){if(!(/^([a-z0-9\!\@\#\$\%\^\&\*\(\)\-\_\+\=\;\:\,\.\/\?\\\|\`\~\[\]\{\}]{3,})$/i).test($("#"+fieldname).val())){$("#error_"+fieldname).html(wrap_error('Только цифры и латинские буквы, без пробелов')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_site(site){return(/^(https?:\/\/)?(([єїіґёа-я0-9a-z_!~*().&=+$%\-]+:)?[0-9a-z_!~*().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([єїіґёа-я0-9a-z_!~*()-]+\.)*([єїіґёа-я0-9a-z][єїіґёа-я0-9a-z-]{0,61})*[єїіґёа-я0-9a-z]\.[єїіґёа-яa-z0-9-]{2,20})(:[0-9]{1,4})?((\/?)|(\/[єїіґёа-я0-9a-z_!~*().;?:@&=+$,%#-]+)+\/?)$/i).test($.trim(site));}
function check_field_site(fieldname,error){var site=$("#"+fieldname).val();if(!check_site(site)){$("#error_"+fieldname).html(wrap_error('Адрес введен неверно')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_is_internal_link(fieldname,error,domain){var link=$("#"+fieldname).val();var punycode_domain=domain.replace(/^(https?:\/\/)?([^\/]+)(\/.*)?$/gi,function(m,scheme,domain,url){return(scheme?scheme:'')+punycode.encode(domain)+(url?url:'');});var reg=OURS_SITES+'|'+(domain.length>0?SITE+'|'+domain:SITE)+'|'+(punycode_domain.length>0?SITE+'|'+punycode_domain:SITE);var reg_go='\/go\/zk_go_';var issetGo=(new RegExp(reg_go,'gi')).test(link);if(!(new RegExp(reg,'gi')).test(link)||issetGo){var msg=issetGo?'Ссылки с использованием &laquo;/go/&raquo;':'Ссылки на внешние ресурсы';$("#error_"+fieldname).html(wrap_error(msg+' не допускаются')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_is_go_link(fieldname,error){var link=$("#"+fieldname).val();if((new RegExp('\/go\/zk_go_','gi')).test(link)){$("#error_"+fieldname).html(wrap_error('Ссылки с использованием &laquo;/go/&raquo; не допускаются')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_is_link_in_domain(fieldname,error,domain){var link=$("#"+fieldname).val();var punycode_domain=domain.replace(/^(https?:\/\/)?([^\/]+)(\/.*)?$/gi,function(m,scheme,domain,url){return(scheme?scheme:'')+punycode.encode(domain)+(url?url:'');});var reg=OURS_SITES+'|'+(domain.length>0?domain:SITE)+'|'+(punycode_domain.length>0?punycode_domain:SITE);if(!(new RegExp(reg,'gi')).test(link)){$("#error_"+fieldname).html(wrap_error('Ссылки на внешние ресурсы не допускаются')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_is_link(fieldname,error){var link=$("#"+fieldname).val();if(!/^(https?:\/\/)?[a-zа-яёъ0-9_\-]+\..+$/gi.test(link)){$("#error_"+fieldname).html(wrap_error('Введите корректную ссылку.')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_is_http_link(fieldname,error){var link=$("#"+fieldname).val();if(!/^https?:\/\/([^@./]+\.)+[^/]+/gi.test(link)){$("#error_"+fieldname).html(wrap_error('Введите корректную ссылку.')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function extract_all_urls(text){var re=/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,4}(\/\S*)?/ig;var matches=$(text).find('[href]');var hrefs=[];$.each(matches,function(i,el){hrefs.push($(el).attr('href'));});matches=text.match(re);if(matches){$.each(matches,function(i,el){hrefs.push(el);});}
return $.grep(hrefs,function(v,k){return $.inArray(v,hrefs)===k;});}
function check_has_external_link(fieldname,error,domain){var punycode_domain=domain.replace(/^(https?:\/\/)?([^\/]+)(\/.*)?$/gi,function(m,scheme,domain,url){return(scheme?scheme:'')+punycode.encode(domain)+(url?url:'');});var text=$("#"+fieldname).val();var urls=extract_all_urls(text);var reg=new RegExp(OURS_SITES+'|'+(domain.length>0?domain:SITE)+'|'+(punycode_domain.length>0?punycode_domain:SITE),'i');for(var i in urls){var el=urls[i];if(!reg.test(el)){$("#error_"+fieldname).html(wrap_error('Ссылки на внешние ресурсы не допускаются')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return true;}}
return false;}
function check_field_text(fieldname,text,error){if($("#"+fieldname).val()==text){highlightErrorField(fieldname);$("#error_"+fieldname).html(wrap_error('Необходимо заполнить поле')).show();if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_postcode(fieldname,length,error){var postcode=$("#"+fieldname).val();var error=false;if(length==0){if(!(/^\d{2,10}$/).test(postcode)){error=true}}else{var regexp=new RegExp('^\\d{'+length+'}$','gi');console.log(regexp);if(!regexp.test(postcode)){error=true}}
if(error){$("#error_"+fieldname).html(wrap_error('Неверно задан почтовый индекс')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_correct_date(fieldname,format,error){var dateS=$("#"+fieldname).val();if(dateS.match(format)===null){$("#error_"+fieldname).html(wrap_error('Неверно задана дата')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_date_period(startDateFieldName,endDateFieldName,error){var format=/(\d+)\.(\d+).(\d+)/;var startDate=Date.parse($('#'+startDateFieldName).val().replace(format,"$2/$1/$3"));if(isNaN(startDate)){return field_trigger_error(startDateFieldName,error,'Неверно задана дата');}
var endDate=Date.parse($('#'+endDateFieldName).val().replace(format,"$2/$1/$3"));if(isNaN(endDate)){return field_trigger_error(endDateFieldName,error,'Неверно задана дата');}
if(endDate<startDate){return field_trigger_error(endDateFieldName,error,'Дата окончания не должна быть меньше даты начала');}
return true;}
function check_field_is_number(fieldname,error,positive,message){if($('#'+fieldname).length==0){return true;}
var number=$('#'+fieldname).val();number=number.replace(/\s/gi,'').replace(/,/gi,'.');var pattern='';if(positive){pattern=/^\d+([\.,]\d{1,2})?$/;}else{pattern=/^-?\d+([\.,]\d{1,2})?$/;}
if(!(pattern).test(number)){message=message||'Неверно задано значение';$("#error_"+fieldname).html(wrap_error(message)).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_number_by_selector(selector,error,positive){if($(selector).length==0){return true;}
var number=$(selector).val();number=number.replace(/\s/gi,'').replace(/,/gi,'.');var pattern='';if(positive){pattern=/^\d+([\.,]\d{1,2})?$/;}else{pattern=/^-?\d+([\.,]\d{1,2})?$/;}
if(!(pattern).test(number)){var id=$(selector+' + .p_error_block').attr('id');$(selector+' + .p_error_block').html(wrap_error('Неверно задано значение')).show();highlightErrorField(id);if(error!=1){scroll_to_error(id);}
return false;}
return true;}
function check_field_is_number_no_show(fieldname,positive,onlyMoreNul){positive=(typeof positive!='undefined')?positive:0;onlyMoreNul=(typeof onlyMoreNul!='undefined')?onlyMoreNul:0;var $field=$('#'+fieldname);if($field.length==0){return true;}
var number=$field.val();number=number.replace(/\s/gi,'').replace(/,/gi,'.');var pattern='';if(positive){pattern=/^\d+([\.,]\d{1,})?$/;}else{pattern=/^-?\d+([\.,]\d{1,})?$/;}
if(!(pattern).test(number)){return false;}else if(onlyMoreNul&&parseFloat(number)<=0){return false;}else{return true;}}
function check_field_is_digit(fieldname,error,required){if(!required&&$.trim($("#"+fieldname).val())==''){return true;}
var number=$('#'+fieldname).val();number=number.replace(/\s/gi,'');var pattern=/\d$/;if(!(pattern).test(number)){$("#error_"+fieldname).html(wrap_error('Неверно задано значение. Допускаются только цифры.')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_greater_than(fieldname,error,number2){var number=parseFloat($('#'+fieldname).val().replace(/,/gi,'.'));if(number<=number2){$("#error_"+fieldname).html(wrap_error('Значение должно быть больше '+number2)).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_less_or_equal_than(fieldname,error,number2){var number=parseFloat($('#'+fieldname).val().replace(/,/gi,'.'));if(number>number2){$("#error_"+fieldname).html(wrap_error('Значение должно быть меньше или равно '+number2)).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_correct_phone_note(fieldname,error){var phoneParts=$("#"+fieldname).val().split('-');var note=phoneParts[3];if(typeof(note)!='undefined'&&!note.search(/^(^[\s|\d|\(|\+|_|)|\[|\]|\}}\{|\.|\\|\/])/)){$("#error_"+fieldname).html(wrap_error('В примечание нельзя добавлять телефон')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_wrong_phone(fieldname,minlen,maxlen,error){var phoneParts=$("#"+fieldname).val().split('-');var mainPhone=phoneParts[0]+''+phoneParts[1];if((phoneParts.join('')!=''&&(mainPhone.length<minlen||mainPhone.length>maxlen))||(phoneParts.join('')!=''&&phoneParts[1].length<4)||(phoneParts.join('')!=''&&phoneParts[0].length<2)){$("#error_"+fieldname).html(wrap_error('Неверный формат телефона')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_wrong_phone4(fieldname,error_field,minlen,maxlen,error){var mainPhone=$("#"+fieldname).val();mainPhone=mainPhone.replace(/[^\d]/gi,'');if((mainPhone.length<minlen||mainPhone.length>maxlen)&&mainPhone){$("#error_"+error_field).html(wrap_error('Неверный формат телефона')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_wrong_phone2(fieldname,minlen,maxlen,error){var mainPhone=$("#"+fieldname).val();mainPhone=mainPhone.replace(/[^\d]/gi,'');if((mainPhone.length<minlen||mainPhone.length>maxlen)&&mainPhone){$("#error_"+fieldname).html(wrap_error('Неверный формат телефона')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_field_is_wrong_phone3(fieldname,error_fieldname,minlen,maxlen,error){var mainPhone=$("#"+fieldname).val();mainPhone=mainPhone.replace(/[^\d]/gi,'');if((mainPhone.length<minlen||mainPhone.length>maxlen)&&mainPhone){$("#error_"+error_fieldname).html(wrap_error('Неверный формат телефона')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function check_phone(event){var maxlen=event.data.maxlength;var minlen=event.data.minlength;var fieldname='tels_num_'+$(event.target).parent('div').attr("id").split('_').pop();var phoneParts=$("#"+fieldname).val().split('-');var mainPhone=phoneParts[0]+''+phoneParts[1];var note=phoneParts[3];if(phoneParts.join('')!=''&&(mainPhone.length<minlen||mainPhone.length>maxlen)){$("#error_"+fieldname).html(wrap_error('Неверный формат телефона')).show();highlightErrorField(fieldname);}else if(!note.search(/^(^[\s|\d|\(|\+|_|)|\[|\]|\}}\{|\.|\\|\/])/)){$("#error_"+fieldname).html(wrap_error('В примечание нельзя добавлять телефон')).show();highlightErrorField(fieldname);}else{$("#error_"+fieldname).html("").hide(0);}}
function check_is_only_digits(fieldname,error){var val=$("#"+fieldname).val();if((/[^0-9]/gi).test(val)&&val!=''){$("#error_"+fieldname).html(wrap_error('Введите целое положительное число')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_is_lowercase_only(fieldname,error){var val=$("#"+fieldname).val();for(var i=0,len=val.length,count=0,ch;i<len;++i){ch=val.charAt(i);if(ch>='A'&&ch<='Z')++count;}
if(count>0){$("#error_"+fieldname).html(wrap_error('Символа в верхнем регистре не допустимы')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_is_latin_only(fieldname,error){var val=$("#"+fieldname).val();if(val.match(/([а-яёА-ЯЁ]+)/)){$("#error_"+fieldname).html(wrap_error('Вводите только латинские буквы')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{return true;}}
function check_is_number(fieldname,error,positive){var val=$("#"+fieldname).val();if((!is_number(val)&&!is_float(val))&&val!=''){$("#error_"+fieldname).html(wrap_error('Введите число')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}else{if(positive){if(parseFloat(val)<0){$("#error_"+fieldname).html(wrap_error('Введите число больше нуля.')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}}
return true;}}
function ajax_field_check(fieldname,url,error,param){var result=error;var data={};data[fieldname]=$("#"+fieldname).val();data['param']=param;$.ajax({url:url,type:"POST",dataType:"json",async:false,data:data,success:function(data){if(data.type=='error'){$("#error_"+fieldname).html(wrap_error(data.message)).show();if(error!=1){scroll_to_error(fieldname);result=1;}}}});return result;}
function is_float(mixed_var){mixed_var=mixed_var.replace(/,/gi,'.')*1;return+mixed_var===mixed_var&&!!(mixed_var%1);}
function is_int(mixed_var){mixed_var=mixed_var*1;return typeof mixed_var=='number'&&mixed_var%1==0;}
function is_number(mixed_var){return(is_int(mixed_var)||is_float(mixed_var))?true:false;}
function formatPrice(event){s=$(this).val();for(var i=0,l=s.length,c,r='',dot;i<l;++i)
if(((c=s.charAt(i))>='0'&&c<='9')||(!dot&&(c==='.'||c===',')&&(dot=1)))r+=c;$(this).val(r);}
function check_field_phone_number(fieldname,error){var phone_number=$("#"+fieldname).val();if(!(/^([0-9]{5,12})$/).test(phone_number)){$("#error_"+fieldname).html(wrap_error('Телефон введен неверно')).show();highlightErrorField(fieldname);if(error!=1){scroll_to_error(fieldname);}
return false;}
return true;}
function RemoveChars(string){if(typeof string!=='undefined'){return string.replace(/\D/g,'');}}
$(".show-hide-next-div").on('click',function(){$(this).parents(":first").next("div").toggleClass("hide");$(this).trigger('fake_click');return false;});$(".filter_switcher").click(function(){var filter=$(this).attr("id");$("#other_"+filter).toggleClass("hide");if($("#other_"+filter).is(".hide")){$(this).find(".filter_action").html("Все");$(this).find(".filters_plus").css("background-position","0 -1697px");}else{$(this).find(".filter_action").html("Свернуть");$(this).find(".filters_plus").css("background-position","0 -1683px");}})
$(function(){$("#close-registration-teaser").click(function(){$('#search-info').remove();var expires=new Date();expires.setDate(expires.getDate()+7);setCookie('IsSearchInformerDisabled',1,expires,'/',SITE);return false;})})
function get_slider_params(width,norm_slide_width,margin,max_visible,some_magic){var mc=Math.round(width/(norm_slide_width+margin));if(mc>max_visible)mc=max_visible;if(width-mc*(norm_slide_width)<0){if(mc>1)mc--;}
var slide_width=(mc<=(max_visible-1))?Math.floor(width/mc):(Math.floor(width/mc)-some_magic);return{num:mc,width:slide_width};}
$(function(){window.informers_on_page=[];var loading_informers=false;function get_informers(){var $informers=$(".informer-block").not(".no-ajax");if($informers.length==0||loading_informers){return false;}
var top=$(window).height()+$(window).scrollTop();var left=$(window).width()+$(window).scrollLeft();var $this=null;$informers.each(function(index,el){var $el=$(el);if($this!==null||!($el.offset().top<top&&$el.offset().left<left+300)){return;}
$this=$el;});if($this===null){return setTimeout(get_informers,300);}
loading_informers=true;$.ajax({url:"/ajax/Catalog/GetInformers/",type:"post",dataType:'json',data:({width:$(document).width(),search:$this.data("search"),count:$this.data("count"),category:$this.data("category"),type:$this.data("type"),informers_on_page:informers_on_page}),success:function(data){if(!data.html){$this.addClass('hide');}
$this.find(".informer-content").html(data.html);$(".informer-block").css({"min-height":"0"});var slider;if(data.html){$this.addClass('open');if($this.hasClass('informer-block__horizontal')){var max_visible=$this.hasClass('informer-vertical-marker')?2:4;var magic=6;if(max_visible>$this.find("li").length){max_visible=$this.find("li").length;if(1==max_visible)magic=0;}
var p=get_slider_params($this.width(),242,0,max_visible,magic);slider=$this.find(".informer_slider").bxSlider({slideWidth:p.width,minSlides:p.num,maxSlides:4,slideMargin:9,moveSlides:0,pager:false,autoControls:true,infiniteLoop:false});$(window).on('resize orientationchange',function(e){var p=get_slider_params($this.width(),242,0,4,6);slider.reloadSlider({slideWidth:p.width,minSlides:p.num,maxSlides:4,slideMargin:9,moveSlides:0,pager:false,autoControls:true,infiniteLoop:false});});}else{var p=get_slider_params($this.width(),200,0,2,0);var num=1==$this.find("li").length?1:2;slider=$this.find(".informer_slider").bxSlider({mode:'vertical',slideWidth:p.width,minSlides:num,maxSlides:2,slideMargin:20,moveSlides:0,pager:false,autoControls:true,infiniteLoop:false});}
var _timeout;$this.on('rebuild-informers',function(event,mode){var rebuild=function(){var p;if(mode=="horizontal"){p=get_slider_params($this.width(),242,0,2,6);p.maxSlides=2;p.slideMargin=9;p.mode="horizontal";}else{p=get_slider_params($this.width(),200,0,2,0);p.num=1==$this.find("li").length?1:2;p.maxSlides=2;p.slideMargin=20;p.mode="vertical";}
slider=$this.find(".informer_slider").bxSlider({mode:p.mode,slideWidth:p.width,minSlides:p.num,maxSlides:p.maxSlides,slideMargin:p.slideMargin,moveSlides:0,pager:false,autoControls:true,infiniteLoop:false});};slider.destroySlider();var ul=$this.find(".informer_slider").clone();$this.find(".informer-content").empty().append(ul);if(_timeout){clearTimeout(_timeout);}
_timeout=setTimeout(rebuild,100);});}
$this.find('.bx-loading').remove();informers_on_page=informers_on_page.concat(data.ids);$this.addClass('no-ajax');loading_informers=false;setTimeout(get_informers,300);attach_balloon();var $sideBarInformer=$('.sidebar .informer-block');$sideBarInformer.css({minHeight:$sideBarInformer.find('.bx-viewport').height()});}});}
get_informers();});$(function(){var EXPAND_SIZE=290;$(document).on("hover",".informer-block-expandable li .informer-container",function(e){var $el=$(e.currentTarget),$bx=$el.parents(".bx-viewport:first");if("mouseenter"==e.type){if(!$bx.data("origin_height")){$bx.data("origin_height",$bx.height());$bx.find("li").each(function(){$(this).data("top",$(this).get(0).offsetTop);$(this).find(".informer-container").data("origin_height",$(this).height());});if($bx.parents(".informer-block__vertical").length){$bx.find("li").each(function(){var $this=$(this);var t=$this.data("top"),h=$this.find(".informer-container").data("origin_height");if(!isNaN(t)){$this.css({position:"absolute",top:t,height:h});}});}}
var hh=$el.find(".informer-hint").show().outerHeight(true);if(isNaN(hh)){hh=40;}else{hh-=25;}
hh+=$el.find(".informer-title").outerHeight(true)>30?20:0;$el.height(EXPAND_SIZE+hh).children("a").height(EXPAND_SIZE+hh);$el.parent().css("z-index",100).css("overflow","visible");$bx.height($bx.data("origin_height")+hh+2).css("z-index",100);}else{var h=$bx.data("origin_height"),h2=$el.data("origin_height");$el.height(h2).children("a").height(h2);$el.parent().css("z-index",0).css("overflow","hidden");$bx.height(h).css("z-index",0);$el.find(".informer-hint").hide();}});});$(function(){$("#close-action-teaser").click(function(){$(this).parent().remove();var expires=new Date();expires.setDate(expires.getDate()+30);setCookie('ActionTeaserDisabled',1,expires,'/',SITE);return false;});});$("#city").click(function(){if($('#cities').is(':hidden'))
$("#cities").slideDown("fast");else
$("#cities").slideUp("fast");return false;});function showhide(id1){if(id1=="first"){$("#second").hide();$("#first").show();$("#firstlinks").attr("class","active");$("#secondlinks").attr("class","inactive");}
if(id1=="second"){$("#first").hide();$("#second").show();$("#firstlinks").attr("class","inactive");$("#secondlinks").attr("class","active");}}
$("#other_nadcats").click(function(){if($("#nadcats").is(":hidden")){$("#nadcats").slideDown("fast");}else{$("#nadcats").slideUp("fast");}
return false;});$("#show-hide").click(function(){if($('#show-hide_block').is(":hidden")){$("#show-hide_block").slideDown("fast");}else{$("#show-hide_block").slideUp("fast");}
return false;});$('#comments_button').click(function(){var error=0;$(".p_error_block").html("").hide();if(!check_field_is_empty('author',error))error=1;if(!check_field_is_empty('authors_mail',error)||!check_field_mail('authors_mail',error))error=1;if(!check_field_is_empty('text',error))error=1;if(!check_field_overflow('text',1200,error))error=1;if(error==1){return false;}else{$.ajax({url:"/ajax/comments/",type:"POST",data:($("#comment-form").serializeJSON()),dataType:"JSON",success:function(data){if(data){var arr=data.message.split("|");$("#comments_report").html(arr[1]).show();if(arr[0]!=1){var count=data.count;$("#comments_count").html(count);$("#comments_text_count").html(count+' '+declension('ответ|ответа|ответов',count));var date=new Date();var cur_date=date.getDate()+'.'+((date.getMonth().length>1?date.getMonth():'0'+date.getMonth()))+'.'+date.getFullYear();var comment='<div class="comment"><strong class="sprite">'+$("#author").val()+'</strong><span>'+cur_date+'</span><p>- '+nl2br($("#text").val())+'</p></div>';$("#commentes_title").after(comment);$("#other_nadcats_p").remove();$(".comments_form").remove();$("#no_comments").remove();$('#testimonials_tabs ul').prepend(data.item);$('#testimonials_tabs #comment').remove();}}}});}
return false;});function declension(words,num){var cases=[2,0,1,1,1,2];var titles=words.split('|');return titles[(num%100>4&&num%100<20)?2:cases[Math.min(num%10,5)]];}
$(function(){$(document).on('click','.all-contacts',function(e){$(this).find('.phone_end').remove();$(this).find('.show_phone').css('opacity',0).css('cursor','default');$(this).find('.show_phone_link').css('cursor','default');$(this).find('.phone_begin').addClass('dashed').css('z-index',1);var $tbl=$(this).find('.all-contacts-table');$tbl.removeClass("short");$tbl.find("tr").find("td:first").css("min-width","40px");var $phone=$(this).find('.phone_begin');var left=0,top=25;var w=$tbl.outerWidth(),h=$tbl.outerHeight();var width,offset=$phone.offset().left;if($(this).parents(".ui-dialog").length){width=$(this).parents(".ui-dialog").width();offset=offset-$(this).parents(".ui-dialog").offset().left;}else{width=$("#middle").width();}
if((offset+w)>=width){left=$phone.position().left-w+$phone.width();if(left<0&&offset<(w-$phone.width())){$tbl.addClass("short");left=0;}}
if($(this).parents(".ui-dialog").length){var height=$(this).parents(".ui-dialog").height();if(($phone.offset().top-$(window).scrollTop()+h+10)>=height){top=$phone.position().top-h;}}
var $windowWidth=$(window).width();if($windowWidth<=480){var mobileFixOffset=($('.show_phone').width()/2);if($windowWidth<=320){mobileFixOffset=0;}
left=-offset+mobileFixOffset;}
$(this).find('.all-contacts-table').css('left',left+'px');$(this).find('.all-contacts-table').css('top',top+'px');$(this).find('.all-contacts-table').show();if($(this).find('#contact-status')&&$(this).find('#show_all_phones')){if(!$(this).hasClass('.phone_end')){var idName=$(this).attr('id');if(idName!='show_all_phones'){$('#show_all_phones').find('.show_phone').css('opacity',0).css('cursor','default');$('#show_all_phones').find('.show_phone_link').css('cursor','default');$('#show_all_phones').find('.phone_begin').addClass('dashed').css('z-index',1);$('#show_all_phones').removeClass('track-event');}
if(idName!='contact-status'){$('#contact-status').find('.show_phone').css('opacity',0).css('cursor','default');$('#contact-status').find('.show_phone_link').css('cursor','default');$('#contact-status').find('.phone_begin').addClass('dashed').css('z-index',1);$('#contact-status').removeClass('track-event');}}}
$(this).off('click');if($(this).parents(".b-product_gallery__img").length>0){$(this).find('.phone_begin').addClass('dashed').css({'position':'inherit','display':'inline'});}
e.stopPropagation();});$(document).on('mouseleave','.one_pp_wrap, .pp-header-info, .sidebar-company-info',function(){$(this).find('.all-contacts-table').hide();});$(document).on('click',function(event){if(!$(event.target).hasClass('all-contacts')){$('.all-contacts-table').hide();}});})
var isIn=false;var newSrc='';var sWidth=0;var sHeight=0;var iWidth=0;var iHeight=0;var currTimeout;var oldSrc;var presense;$(".zoom-image").hover(function(){if(isIn){window.clearTimeout(currTimeout);}
if($(this).hasClass("no-image")){return;}
isIn=true;var name=$(this).attr('id');newSrc=$(this).attr('path');obj=$(this).find("img:first");currTimeout=window.setTimeout(function(){if(!isIn)
return;obj.closest("div.pp_pic").css('z-index','5');obj.closest("div.pp_pic").css('position','absolute');obj.attr("sWidth",obj.width());obj.attr("sHeight",obj.height());obj.attr("src",newSrc);obj.stop().animate({width:obj.attr("big_width"),height:obj.attr("big_height")},500);},500);},function(){isIn=false;if($(this).hasClass("no-image")){return;}
window.clearTimeout(currTimeout);$(this).find("span:first").remove();var obj=$(this).find("img:first");obj.stop().animate({width:obj.attr("sWidth"),height:obj.attr("sHeight")},500,function(){obj.closest("div.pp_pic").css('z-index','1');obj.closest("div.pp_pic").css('position','releative');});});function submit_search_form(){var q=$.trim($("#search_input").val());var search_scope=$("#search_scope").val()=='goods'?'t':$("#search_scope").val();if(window.redirect){return false;}
if(q.length>0&&search_scope!='tenders'){$.ajax({url:'/ajax/categories/check-exact/',data:{name:q},type:'POST',dataType:'JSON',success:function(data){var http=($("#search_in_area").length>0&&$("#search_in_area").prop("checked")==true)?'':'//'+SITE;var href='';if('id'in data&&search_scope!=='f'){href=http+"/"+data.act+"/"+data['en']+"-"+data['id']+"/?sc";}else{href=http+"/"+search_scope+"/search/"+encodeURIComponent(q.replace(/\//gi,' '))+"/"+region_first_url;href+=(region_first_url?"&":"?");if($("#search_in_current_rubric").is(":checked")){href+='category='+$("#search_in_current_rubric").val();}else{href+='bs';if(window.location.pathname=='/'){href+='&sa';}}}
if($("#search_category_referer").length>0){href+='&catref='+$("#search_category_referer").val();}
if($('#main_search_form input[name="special"]').length>0){href+='&special=1';}
window.location=href;}});}
return false;}
$("#main_search_sbmt").click(submit_search_form);$("#search_input").bind("keydown",function(event){var e=event||window.event;if(e.keyCode==13){if($("#search_scope").val()=='f'){setTimeout(submit_search_form,100);}else{submit_search_form();}
return false;}});function setCookie(name,value,expires,path,domain,secure){if(!name||!value)return false;var str=name+'='+encodeURIComponent(value);if(expires)str+='; expires='+expires.toGMTString();if(path)str+='; path='+path;if(domain)str+='; domain='+domain;if(secure)str+='; secure';document.cookie=str;return true;}
function getCookie(name){var pattern="(?:; )?"+name+"=([^;]*);?";var regexp=new RegExp(pattern);if(regexp.test(document.cookie)){return decodeURIComponent(RegExp["$1"]);}
return false;}
function closeIt(){$("#mask").css("display","none");$("#dialog").css("display","none");return false;}
$(document).ready(function(){$('a[name=modal]').click(function(e){e.preventDefault();var id=$(this).attr('href');var maskHeight=$(document).height();var maskWidth=$(window).width();$('#mask').css({'width':maskWidth,'height':maskHeight});$('#mask').show(1);$('#mask').fadeTo(1,0.8);var winH=$(window).height();var winW=$(window).width();var windowTop=$(window).scrollTop();$(id).css('top',winH/2-$(id).height()/2+windowTop);$(id).css('left',winW/2-$(id).width()/2);$(id).show(1);return false;});$('.window .close').click(function(e){e.preventDefault();$('#mask, .window').hide();});$('#k').click(function(){$(this).hide();$('.window').hide();});});$('.page').click(function(e){e.preventDefault();var id=$(this).attr('href');var page=$(this).attr('id');if(page==6){$(id).css("width","825px");}else{$(id).css("width","420px");}
$("#block_img").attr("src","/pics/page"+page+"b.jpg?new");var text=$(this).prev().html();$("#block-text").html(text);var maskHeight=$(document).height();var maskWidth=$(window).width();$('#mask').css({'width':maskWidth,'height':maskHeight});$('#mask').show(1);$('#mask').fadeTo(10,0.8);var winH=$(window).height();var winW=$(window).width();var windowTop=$(window).scrollTop();$(id).css('top',(winH/2-$(id).height()/2)+windowTop);$(id).css('left',winW/2-$(id).width()/2);$(id).show(1);});$(function(){$(document).on("click",".show_next_tag_and_remove",function(){$(this).next().show();$(this).remove();return false;});});(function(define){'use strict';define(['jquery'],function($){var $scrollTo=$.scrollTo=function(target,duration,settings){return $(window).scrollTo(target,duration,settings);};$scrollTo.defaults={axis:'xy',duration:0,limit:true};$scrollTo.window=function(){return $(window)._scrollable();};$.fn._scrollable=function(){return this.map(function(){var elem=this,isWin=!elem.nodeName||$.inArray(elem.nodeName.toLowerCase(),['iframe','#document','html','body'])!==-1;if(!isWin){return elem;}
var doc=(elem.contentWindow||elem).document||elem.ownerDocument||elem;return /webkit/i.test(navigator.userAgent)||doc.compatMode==='BackCompat'?doc.body:doc.documentElement;});};$.fn.scrollTo=function(target,duration,settings){if(typeof duration==='object'){settings=duration;duration=0;}
if(typeof settings==='function'){settings={onAfter:settings};}
if(target==='max'){target=9e9;}
settings=$.extend({},$scrollTo.defaults,settings);duration=duration||settings.duration;settings.queue=settings.queue&&settings.axis.length>1;if(settings.queue){duration/=2;}
settings.offset=both(settings.offset);settings.over=both(settings.over);return this._scrollable().each(function(){if(target===null)return;var elem=this,$elem=$(elem),targ=target,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break;}
targ=win?$(targ):$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style){toff=(targ=$(targ)).offset();}}
var offset=$.isFunction(settings.offset)&&settings.offset(elem,targ)||settings.offset;$.each(settings.axis.split(''),function(i,axis){var Pos=axis==='x'?'Left':'Top',pos=Pos.toLowerCase(),key='scroll'+Pos,old=elem[key],max=$scrollTo.max(elem,axis);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(settings.margin){attr[key]-=parseInt(targ.css('margin'+Pos),10)||0;attr[key]-=parseInt(targ.css('border'+Pos+'Width'),10)||0;}
attr[key]+=offset[pos]||0;if(settings.over[pos]){attr[key]+=targ[axis==='x'?'width':'height']()*settings.over[pos];}}else{var val=targ[pos];attr[key]=val&&val.slice&&val.slice(-1)==='%'?parseFloat(val)/100*max:val;}
if(settings.limit&&/^\d+$/.test(attr[key])){attr[key]=attr[key]<=0?0:Math.min(attr[key],max);}
if(!i&&settings.queue){if(old!==attr[key]){animate(settings.onAfterFirst);}
delete attr[key];}});animate(settings.onAfter);function animate(callback){$elem.animate(attr,duration,settings.easing,callback&&function(){callback.call(this,targ,settings);});}}).end();};$scrollTo.max=function(elem,axis){var Dim=axis==='x'?'Width':'Height',scroll='scroll'+Dim;if(!$(elem).is('html,body'))
return elem[scroll]-$(elem)[Dim.toLowerCase()]();var size='client'+Dim,html=elem.ownerDocument.documentElement,body=elem.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[size],body[size]);};function both(val){return $.isFunction(val)||$.isPlainObject(val)?val:{top:val,left:val};}
return $scrollTo;});}(typeof define==='function'&&define.amd?define:function(deps,factory){'use strict';if(typeof module!=='undefined'&&module.exports){module.exports=factory(require('jquery'));}else{factory(jQuery);}}));function onlyDigit(input){var value=input.value;var re=/а|б|в|г|д|е|ё|ж|з|и|й|к|л|м|н|о|п|р|с|т|у|ф|х|ц|ч|ш|щ|ъ|ы|ь|э|ю|я|А|Б|В|Г|Д|Е|Ё|Ж|З|И|Й|К|Л|М|Н|О|П|Р|С|Т|У|Ф|Х|Ц|Ч|Ш|Щ|Ъ|Ы|Ь|Э|Ю|Я|q|w|e|r|t|y|u|i|o|p|l|k|j|h|g|f|d|s|a|z|x|c|v|b|n|m| |,|\.|~|!|@|#|\$|%|\^|\&|\*|\(|\)|\-|\_|\=|\+|\?|`|\[|\]|\{|\}|\<|\>|\"|/gi;if(re.test(value)){value=value.replace(re,'');input.value=value;}}
function price(input){var value=input.value;var re=/а|б|в|г|д|е|ё|ж|з|и|й|к|л|м|н|о|п|р|с|т|у|ф|х|ц|ч|ш|щ|ъ|ы|ь|э|ю|я|А|Б|В|Г|Д|Е|Ё|Ж|З|И|Й|К|Л|М|Н|О|П|Р|С|Т|У|Ф|Х|Ц|Ч|Ш|Щ|Ъ|Ы|Ь|Э|Ю|Я|q|w|e|r|t|y|u|i|o|p|l|k|j|h|g|f|d|s|a|z|x|c|v|b|n|m| |~|!|@|#|\$|%|\^|\&|\*|\(|\)\_|\=|\+|\?|`|\[|\]|\{|\}|\<|\>|\"|\/|/gi;if(re.test(value)){value=value.replace(re,'');input.value=value;}}
function check(){var author=$('#author');var text=$('#text');var submit=$('#comment');submit.disabled=!(author.value!=''&&text.value!='')}
if($('.cabinet-header-bottom-panel .cabinet-error-message').height()>'30'){$('.cabinet-header-bottom-panel .cabinet-error-message').css('margin-top','-4px')}
function initFileUploads(){var fakeFileUpload=$('<div class="fakefile"><input type="text" class="cabinet-text-input cabinet-text-input-240 fake-file-input" style="margin-right:5px"><a class="btn-b" style=""><span><span>Обзор</span></span></a><div class="clear"></div></div>');$('input[type="file"]:not(.not-fake)').each(function(){if($(this).data('fake')){return'';}
var fake=fakeFileUpload.clone();$(this).after(fake);$(this).width(fake.width());$(this).height(fake.height());$(this).css('z-index',parseInt(fake.css('z-index'))+1);$(this).parent().css("position","relative");$(this).data('fake',fake);$(this).on('change',function(){$(this).data('fake').find('input[type="text"]').val($(this).val());$('#show-input-file').parent('div').hide();});});}
initFileUploads();$(".call_help_window").click(function(){$(".wrap_help_window").hide();var id=$(this).attr("name");$("#"+id).show();return false;});$(".hclose").click(function(){$(this).parent().parent().hide();return false;});$(document).click(function(event){if($(event.target).closest(".wrap_help_window").length===0){$(".wrap_help_window").hide();}});$(function(){$("#new_goods, #new_firms, #tags_cloud").toggleClass('hide');$("#tags").click(function(){$("#tags_cloud").toggleClass('hide');return false;})});$(document).ready(function(){$('.b-related-items__item-price').each(function(){if(($(this).text().length>13)&&$(this).has('span')){$(this).css('font-size','13px');}})});function getNameBrouser(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf('chrome')>-1)
return"chrome";if(ua.indexOf("msie")!=-1&&ua.indexOf("opera")==-1&&ua.indexOf("webtv")==-1)
return"msie"
if(ua.indexOf("opera")!=-1)
return"opera"
if(ua.indexOf("gecko")!=-1)
return"gecko";if(ua.indexOf("safari")!=-1)
return"safari";if(ua.indexOf("konqueror")!=-1)
return"konqueror";return"unknown";}
function strtr(str,from,to){if(typeof from==='object'){var cmpStr='';for(var j=0;j<str.length;j++){cmpStr+='0';}
var offset=0;var find=-1;var addStr='';for(fr in from){offset=0;while((find=str.indexOf(fr,offset))!=-1){if(parseInt(cmpStr.substr(find,fr.length))!=0){offset=find+1;continue;}
for(var k=0;k<from[fr].length;k++){addStr+='1';}
cmpStr=cmpStr.substr(0,find)+addStr+cmpStr.substr(find+fr.length,cmpStr.length-(find+fr.length));str=str.substr(0,find)+from[fr]+str.substr(find+fr.length,str.length-(find+fr.length));offset=find+from[fr].length+1;addStr='';}}
return str;}
for(var i=0;i<from.length;i++){str=str.replace(new RegExp(from.charAt(i),'g'),to.charAt(i));}
return str;}
function preg_replace_callback(pattern,callback,subject,limit){limit=!limit?-1:limit;var _flag=pattern.substr(pattern.lastIndexOf(pattern[0])+1),_pattern=pattern.substr(1,pattern.lastIndexOf(pattern[0])-1),reg=new RegExp(_pattern,_flag),rs=null,res=[],x=0,ret=subject;if(limit===-1){var tmp=[];do{tmp=reg.exec(subject);if(tmp!==null){res.push(tmp);}}while(tmp!==null&&_flag.indexOf('g')!==-1)}else{res.push(reg.exec(subject));}
for(x=res.length-1;x>-1;x--){ret=ret.replace(res[x][0],callback(res[x]));}
return ret;}
$(function(){$('ul.fe-tabs').delegate('li > a','click',ShowFETab);$("div.ui-widget-overlay").live('click',function(){$('.ui-dialog:visible').each(function(){$(this).children('div.ui-dialog-content').dialog('close');});});if($('.ui-radio').buttonset){$('.ui-radio').buttonset();}
$('#open-form-login').click(function(e){$(this).hide();$(this).parent().hide();$("#form-login").show();e.preventDefault();});});function ShowFETab(el){var menu=$(el).parent("ul.fe-tabs");menu.children("li").removeClass("selected");$(el).parent("li").addClass('selected');}
function formatQuantity(value,partsDelimiter){if(!partsDelimiter){partsDelimiter=',';}
var parts=parseFloat(value).toFixed(2).split('.');var integralPart=parts[0];var fractionalPart=parts.length>1?parts[1]:'';fractionalPart=fractionalPart.replace(/00$/,'');var rgx=/(\d+)(\d{3})/;while(rgx.test(integralPart)){integralPart=integralPart.replace(rgx,'$1'+' '+'$2');}
return(fractionalPart?integralPart+partsDelimiter+fractionalPart:integralPart);}
function moveCursor2End(id){var obj=document.getElementById(id);if(!obj){return;}
if(obj.tagName==='INPUT'&&obj.type==='text'){if(obj.createTextRange){var r=obj.createTextRange();r.collapse(false);r.select();}else{var end=obj.value.length;obj.setSelectionRange(end,end);obj.focus();}}}
(function($){$('.zk-datepicker-trigger').live('click',function(){$(this).prev().focus();});})(jQuery);$(function(){$(document).on('mouseup','.select-all',function(e){var self=$(this);if(!self.hasClass("selected-text")){self.addClass("selected-text");$(this).select();}}).on('focusout','.select-all',function(e){e.preventDefault();var self=$(this);if(self.hasClass("selected-text")){self.removeClass("selected-text");}});});function htmlspecialchars(text){var chars=Array("&","<",">",'"',"'");var replacements=Array("&amp;","&lt;","&gt;","&quot;","'");for(var i=0;i<chars.length;i++){var re=new RegExp(chars[i],"gi");if(re.test(text)){text=text.replace(re,replacements[i]);}}
return text;}
function charsReplace(text){return htmlspecialchars(text.replace('"',"").replace("'",""));}
function trackVisit(company,type){company=parseInt(company);if(company>0){type='goals/'+type;$(document.body).append($('<iframe src="//'+SITE+'/'+type+'/'+company+'/" class="trackFrame"></iframe>').css({height:0,width:0,opacity:0,position:'absolute'}));window.setTimeout(function(){$('.trackFrame').remove();},100000);}}
function trackMarketGidPreOrder(){var MGDate=new Date();$(document.body).append('<iframe src ="https://marketgid.com/resiver.html#label2'
+MGDate.getYear()+MGDate.getMonth()
+MGDate.getDate()+MGDate.getHours()
+'" width="0%" height="0" sty'
+'le = "position:absolute;left:'
+'-1000px" ></iframe>');}
function trackMarketGidOrder(){var MGDate=new Date();$(document.body).append('<iframe src ="https://marketgid.com/resiver.html#label3'
+MGDate.getYear()+MGDate.getMonth()
+MGDate.getDate()+MGDate.getHours()
+'" width="0%" height="0" sty'
+'le = "position:absolute;left:'
+'-1000px" ></iframe>');}
function checkLazyLoadEditor(){var top=$(window).height()+$(window).scrollTop();$('.tinyMCE-LazyLoad:visible,.tinyMCE-LazyLoad-full:visible').each(function(){if($(this).offset().top<top+50){var type='typical';if($(this).hasClass('tinyMCE-LazyLoad-full')){type='full';}else if($(this).hasClass('tinyMCE-LazyLoad-mini')){type='mini';}else if($(this).hasClass('tinyMCE-LazyLoad-mail')){type='mail';}else if($(this).hasClass('tinyMCE-LazyLoad-rubrics')){type='rubrics';}
$(this).removeClass('tinyMCE-LazyLoad').removeClass('tinyMCE-LazyLoad-full').removeClass('tinyMCE-LazyLoad-mini').removeClass('tinyMCE-LazyLoad-mail').removeClass('tinyMCE-LazyLoad-rubrics');if(tinyMCE&&tinyMCE.get($(this).attr('id'))){tinyMCE.get($(this).attr('id')).destroy();}
addEditor($(this),type,$(this).height());}});}
function removeDeniedContent(editor,text,body){if(text){var links=body.querySelectorAll('a[href]');var hasBadLinks=false;Array.prototype.forEach.call(links,function(link){var href=link.getAttribute('href');if(/.*\/go\/zk_go_.*/i.test(href)){hasBadLinks=true;var span=document.createElement('span');span.innerHTML=link.innerHTML;link.parentElement.replaceChild(span,link);}});if(hasBadLinks){setTimeout(function(){$(document).cabinetReport({type:'error',message:'Запрещается использование ссылок вида /go/zk_go_*',autoHide:3000});},500);editor.setContent(body.outerHTML);}}}
function addEditor(el,type,height,additional_buttons){if(typeof height=='undefined'){height='auto';}
if(typeof additional_buttons=='undefined'){additional_buttons=[];}
el=$(el);if(!tinyMCE){return false;}
if(!type){type='typical';}
var fn=function(){$(el).click();};var config={selector:"textarea#"+$(el).attr('id'),theme:"modern",setup:function(ed){ed.on('PastePlainTextToggle',function(e){$.cookie('paste_as_text',e.state?1:0,{expires:7,path:'/'});});ed.on('init',function(){removeDeniedContent(ed,ed.getContent(),ed.getDoc().documentElement);});},inline_styles:true,relative_urls:false,convert_urls:false,remove_script_host:false,height:height,language:'ru',object_resizing:true,max_indent_value:90,release:window.release,style_formats:[{title:'Заголовки',items:[{title:'Обычный',block:'p'},{title:'Заголовок h2',block:'h2'},{title:'Заголовок h3',block:'h3'},{title:'Заголовок h4',block:'h4'},{title:'Заголовок h5',block:'h5'},{title:'Заголовок h6',block:'h6'}]},{title:'Размер шрифта',items:[{title:'8pt',inline:'span',styles:{'font-size':'8px','line-height':'14px'}},{title:'10pt',inline:'span',styles:{'font-size':'10px','line-height':'14px'}},{title:'12pt',inline:'span',styles:{'font-size':'12px','line-height':'18px'}},{title:'14pt',inline:'span',styles:{'font-size':'14px','line-height':'20px'}},{title:'18pt',inline:'span',styles:{'font-size':'18px','line-height':'24px'}},{title:'24pt',inline:'span',styles:{'font-size':'24px','line-height':'30px'}},{title:'36pt',inline:'span',styles:{'font-size':'36px','line-height':'42px'}}]}],additional_buttons:[],init_instance_callback:function(inst){inst.on('keydown paste',fn);inst.on('input change',function(){$('#'+el.attr('id')).val(inst.getContent()).change();});inst.on('PostProcess',function(e){removeDeniedContent(inst,e.content,e.node);});},contextmenu:"copy paste | link zkimage video google-form | hr charmap | cell row column deletetable",content_css:["/inc/css/tinymce.css","/inc/css/font-awesome/css/font-awesome.min.css"],noneditable_noneditable_class:'fa',extended_valid_elements:'span[*]',table_toolbar:"zktablesettings zktablerowsettings zktablecolumnsettings zktablecellsettings | zktablemoverowdown zktablemoverowup zktablemovecolumnleft zktablemovecolumnright | zktableaddcellleft zktableaddcellright zktableremovecell | zktablemergerightcell zktablemergebottomcell | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol | tabledelete",};var useH1=!!el.data('tinymce-config-use-h1');if(useH1){config.style_formats[0].items.splice(1,0,{title:'Заголовок h1',block:'h1'});}
if(el.hasClass('disable-table_toolbar')){config.table_toolbar=false;}
var paste_as_text_cookie=$.cookie("paste_as_text");var types={full:{toolbar:"undo redo | styleselect | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent | link unlink zkimage video google_form table | print fullscreen | forecolor backcolor fontsizeselect emoticons | code",plugins:"advlist link autolink lists charmap print preview hr anchor pagebreak spellchecker paste searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking save table contextmenu directionality emoticons template textcolor video zkimage google_form noneditable zk_notification zk_templates zk_table_constructor zk_extended_tables zk_table_actions fontawesome zk_background_image",paste_as_text:paste_as_text_cookie==1,statusbar:false},typical:{toolbar:"undo redo | styleselect | bold italic underline | link unlink | zkimage video google_form table | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent | forecolor | fontawesome | zk_notification zk_templates zk_background_image",plugins:"advlist lists link paste autolink searchreplace charmap fullscreen hr insertdatetime nonbreaking table contextmenu textcolor video zkimage google_form noneditable zk_notification zk_templates zk_table_constructor zk_extended_tables zk_table_actions fontawesome zk_background_image",menubar:"edit insert format table",paste_as_text:paste_as_text_cookie==1,statusbar:false,paste_webkit_styles:'all'},mini:{toolbar:"undo redo | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | link unlink | hr",plugins:"link autolink searchreplace insertdatetime contextmenu paste hr",menubar:false,statusbar:false,paste_as_text:false,paste_webkit_styles:'all'},mail:{toolbar:"undo redo | styleselect | bold italic underline strikethrough | link unlink | hr | zkimage table | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent | forecolor backcolor ",plugins:"link autolink searchreplace insertdatetime contextmenu paste hr zkimage textcolor charmap nonbreaking table zk_table_constructor zk_table_actions zk_extended_tables ",menubar:"edit insert format table",statusbar:false,paste_as_text:false,plugins_settings:{zk_table_constructor:{disable_wrapper:true,disable_middle_column:true}},paste_webkit_styles:'all'},rubrics:{toolbar:"formatselect | undo redo | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | link unlink | hr | zkimage | bullist numlist",plugins:"link autolink searchreplace insertdatetime contextmenu paste hr zkimage lists ",menubar:false,statusbar:false,paste_as_text:true,}};if(window.is_src_editor==1){types.typical.plugins+=' code';types.mini.plugins+=' code';types.mail.plugins+=' code';types.typical.toolbar+=' | code';types.mini.toolbar+=' | code';types.mail.toolbar+=' | code';}
if(additional_buttons.length){var buttons_reqire_plugin={zkimage:'zkimage'};types[type].toolbar+=' | ';$.each(additional_buttons,function(k,v){if(!(types[type].toolbar.indexOf(v)+1)){types[type].toolbar+=' '+v+' ';}
if(!(types[type].plugins.indexOf(v)+1)){if(typeof(buttons_reqire_plugin[v])!='undefined'){types[type].plugins+=(' '+v);}}});}
config=$.extend(config,types[type]);tinyMCE.init(config);var onLoadMce=function(){setTimeout(function(){if(!$('.mce-tinymce').length){onLoadMce();}else{$('.mce-tinymce iframe').contents().click(function(){$(this).find('.mce-content-body').focus();});}},100);};onLoadMce();}
$(function(){window.setInterval(checkLazyLoadEditor,500);});function insertEditorHelper(element){var editorHelper='<div class="cabinet-alert cabinet-alert-red" style="overflow-x: auto; margin-top: 2em"><span class="cabinet-alert-icon"></span><p>Для копирования текста с других источников рекомендуем использовать комбинации клавиш (Ctrl-C, Ctrl-V, Ctrl-X или Cmd в Mac OS).</p><p><strong>Важно!</strong> Скопированные изображения не будут сохранены. Добавляйте изображения при помощи функции Добавить/изменить изображение в панели инструментов текстового редактора.</p></div>';var $errorBlock=$(element).next();if($errorBlock.hasClass('p_error_block')){$(editorHelper).insertAfter($errorBlock);}else{$(editorHelper).insertAfter($(element));}}
String.prototype.chunk=function(n){if(typeof n=='undefined')n=2;return this.match(RegExp('.{1,'+n+'}','g'));};function addIndicator(obj,addClass){var id='ajax_'+Math.round(Math.random()*100000);$(obj).addClass('b-ajax-indicator-wrap');addClass=typeof(addClass)=='undefined'?'':addClass;$(obj).append('<div class="b-ajax-indicator" style="width: 100%; height: 100%" id="'+id+'"><img src="/pics/ajax_indicator.gif" class="b-ajax-indicator__img '+addClass+'" width="16" height="16"/></div>');return id;}
function removeIndicator(id){$('#'+id).remove();}
function nl2br(str){return str.replace(/([^>])\n/g,'$1<br/>');}
function clone(o){if(!o||"object"!==typeof o){return o;}
var c="function"===typeof o.pop?[]:{};var p,v;for(p in o){if(o.hasOwnProperty(p)){v=o[p];if(v&&"object"===typeof v){c[p]=clone(v);}
else c[p]=v;}}
return c;}
$(".contact_firm").live('click',function(){if($(this).attr('href')!==undefined&&$(this).attr('href')!='#'){return true;}
addCodesDropdown();$.ajax({url:"/ajax/ContactNow/Handle/html",type:'post',dataType:"html",data:({id:$(this).attr("data-name"),ref:$(this).attr("data-alt"),type:$(this).attr("data-type")=='product'?'product':'firm'}),success:function(data){if($('#contact-now-dialog').length==0){$('body').append('<div id="contact-now-dialog" title="Связаться с компанией" class="adaptive-dialog"></div>');}
$("#contact-now-dialog").html(data).dialog({modal:true,height:'auto',maxHeight:'inherit',width:'750px'}).dialog("open");}});return false;});function check_date(d,m,y){return m>0&&m<13&&y>0&&y<32768&&d>0&&d<=(new Date(y,m,0)).getDate();}
function check_birthday(d,m,y){return m>0&&m<13&&y>1900&&y<(new Date().getFullYear()-10)&&d>0&&d<=(new Date(y,m,0)).getDate();}
if(!Array.prototype.filter){Array.prototype.filter=function(fun){"use strict";if(this==null)
throw new TypeError();var t=Object(this);var len=t.length>>>0;if(typeof fun!="function")
throw new TypeError();var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisp,val,i,t)){res.push(val);}}}
return res;};}
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');};String.prototype.ltrim=function(){return this.replace(/^\s+/,'');};String.prototype.rtrim=function(){return this.replace(/\s+$/,'');};String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,'').replace(/\s+/g,' ');};window.array_unique=function(target){var u={},a=[];for(var i=0,l=target.length;i<l;++i){if(u.hasOwnProperty(target[i])){continue;}
a.push(target[i]);u[target[i]]=1;}
return a;};function sc_checkField(value,type,minL,maxL){var regExp;switch(type){case'quantity':regExp=/^[\d]+([\.,]{1}[\d]{1,3})?$/;if(!regExp.test(value))return'Введите корректное число.';if(parseFloat(value)<minL)return'Минимальный объем заказа '+minL;if(parseFloat(value)>maxL)return'Максимальный объем заказа '+maxL;return'';break;case'email':regExp=/^[\d\wа-яА-Я\._-]+@[\w\._а-яА-Я-]+(\.[\wа-яА-Я-]{2,6})$/;if(regExp.test(value))return'';else return'Введите корректный email';break;case'postcode':regExp=new RegExp('^[0-9]{'+minL+','+maxL+'}$');if(regExp.test(value))return'';else return'Почтовый индекс должен содержать от '+minL+' до '+maxL+' цифр';break;case'telephone':case'string':default:if(value.length>=minL&&value.length<=maxL)return'';else return'Данное поле должно содержать от '+minL+' до '+maxL+' символов. Вы использовали '+value.length;break;}}
function translitIt(str){var source=str.toLowerCase();var dictionary={"–":"-"," ":"-","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"shch","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya",",":"","№":"n","є":"e","ї":"i","і":"i","ґ":"g",'%':''};return source.replace(/[\s\S]/g,function(x){if(dictionary.hasOwnProperty(x)){return dictionary[x];}
return x;});}
function number_format(number,decimals,dec_point,thousands_sep){number=(number+'').replace(/[^0-9+\-Ee.]/g,'');var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousands_sep==='undefined')?',':thousands_sep,dec=(typeof dec_point==='undefined')?'.':dec_point,s='',toFixedFix=function(n,prec){var k=Math.pow(10,prec);return''+(Math.round(n*k)/k).toFixed(prec);};s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}
if((s[1]||'').length<prec){s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0');}
return s.join(dec).replace(/(\.00)/gi,'');}
(function($){$(document).on('blur','#ofNumber, #fbNumber, #ocNumber',function(){var phone=$(this).val();var pos=phone.indexOf('0');if(pos==0){$(this).val(phone.substring(1));}});})(jQuery);$(document).on('click','.scroll_to',function(){var $element=$($(this).data("selector"));if($element.length>0){$.scrollTo($element,500);}
return true;});(function(){var is_more=false;$.fn.sexproduct=function(){$('body').append('<div id="sex-product" title="Просмотра товаров рубрики Интимные товары">\
                <h3>Для просмотра интимных товаров, подтвердите, что вам больше 18 лет.</h3>\
            </div>');$('#sex-product').dialog({minWidth:800,height:'auto',resizable:false,modal:true,dialogClass:'sex-products',closeOnEscape:false,create:function(){$(this).closest(".ui-dialog").find(".ui-dialog-buttonset .ui-button").attr("class","btn-b").removeClass('ui-state-focus');},beforeClose:function(event,ui){if(!is_more){document.location.href="/";}},buttons:[{text:"Да, мне больше 18 лет",click:function(){is_more=true;document.cookie="_sp=true; path=/; domain=."+document.domain;$(this).dialog("close");}},{text:"Нет, мне меньше 18 лет",click:function(){document.location.href="/";}}]});return this;}})();var zkTrackConstants={putInBasket:{ga:{method:'send',hitType:'event',eventCategory:'Order',eventAction:'ga-put-in-basket'},ym:['ym-put-in-basket']},shopcartOrderGoal:{ga:{method:'send',hitType:'event',eventCategory:'Order',eventAction:'ga-shopcart-order-goal'},ym:['ym-shopcart-order-goal']},shopcartPreorderGoal:{ga:{method:'send',hitType:'event',eventCategory:'Order',eventAction:'ga-shopcart-preorder-goal'},ym:['ym-shopcart-preorder-goal']},oneclickPreactionGoal:{ga:{method:'send',hitType:'event',eventCategory:'Contact',eventAction:'ga-oneclick-preaction-goal'},ym:['ym-oneclick-preaction-goal']},oneclickGoal:{ga:{method:'send',hitType:'event',eventCategory:'Contact',eventAction:'ga-oneclick-goal'},ym:['ym-oneclick-goal']},messageSentGoal:{ga:{method:'send',hitType:'event',eventCategory:'Contact',eventAction:'ga-message-sent-goal'},ym:['ym-message-sent-goal']},messageSentForm:{ga:{method:'send',hitType:'event',eventCategory:'Contact',eventAction:'ga-message-sent-form'},ym:['ym-message-sent-form']},shopcartOrderAddMore:{ga:{method:'send',hitType:'event',eventCategory:'Order',eventAction:'ga-shopcart-order-AddMore'},ym:['ym-shopcart-order-AddMore']},tryRegistrationCustomer:{ym:['reguser']},registrationCustomer:{ym:['reguser_steptwo']},tryRegistrationFirm:{ym:['regfirm']},firm_try:{ym:['regfirm']},registrationFirm:{ym:['regfirm_steptwo']},phoneShowProductPage:{ym:['phone_show']},callMeProductPage:{ym:['call_me']},orderProductProductPage:{ym:['order_product']},preOrderProductPortal:{ym:['pre_order_product_portal']},orderEndProductPortal:{ym:['order_end_product_portal']},allCategory:{ym:['all_category']}};function trackTargetYM(tEvents,counters){if(counters.length==0)return;tEvents.forEach(function(te){counters.forEach(function(y){if(typeof(te)==='string'&&typeof(y)==='object'){if(window.ZK_TRACK_DEBUG_MODE!=undefined&&window.ZK_TRACK_DEBUG_MODE)console.log('YM TRACK CODE - '+te);y.reachGoal(te);}});});}
function trackTatgetGA(trackData,g){if(((typeof(g)==='function')||(typeof(g)==='object'))&&typeof(trackData)==='object'){var trackers=g.getAll();if(trackers.length==0)return;if(trackData.method=='send'){trackers.forEach(function(tracker){if(window.ZK_TRACK_DEBUG_MODE!=undefined&&window.ZK_TRACK_DEBUG_MODE)console.log('GA TRACK CODE - '+trackData.eventAction);tracker.send(trackData.hitType,trackData.eventCategory,trackData.eventAction);});}}}
function trackTargetAll(target){if(target!=undefined){var targets=target.split(',');targets.forEach(function(tItem){var itemData=zkTrackConstants[tItem.trim()];if(itemData!==undefined){Object.keys(zkTrackServicesConstants).forEach(function(tService){if(itemData[tService]!=undefined){zkTrackServicesConstants[tService].serviceTrackFunction(itemData[tService],zkTrackServicesConstants[tService].serviceObject);}});}});}}
$(document).on('load_ga',function(){zkTrackServicesConstants.ga.serviceObject=ga;});$(document).ready(function(){zkTrackServicesConstants.ga.serviceTrackFunction=trackTatgetGA;zkTrackServicesConstants.ym.serviceTrackFunction=trackTargetYM;$(document).on('click','.zk-track-target',function(){var target=$(this).data('track-target');trackTargetAll(target);});});function trackRegistration(g,y,type){if(typeof(type)=='undefined'){type='firm';}
if(type=='firm'){if(typeof(g)=='string'){var nameT='newTracker_trackRegistration_'+new Date().getTime();ga('create',g,'auto',nameT);ga(nameT+'.send','pageview','/registration_end_button_virtual');}
if(typeof(window.yaMetrika)=='object'){y.hit('/registration_end_button_virtual','Кнопка "Зарегистрироваться"');trackTargetAll('registrationFirm');}}else if(type=='firm_try'){if(typeof(window.yaMetrika)=='object'){trackTargetAll('tryRegistrationFirm');}}else if(type=='user'){if(typeof(window.yaMetrika)=='object'){trackTargetAll('registrationCustomer');}}else if(type=='user_try'){if(typeof(window.yaMetrika)=='object'){trackTargetAll('tryRegistrationCustomer');}}}
(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga(function(){$(document).trigger('load_ga');});$(function(){$(document).on("click",".track-event",function(){var category=$(this).data('category');var action=$(this).data('action');var label=$(this).data('label');var ua=$(this).data('ua');if(ua!=undefined){ga('create',ua,'auto','company');ga('company.send','event',category,action,label);}
ga('create',$(this).data('siteua'),'auto','siteTracker_track_event');ga('siteTracker_track_event.send','event',category,action,label);$(this).removeClass("track-event");});$(document).on("click",".seolink-labeled",function(){if(typeof(yaMetrika)=='object'&&typeof(yaMetrika.reachGoal)=='function'){yaMetrika.reachGoal('seometka');}});});function roundPrice(price){if(price>100){price=price<1000?(parseFloat(price)).toFixed(1):(parseFloat(price)).toFixed(0);}
return price;}
$(function(){$('.b-seolinks #seo-link-see-more').on('click',function(e){var $el=$(this);var data=$el.data();var openened=$el.hasClass('opened');if(!openened){$.ajax({url:"/ajax/Categories/GetMoreSeoLinks/",type:"post",dataType:"JSON",data:({'cat':data.cat,'id':data.id,'area_id':data.areaid}),success:function(data){$($('#tmpl-seolink').tmpl(data)).insertBefore($el.closest('li'));}});$(this).addClass('opened').text('Скрыть');}else{$('.link-appended').remove();$(this).removeClass('opened').text('Показать все');}
e.preventDefault();});$(document).on('click','.b-click2call__button',function(){if('sipClient'in window&&!window.sipClient.closed){window.sipClient.focus();}else{var cid=$(this).data('cid');var page=$(this).data('page');var recipients=$(this).data('recipients');var width=490;var height=150+recipients.length*100;var top=(window.screen.availHeight-height-20)/2;var left=(window.screen.availWidth-width)/2;var address='//'+SITE+'/click2call/?page='+page+'&width='+width+'&height='+height+'&recipients='+Base64.encode(JSON.stringify(recipients))+'&cid='+Base64.encode(cid);var params='top='+top+',left='+left+',directories=no,fullscreen=no,location=no,resizable=1,menubar=no,scrollbars=no,status=no,titlebar=no,width='+width+',height='+height+',scroll=0,menu=0';window.sipClient=window.open(address,'sipClient',params);}
return false;});});$(function(){$(".catalog_stars_desc, .b-tariff:not(.minisite)").attr("title","Подробнее о рейтинге");$(document).on("click",".catalog_stars_desc, .b-tariff",function(){var $this=$(this);var siteLanguage,tariffDialogTitle="Подробнее о рейтинге";if($this.hasClass('b-tariff')){siteLanguage=$this.data('language');tariffDialogTitle=$this.prop('title');}
if($('#catalog_stars_desc_dialog').length==0){$.ajax({url:'/ajax/Catalog/CatalogStarsDesc/html/',type:"post",dataType:"html",async:false,data:{lang:siteLanguage},success:function(data){if(typeof window.environment==='string'&&window.environment=='MINISITE'){$('body').append('<div data-title="'+tariffDialogTitle+'" class="site-rating">'+data+'</div>');$('.site-rating').zkModal();}
else{$('body').append('<div id="catalog_stars_desc_dialog" title="'+tariffDialogTitle+'" class="adaptive-dialog"></div>');$("#catalog_stars_desc_dialog").html(data).dialog({modal:true,height:650,width:'750px'});}}});}
else{$("#catalog_stars_desc_dialog").dialog("open");}
return false;});});if(!Object.keys){Object.keys=function(o){if(o!==Object(o))
throw new TypeError('Object.keys called on a non-object');var k=[],p;for(p in o)if(Object.prototype.hasOwnProperty.call(o,p))k.push(p);return k;};}
$(function(){$(document).on('focusin',function(e){if($(e.target).closest(".mce-window").length){e.stopImmediatePropagation();}});});$(function(){$(document).on("click",".add-simple-comment",function(){if($("#simple-comment-form-dialog").length==0){$("body").append('<div title="Добавление комментария" id="simple-comment-form-dialog" class="adaptive-dialog"></div>');$("#simple-comment-form-dialog").dialog({width:660,height:500,modal:true,autoOpen:false});}
$.ajax({url:"/ajax/SimpleComments/GetCommentForm/html/",type:"post",dataType:"html",data:({idcompany:$(this).data("idcompany"),item_id:$(this).data("itemid"),type:$(this).data("type")}),success:function(data){$("#simple-comment-form-dialog").html(data).dialog("open");}});return false;});});var touchmove_handler=function(e){if(!$('.scrollable').has($(e.target)).length){e.preventDefault();}};function control_scroll(el,enabled){var mobile=false;if(enabled){$('body,html').removeClass('stop-scrolling');$(el).removeClass("scrollable");if(mobile){document.removeEventListener('touchmove',touchmove_handler,true);}}else{$('body,html').addClass('stop-scrolling');$(el).addClass("scrollable");if(mobile){document.addEventListener('touchmove',touchmove_handler,true);}}}
$(function(){var last_open=null;var fixed_height_dialogs=function(d,in_h){var h=in_h;if('waitlist_dialog'==d.attr("id")){h=520;}else if('oneclick-dialog'==d.attr("id")){h=$(window).width()<=320?365:340;}else if('wishlist_dialog'==d.attr("id")){h=420;}else if('contact-now-dialog'==d.attr("id")){h=620;}else if('worktime-dialog'==d.attr("id")){h=500;}
if($(window).height()<h){h=$(window).height()-10;}
return h;};var adaptive_dialog=function(d){if(undefined==d.data("origin_width")){d.data("origin_width",parseInt(d.dialog("option","width"),10));d.data("origin_height",d.dialog("option","height"));d.data("origin_pos",d.dialog("option","position"));}
var ow=d.data("origin_width"),oh=d.data("origin_height"),h=d.data("origin_height"),w;var pos=null;if($(window).width()<=ow){w=$(window).width()-15;if(oh!='auto'&&$(window).height()<parseInt(h,10)){h=$(window).height()-10;}else{h=$(window).height()-10;h=fixed_height_dialogs(d,h);}
pos={my:"center",at:"center",of:window};}else{w=ow;if($(window).height()<480){h=$(window).height()-10;}
if($(window).width()<=1024){h=$(window).height()-20;pos={my:"center",at:"center",of:window};h=fixed_height_dialogs(d,h);}else{pos=d.data("origin_pos");}}
d.dialog("option",{width:w,height:h});if(pos){d.dialog("option",{position:pos});}
last_open=d;if($(window).width()<=1024){$('body').addClass('stop-scrolling');}else{$('body').removeClass('stop-scrolling');}};$(document).on("dialogopen",".adaptive-dialog",function(event,ui){var d=$(event.target);setTimeout(function(){adaptive_dialog(d);},10);if(historyBack){d.historyBackHelper=new HistoryBackDialogCloseHelper({close:function(e){d.dialog('close');}});setTimeout(function(){d.historyBackHelper.replaceHistoryStart();},0);}}).on("dialogclose",function(event,ui){$('body').removeClass('stop-scrolling');if(last_open&&historyBack&&last_open.hasOwnProperty('historyBackHelper')){last_open.historyBackHelper.replaceHistoryEnd();}});$(window).on('resize orientationchange',function(){if(last_open&&last_open.dialog("isOpen")){adaptive_dialog(last_open);}});var historyBack=typeof history.pushState!=='undefined'&&typeof history.state!=="unknown"&&history.state!=='undefined'&&$(window).width()<COLLAPSE_WIDTH;});$(function(){function adaptive_menu(selector){var overlay;var container;var touchSupport='ontouchstart'in document.documentElement;var isOpening=false;var close=function(el){overlay.off();if(!$(selector+".adaptive-active").length)return;$(".adaptive-active").removeClass("adaptive-active");var w=container.width();container.animate({left:"-="+w},250,function(){container.hide();overlay.hide();});control_scroll(container,true);};var open=function(el){isOpening=true;$(el).addClass("adaptive-active");overlay.css({width:$(document).width(),height:$(document).height(),top:0,left:0}).show(0).animate({opacity:"0.2"},50);var w=container.width();container.css({top:0,left:-w}).show(0);if(container.get(0).scrollHeight>$(window).height()){container.addClass("has-scroll");}else{container.removeClass("has-scroll");}
container.animate({left:"+="+w},250,function(){control_scroll(container,false);overlay.on("click",overlay_close_handler);isOpening=false;});};var overlay_close_handler=function(event){event.preventDefault();event.stopPropagation();if(isOpening)return;close();};$(document).on("click tap",selector,function(event){if($('#getMainMenu').hasClass('b-get-main-menu__link_opened')){return;}
if(isOpening)return;event.stopPropagation();event.preventDefault();var $this=$(event.currentTarget);open($this);});var init=function(){if(!overlay){overlay=$("<div class='side-menu-overlay'></div>").hide();$(document.body).append(overlay);container=$("<div class='side-menu-container'></div>").hide();$(document.body).append(container);container.append($(".main-menu").clone());var menu=container.find("ul").removeClass("main-menu").addClass("side-menu");if($(".adaptive-menu-content").length){menu.append('<li class="separator"></li>');menu.append($(".adaptive-menu-content li").clone().removeClass("cabinet-left-menu-item cabinet-left-menu-item-selected"));}
menu.append('<li class="separator"></li>');var user_menu=$(".enter-links li").clone();user_menu.first().addClass("main-menu-user1");user_menu.last().addClass("main-menu-user2");menu.append(user_menu);$(document).trigger("post-compose-menu",container,menu);container.on('swipeleft',function(event){close();});$(window).on("resize orientationchange",function(){if(overlay.is(":visible")){overlay.css({width:$(document).width(),height:$(document).height()})}});}};init();}
adaptive_menu('.adaptive-menu-button');});var HistoryBackDialogCloseHelper=function(options){var self=this;var defaults={close:function(){self.replaceHistoryEnd();}};this.config=$.extend(defaults,options);this.replaceHistoryStart=function(){self.partial_href=location.pathname+location.search;self.href=location.href;self.stopped=false;history.replaceState({replacer:1},document.title,self.partial_href+"#!/dialog-open");history.pushState({replaced:1},document.title,self.href);window.addEventListener("popstate",self.popstateHistory,false);};this.replaceHistoryEnd=function(){if(self.stopped)return;if(history.state&&history.state.hasOwnProperty('replaced')){history.back();}};this.popstateHistory=function(e){self.stopped=true;window.removeEventListener("popstate",self.popstateHistory,false);if(location.hash==="#!/dialog-open"){history.replaceState(null,document.title,self.href);self.config.close();}};};(function(){$(function(){var $select=$('.cabinet-select[name="show_variants"]');var $checkboxWrapper=$('.indexing_variants-wrapper');$select.on('change',function(){$checkboxWrapper
[!parseInt($(this).val())?'addClass':'removeClass']('hidden');});if(typeof DEMO_DESIGN_IDCOMPANY!='undefined'){if(DEMO_DESIGN_IDCOMPANY==IDCOMPANY){var attachDemo=function(){$('a').each(function(){if(!/\?design_editor/.test($(this).attr('href'))){if(!/\?/.test($(this).attr('href'))){$(this).attr('href',$(this).attr('href')+'?'+DEMO_DESIGN_QUERY)}else{$(this).attr('href',$(this).attr('href')+'&'+DEMO_DESIGN_QUERY);}}});}
$(document).ajaxSuccess(function(){attachDemo();});attachDemo();}}});})();function isElementInView(element,fullyInView){if($(element).length==0)return;var pageTop=$(window).scrollTop();var pageBottom=pageTop+$(window).height();var elementTop=$(element).offset().top;var elementBottom=elementTop+$(element).height();if(fullyInView===true){return((pageTop<elementTop)&&(pageBottom>elementBottom));}else{return((elementTop<=pageBottom)&&(elementBottom>=pageTop));}}
function onElementInView(element,callback){var interval;if($(element).length==0)return;interval=setInterval(function(){if(isElementInView(element)){clearInterval(interval);callback&&callback();}},300);}
function loadRecentlyViewedGoods(params,onSuccess){return $.ajax({type:"POST",url:"/ajax/goods-recently-viewed/",data:params,dataType:"JSON",success:function(response){if(response&&response!==null){onSuccess&&onSuccess(response);}},});}
function lazyLoadRecentlyViewedGoods(selector,onSuccess){onElementInView(selector,function(){loadRecentlyViewedGoods($(selector).data(),onSuccess)});}
function TemplateEngine(html,options){var re=/<%([^%>]+)?%>/g,reExp=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,code='var r=[];\n',cursor=0,match;var add=function(line,js){js?(code+=line.match(reExp)?line+'\n':'r.push('+line+');\n'):(code+=line!=''?'r.push("'+line.replace(/"/g,'\\"')+'");\n':'');return add;}
while(match=re.exec(html)){add(html.slice(cursor,match.index))(match[1],true);cursor=match.index+match[0].length;}
add(html.substr(cursor,html.length-cursor));code+='return r.join("");';return new Function(code.replace(/[\r\t\n]/g,'')).apply(options);}
function show_form_errors(errors,context){var first_error=null;for(var fieldname in errors){if(!first_error)first_error=fieldname;show_error(context.find('#error_'+fieldname),errors[fieldname]);}
scroll_to_error(first_error);}
$('.privacy-policy-link').live('click',function(e){e.preventDefault();if(!$('#privacyPolicyDialog').length){var url=$(this).attr('href');$.ajax({url:"/controller/urlloader.php?g="+url+"&isa=1",method:'GET',crossDomain:true,dataType:'HTML',success:function(data){$(document.body).append('<div id="privacyPolicyDialog" title="Политика конфиденциальности" class="adaptive-dialog">'+data+'</div>');$('#privacyPolicyDialog').dialog({autoOpen:true,width:900,height:800,modal:true,open:function(){window.cartDialogLock=true;var dialogZIndex=$('#privacyPolicyDialog').parent().css('z-index');$('.ui-widget-overlay').each(function(){var $element=$(this);if((parseInt($element.css('z-index'))+1)==dialogZIndex){$element.off('click touchstart touchend touchmove touchcancel');$element.on('click touchend',function(event){event.stopPropagation();event.preventDefault();$('#privacyPolicyDialog').dialog('close');return false;});$element.on('touchstart touchmove touchcancel',function(event){event.stopPropagation();event.preventDefault();return false;});}});},beforeClose:function(event,ui){setTimeout(function(){window.cartDialogLock=false;},500);},close:function(){$('#privacyPolicyDialog').dialog("destroy").remove();}});}});}
else{$('#privacyPolicyDialog').dialog('open');}});function escapeHtml(text){var map={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'};return text.replace(/[&<>"']/g,function(m){return map[m];});}
function checkColumnAttributesLayout(attributes){if(attributes.multi_column_catalog===1){return true;}
return checkAttributes(attributes.values);}
function checkAttrLength(attributeName){var maxAttrNameLength=12;return(typeof attributeName==='string'&&attributeName.length>maxAttrNameLength);}
function checkAttributesCount(attributes){var maxAttrCountInColumn=6;return attributes.length>=maxAttrCountInColumn;}
function checkAttributes(attributes){if(checkAttributesCount(attributes)){for(var i=0;i<attributes.length;i++){if(checkAttrLength(attributes[i].value)){return false;}}}
return checkAttributesCount(attributes);}
function copyToClipboard(text){var fakeElem=document.createElement('textarea');fakeElem.style.fontSize='12pt';fakeElem.style.border='0';fakeElem.style.padding='0';fakeElem.style.margin='0';fakeElem.style.position='absolute';fakeElem.style['left']='-9999px';var yPosition=window.pageYOffset||document.documentElement.scrollTop;fakeElem.style.top=yPosition+'px';fakeElem.setAttribute('readonly','');fakeElem.value=text;document.body.appendChild(fakeElem);fakeElem.setSelectionRange(0,fakeElem.value.length);fakeElem.focus();document.execCommand('copy');fakeElem.blur();window.getSelection().removeAllRanges();document.body.removeChild(fakeElem);}
function escapeQuotes(text){return text.replace(/["]/g,'&quot;').replace(/[']/g,'&#039;');}
function escapeUrl(text){return escapeQuotes(text.replace(/[&]/g,'&amp;'));}
function decodeHtml(html){var txt=document.createElement("textarea");txt.innerHTML=html;return txt.value;}
function stripTags(html){var div=document.createElement("div");div.innerHTML=html;return div.textContent||div.innerText||"";}
function isMobile(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;})(navigator.userAgent||navigator.vendor||window.opera);return check;}
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){for(var d="",c,a,f,g,h,e,i=0,b=Base64._utf8_encode(b);i<b.length;)c=b.charCodeAt(i++),a=b.charCodeAt(i++),f=b.charCodeAt(i++),g=c>>2,c=(c&3)<<4|a>>4,h=(a&15)<<2|f>>6,e=f&63,isNaN(a)?h=e=64:isNaN(f)&&(e=64),d=d+this._keyStr.charAt(g)+this._keyStr.charAt(c)+this._keyStr.charAt(h)+this._keyStr.charAt(e);return d},decode:function(b){for(var d="",c,a,f,g,h,e=0,b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");e<b.length;)c=this._keyStr.indexOf(b.charAt(e++)),a=this._keyStr.indexOf(b.charAt(e++)),g=this._keyStr.indexOf(b.charAt(e++)),h=this._keyStr.indexOf(b.charAt(e++)),c=c<<2|a>>4,a=(a&15)<<4|g>>2,f=(g&3)<<6|h,d+=String.fromCharCode(c),g!=64&&(d+=String.fromCharCode(a)),h!=64&&(d+=String.fromCharCode(f));return d=Base64._utf8_decode(d)},_utf8_encode:function(b){for(var b=b.replace(/\r\n/g,"\n"),d="",c=0;c<b.length;c++){var a=b.charCodeAt(c);a<128?d+=String.fromCharCode(a):(a>127&&a<2048?d+=String.fromCharCode(a>>6|192):(d+=String.fromCharCode(a>>12|224),d+=String.fromCharCode(a>>6&63|128)),d+=String.fromCharCode(a&63|128))}
return d},_utf8_decode:function(b){for(var d="",c=0,a=c1=c2=0;c<b.length;)a=b.charCodeAt(c),a<128?(d+=String.fromCharCode(a),c++):a>191&&a<224?(c2=b.charCodeAt(c+1),d+=String.fromCharCode((a&31)<<6|c2&63),c+=2):(c2=b.charCodeAt(c+1),c3=b.charCodeAt(c+2),d+=String.fromCharCode((a&15)<<12|(c2&63)<<6|c3&63),c+=3);return d}};
(function($){$.fn.report=function(options){var defaults={'type':'success','time':1000,'animationSpeed':300,'callback':''};var config=$.extend(defaults,options);var reportEl=$('#zk-report-block');reportEl.removeClass();reportEl.addClass("block-message block-message-"+config.type);reportEl.children('span:last').html(config.message);var reportWidth=reportEl.width();var _left=$(document).scrollLeft();var _width=$(document).width();$(reportEl).css({position:'fixed',top:0,left:_left+((_width-reportWidth)/2)}).click(function(){$(reportEl).slideUp(config.animationSpeed);});$(reportEl).slideDown(config.animationSpeed,function(){if(config.time>0){window.setTimeout(function(){$(reportEl).slideUp(config.animationSpeed);},config.time);}});if(config.callback.length>0){$.globalEval("$(function(){"+config.callback+"})");}
window.setTimeout(function(){var fn=function(e){$(reportEl).slideUp(config.animationSpeed,function(){$(document).unbind('click',fn);});};$(document).bind('click',fn);},300);return this;};$.fn.reportTo=function(options){var defaults={'type':'true'};var config=$.extend(defaults,options);$.cookie('new_report_text',config.message);$.cookie('new_report_type',config.type);document.location=config.uri;return this;};$.fn.cabinetReport=function(options){if($('#cabinet-report-block').length==0){$(document.body).append('<div class="cabinet-block-report cabinet-block-report-success" id="cabinet-report-block"><a  id="cabinet-report-block-close-link" class="cabinet-block-report-close"></a><span></span></div>');$('#cabinet-report-block').show(0).fadeOut(0);}
var defaults={'message':'','type':'success','animationSpeed':300,'autoHide':0,'button':false,'style':false,'onClose':function(){}};var config=$.extend(defaults,options);var reportEl=$('#cabinet-report-block');reportEl.width("auto");reportEl.removeClass();reportEl.addClass("cabinet-block-report cabinet-block-report-"+config.type);var d=$('#cabinet-report-block-close-link');reportEl.empty().append(d).append('<span class="text-m">'+config.message+'</span>');if(config.style){reportEl.find('.text-m').css(config.style);}
if(config.button){var $elButtons=$('<div />').addClass('buttons-block');var $spanY=$('<span />').addClass('b-font-icon__ok');var $buttonY=$('<button />').addClass('yes').attr('id','cabinet-report-block-yes-btn').append($spanY).append(config.button);var $buttons=$elButtons.append($buttonY).find('button').addClass('btn-b');reportEl.append($elButtons);}else{reportEl.find(".buttons-block").remove();}
reportEl.css("position","absolute");reportEl.css("top",(($(window).height()-reportEl.outerHeight())/2)+$(window).scrollTop()+"px");reportEl.css("left",(($(window).width()-reportEl.outerWidth())/2)+$(window).scrollLeft()+"px");reportEl.fadeIn(config.animationSpeed);if(config.autoHide>0){reportEl.data('autoHide',setTimeout(function(){reportEl.fadeOut(300);$(document.body).off('click',fn);reportEl.removeData('autoHide');$('.cabinet-block-report').remove();config.onClose();},config.autoHide));}
var fn=function(e){if($(e.target).parent('.zk-tabs-single-tab').length||$(e.target).hasClass('cabinet-report-trigger')){return;}
if((e.target.id!==reportEl.attr('id')&&$(e.target).parents('#'+reportEl.attr('id')).length==0)){reportEl.fadeOut(300);$(document.body).off('click',fn);clearTimeout(reportEl.data('autoHide'));$('.cabinet-block-report').remove();reportEl.removeData('autoHide');config.onClose();}else{if(e.target.id=='cabinet-report-block-close-link'||e.target.id=='cabinet-report-block-yes-btn'){reportEl.fadeOut(300);$(document.body).off('click',fn);clearTimeout(reportEl.data('autoHide'));reportEl.removeData('autoHide');$('.cabinet-block-report').remove();config.onClose();return false;}}};$(document.body).on('click',fn);return this;};$.fn.cabinetConfirm=function(options){this._result=false;this._isOpened=false;var defaults={'message':'Вы уверены','type':'confirm','animationSpeed':300,'textYes':'Да','textNo':'Нет','blockOverlay':false,'requestComment':false,'rqCRequire':false,'rqCPlaceholder':'','rqCValue':'','rqCMaxlength':300,'parentBlock':false,callbackFuncY:function(){return true;},callbackFuncN:function(){return true;}};var config=$.extend(defaults,options);var $pbw=$(window);var $pbd=$(document);var $pbb=$('body');if(config.parentBlock!=false){$pbw=config.parentBlock;$pbb=config.parentBlock;$pbd=config.parentBlock;}
var $cabinetReportBlock=$('#cabinet-report-block');if($cabinetReportBlock.length==0){$pbb.append('<div class="cabinet-block-report cabinet-block-report-success" id="cabinet-report-block"><a  id="cabinet-report-block-close-link" class="cabinet-block-report-close"></a><span></span></div>');$cabinetReportBlock.show(0).fadeOut(0);}
var reportEl=$('#cabinet-report-block');var inst=this;var $elButtons=$('<div />').addClass('buttons-block');var $textarea=$('<textarea />').addClass('confirm-textarea').attr('placeholder',config.rqCPlaceholder).css({'width':'100%','height':'80px','margin-top':'14px'}).attr('maxlength',config.rqCMaxlength);if(config.rqCValue!=''){$textarea.val(config.rqCValue);}
var $elText=$('<div />').addClass('text-block').append($textarea);var $spanY=$('<span />').addClass('b-font-icon__ok');var $buttonY=$('<button />').addClass('yes').append($spanY).append(config.textYes);var $spanN=$('<span />').addClass('b-font-icon__cancel');var $buttonN=$('<button />').addClass('no').append($spanN).append(config.textNo);var d=$('#cabinet-report-block-close-link');var $buttons=$elButtons.append($buttonY).append($buttonN).find('button').addClass('btn-b');var $ovl;this.show=function(){inst._isOpened=true;inst._isCanceled=false;inst._textComment='';reportEl.width("auto");reportEl.removeClass();reportEl.addClass("cabinet-block-report cabinet-block-report-"+config.type);reportEl.empty().append(d).append(config.message);reportEl.css("position","absolute");reportEl.css("top",(($pbw.height()-reportEl.outerHeight())/2)+$pbw.scrollTop()+"px");reportEl.css("left",(($pbw.width()-reportEl.outerWidth())/2)+$pbw.scrollLeft()+"px");reportEl.fadeIn(config.animationSpeed);if(config.requestComment!=false){reportEl.append($elText);}
reportEl.append($elButtons);$buttons.on('click',function(){var $butCurrent=$(this);inst._result=$butCurrent.hasClass('yes');inst._isCanceled=$butCurrent.hasClass('no');if(config.requestComment!=false){var $elTextarea=$butCurrent.closest('.cabinet-block-report-confirm').find('.confirm-textarea');inst._textComment=$elTextarea.val();if(config.rqCRequire!=false&&inst._textComment==''&&inst._result){$elTextarea.animate({backgroundColor:"#f22"},200).animate({backgroundColor:"#fff"},200);return false;}}
inst.hide();});inst._addOverley();$pbb.off('click',this._clickFn).on('click',this._clickFn);$(window).mousewheel(function(event){if(inst._isOpened&&config.blockOverlay){event.preventDefault();}});$(document).keyup(function(e){if(e.keyCode==27){$buttonN.trigger('click');}});};this._addOverley=function(){if($('#overlay-confirm').length==0){$ovl=$('<div />');$ovl.attr('id','overlay-confirm');var $body=$pbb;$body.append($ovl);$body.css({"overflow":'hidden','padding-right':($pbw.width()>480)?'15px':0});}else{$ovl=$('#overlay-confirm')[0];}
if(config.parentBlock!=false){$('html, body').animate({scrollTop:$("#cabinet-report-block").offset().top},200);}};this.hide=function(){inst._isOpened=false;reportEl.fadeOut(300);(inst._result)?config.callbackFuncY(inst._textComment):config.callbackFuncN(this._isCanceled);$($ovl).remove();var $body=$pbb;$body.removeAttr('style');$cabinetReportBlock.remove();$('.cabinet-block-report').remove();$body.off('click',this._clickFn);};this._clickFn=function(e){if((e.target.id!==reportEl.attr('id')&&$(e.target).parents('#'+reportEl.attr('id')).length==0)&&!config.blockOverlay){inst.hide();}else if(e.target.id=='cabinet-report-block-close-link'){inst.hide();return false;}};this.show();return this;};$(function(){$('body').append('<div id="zk-report-block" class="block-message"><span class="ico"></span><span></span></div>');$('#zk-report-block').show(0).slideUp(0);});})(jQuery);
(function($){$.fn.rating=function(options,handler){var settings={handler:handler,maxvalue:5,curvalue:0,readonly:false,show_cancel:false};if(options){$.extend(settings,options);}
if(handler==null&&!settings.readonly){return;}
$.extend(settings,{cancel:(settings.maxvalue>1)});var container=$(this);$.extend(container,{averageRating:settings.curvalue,handler:settings.handler});for(var i=0;i<=settings.maxvalue;i++){if(i==0){if(settings.show_cancel==true){var div='<div class="j-cancel"><a href="#0" title="Отменить">Отменить</a></div>';container.append(div);}}else{var title=((!settings.readonly)?'title="Поставить '+i+'/'+settings.maxvalue+'"':'');var div='<div class="j-star"><a href="#'+i+'" '+title+'>'+i+'</a></div>';container.append(div);}}
var stars=$(container).children('.j-star');var cancel=$(container).children('.j-cancel');if(!settings.readonly){stars.mouseover(function(){event.drain();event.fill(this);}).mouseout(function(){event.drain();event.reset();}).focus(function(){event.drain();event.fill(this)}).blur(function(){event.drain();event.reset();});stars.click(function(){if(settings.cancel==true){settings.curvalue=stars.index(this)+1;container.handler($(this).children('a')[0].href.split('#')[1]);return false;}else if(settings.maxvalue==1){settings.curvalue=(settings.curvalue==0)?1:0;$(this).toggleClass('j-on');container.handler($(this).children('a')[0].href.split('#')[1]);return false;}
return true;});if(settings.show_cancel){cancel.mouseover(function(){event.drain();$(this).addClass('j-on');}).mouseout(function(){event.reset();$(this).removeClass('j-on');}).focus(function(){event.drain();$(this).addClass('j-on');}).blur(function(){event.reset();$(this).removeClass('j-on');});cancel.click(function(){event.drain();settings.curvalue=0;container.handler($(this).children('a')[0].href.split('#')[1]);return false;});}}
var event={fill:function(el){var index=stars.index(el)+1;stars.children('a').css('width','100%').end().slice(0,index).addClass('j-hover').end();},drain:function(){stars.filter('.j-on').removeClass('j-on').end().filter('.j-hover').removeClass('j-hover').end();},reset:function(){stars.slice(0,settings.curvalue).addClass('j-on').end();}}
event.reset();return(this);}})(jQuery);
!function(a){var b={},c={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};a.fn.bxSlider=function(d){if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).bxSlider(d)}),this;var e={},f=this;b.el=this;var g=a(window).width(),h=a(window).height(),j=function(){e.settings=a.extend({},c,d),e.settings.slideWidth=parseInt(e.settings.slideWidth),e.children=f.children(e.settings.slideSelector),e.children.length<e.settings.minSlides&&(e.settings.minSlides=e.children.length),e.children.length<e.settings.maxSlides&&(e.settings.maxSlides=e.children.length),e.settings.randomStart&&(e.settings.startSlide=Math.floor(Math.random()*e.children.length)),e.active={index:e.settings.startSlide},e.carousel=e.settings.minSlides>1||e.settings.maxSlides>1,e.carousel&&(e.settings.preloadImages="all"),e.minThreshold=e.settings.minSlides*e.settings.slideWidth+(e.settings.minSlides-1)*e.settings.slideMargin,e.maxThreshold=e.settings.maxSlides*e.settings.slideWidth+(e.settings.maxSlides-1)*e.settings.slideMargin,e.working=!1,e.controls={},e.interval=null,e.animProp="vertical"==e.settings.mode?"top":"left",e.usingCSS=e.settings.useCSS&&"fade"!=e.settings.mode&&function(){var a=document.createElement("div"),b=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return e.cssPrefix=b[c].replace("Perspective","").toLowerCase(),e.animProp="-"+e.cssPrefix+"-transform",!0;return!1}(),"vertical"==e.settings.mode&&(e.settings.maxSlides=e.settings.minSlides),f.data("origStyle",f.attr("style")),f.children(e.settings.slideSelector).each(function(){a(this).data("origStyle",a(this).attr("style"))}),k()},k=function(){f.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),e.viewport=f.parent(),e.loader=a('<div class="bx-loading" />'),e.viewport.prepend(e.loader),f.css({width:"horizontal"==e.settings.mode?100*e.children.length+215+"%":"auto",position:"relative"}),e.usingCSS&&e.settings.easing?f.css("-"+e.cssPrefix+"-transition-timing-function",e.settings.easing):e.settings.easing||(e.settings.easing="swing");q();e.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),e.viewport.parent().css({maxWidth:o()}),e.settings.pager||e.viewport.parent().css({margin:"0 auto 0px"}),e.children.css({float:"horizontal"==e.settings.mode?"left":"none",listStyle:"none",position:"relative"}),e.children.css("width",p()),"horizontal"==e.settings.mode&&e.settings.slideMargin>0&&e.children.css("marginRight",e.settings.slideMargin),"vertical"==e.settings.mode&&e.settings.slideMargin>0&&e.children.css("marginBottom",e.settings.slideMargin),"fade"==e.settings.mode&&(e.children.css({position:"absolute",zIndex:0,display:"none"}),e.children.eq(e.settings.startSlide).css({zIndex:50,display:"block"})),e.controls.el=a('<div class="bx-controls" />'),e.settings.captions&&z(),e.active.last=e.settings.startSlide==r()-1,e.settings.video&&f.fitVids();var c=e.children.eq(e.settings.startSlide);"all"==e.settings.preloadImages&&(c=e.children),e.settings.ticker?e.settings.pager=!1:(e.settings.pager&&w(),e.settings.controls&&x(),e.settings.auto&&e.settings.autoControls&&y(),(e.settings.controls||e.settings.autoControls||e.settings.pager)&&e.viewport.after(e.controls.el)),l(c,m)},l=function(b,c){var d=b.find("img, iframe").length;if(0==d)return void c();var e=0;b.find("img, iframe").each(function(){a(this).one("load",function(){++e==d&&c()}).each(function(){this.complete&&a(this).load()})})},m=function(){if(e.settings.infiniteLoop&&"fade"!=e.settings.mode&&!e.settings.ticker){var b="vertical"==e.settings.mode?e.settings.minSlides:e.settings.maxSlides,c=e.children.slice(0,b).clone().addClass("bx-clone"),d=e.children.slice(-b).clone().addClass("bx-clone");f.append(c).prepend(d)}e.loader.remove(),t(),"vertical"==e.settings.mode&&(e.settings.adaptiveHeight=!0),e.viewport.height(n()),f.redrawSlider(),e.settings.onSliderLoad(e.active.index),e.initialized=!0,e.settings.responsive&&a(window).bind("resize",Q),e.settings.auto&&e.settings.autoStart&&J(),e.settings.ticker&&K(),e.settings.pager&&F(e.settings.startSlide),e.settings.controls&&I(),e.settings.touchEnabled&&!e.settings.ticker&&M()},n=function(){var b=0,c=a();if("vertical"==e.settings.mode||e.settings.adaptiveHeight)if(e.carousel){var d=1==e.settings.moveSlides?e.active.index:e.active.index*s();for(c=e.children.eq(d),i=1;i<=e.settings.maxSlides-1;i++)c=d+i>=e.children.length?c.add(e.children.eq(i-1)):c.add(e.children.eq(d+i))}else c=e.children.eq(e.active.index);else c=e.children;return"vertical"==e.settings.mode?(c.each(function(c){b+=a(this).outerHeight()}),e.settings.slideMargin>0&&(b+=e.settings.slideMargin*(e.settings.minSlides-1))):b=Math.max.apply(Math,c.map(function(){return a(this).outerHeight(!1)}).get()),b},o=function(){var a="100%";return e.settings.slideWidth>0&&(a="horizontal"==e.settings.mode?e.settings.maxSlides*e.settings.slideWidth+(e.settings.maxSlides-1)*e.settings.slideMargin:e.settings.slideWidth),a},p=function(){var a=e.settings.slideWidth,b=e.viewport.width();return 0==e.settings.slideWidth||e.settings.slideWidth>b&&!e.carousel||"vertical"==e.settings.mode?a=b:e.settings.maxSlides>1&&"horizontal"==e.settings.mode&&(b>e.maxThreshold||b<e.minThreshold&&(a=(b-e.settings.slideMargin*(e.settings.minSlides-1))/e.settings.minSlides)),a},q=function(){var a=1,b=null;return"horizontal"===e.settings.mode&&e.settings.slideWidth>0?e.viewport.width()<e.minThreshold?a=e.settings.minSlides:e.viewport.width()>e.maxThreshold?a=e.settings.maxSlides:(b=e.children.first().width()+e.settings.slideMargin,a=Math.floor((e.viewport.width()+e.settings.slideMargin)/b)||1):"vertical"===e.settings.mode&&(a=e.settings.minSlides),a},r=function(){var a=0;if(e.settings.moveSlides>0)if(e.settings.infiniteLoop)a=e.children.length/s();else for(var b=0,c=0;b<e.children.length;)++a,b=c+q(),c+=e.settings.moveSlides<=q()?e.settings.moveSlides:q();else a=Math.ceil(e.children.length/q());return a},s=function(){return e.settings.moveSlides>0&&e.settings.moveSlides<=q()?e.settings.moveSlides:q()},t=function(){if(e.children.length>e.settings.maxSlides&&e.active.last&&!e.settings.infiniteLoop){if("horizontal"==e.settings.mode){var a=e.children.last(),b=a.position();u(-(b.left-(e.viewport.width()-a.width())),"reset",0)}else if("vertical"==e.settings.mode){var c=e.children.length-e.settings.minSlides,b=e.children.eq(c).position();u(-b.top,"reset",0)}}else{var b=e.children.eq(e.active.index*s()).position();e.active.index==r()-1&&(e.active.last=!0),void 0!=b&&("horizontal"==e.settings.mode?u(-b.left,"reset",0):"vertical"==e.settings.mode&&u(-b.top,"reset",0))}},u=function(a,b,c,d){if(e.usingCSS){var g="vertical"==e.settings.mode?"translate3d(0, "+a+"px, 0)":"translate3d("+a+"px, 0, 0)";f.css("-"+e.cssPrefix+"-transition-duration",c/1e3+"s"),"slide"==b?(f.css(e.animProp,g),f.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){f.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),G()})):"reset"==b?f.css(e.animProp,g):"ticker"==b&&(f.css("-"+e.cssPrefix+"-transition-timing-function","linear"),f.css(e.animProp,g),f.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){f.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),u(d.resetValue,"reset",0),L()}))}else{var h={};h[e.animProp]=a,"slide"==b?f.animate(h,c,e.settings.easing,function(){G()}):"reset"==b?f.css(e.animProp,a):"ticker"==b&&f.animate(h,speed,"linear",function(){u(d.resetValue,"reset",0),L()})}},v=function(){for(var b="",c=r(),d=0;d<c;d++){var f="";e.settings.buildPager&&a.isFunction(e.settings.buildPager)?(f=e.settings.buildPager(d),e.pagerEl.addClass("bx-custom-pager")):(f=d+1,e.pagerEl.addClass("bx-default-pager")),b+='<div class="bx-pager-item"><a href="" data-slide-index="'+d+'" class="bx-pager-link">'+f+"</a></div>"}e.pagerEl.html(b)},w=function(){e.settings.pagerCustom?e.pagerEl=a(e.settings.pagerCustom):(e.pagerEl=a('<div class="bx-pager" />'),e.settings.pagerSelector?a(e.settings.pagerSelector).html(e.pagerEl):e.controls.el.addClass("bx-has-pager").append(e.pagerEl),v()),e.pagerEl.delegate("a","click",E)},x=function(){e.controls.next=a('<a class="bx-next" href="">'+e.settings.nextText+"</a>"),e.controls.prev=a('<a class="bx-prev" href="">'+e.settings.prevText+"</a>"),e.controls.next.bind("click",A),e.controls.prev.bind("click",B),e.settings.nextSelector&&a(e.settings.nextSelector).append(e.controls.next),e.settings.prevSelector&&a(e.settings.prevSelector).append(e.controls.prev),e.settings.nextSelector||e.settings.prevSelector||(e.controls.directionEl=a('<div class="bx-controls-direction" />'),e.controls.directionEl.append(e.controls.prev).append(e.controls.next),e.controls.el.addClass("bx-has-controls-direction").append(e.controls.directionEl))},y=function(){e.controls.start=a('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+e.settings.startText+"</a></div>"),e.controls.stop=a('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+e.settings.stopText+"</a></div>"),e.controls.autoEl=a('<div class="bx-controls-auto" />'),e.controls.autoEl.delegate(".bx-start","click",C),e.controls.autoEl.delegate(".bx-stop","click",D),e.settings.autoControlsCombine?e.controls.autoEl.append(e.controls.start):e.controls.autoEl.append(e.controls.start).append(e.controls.stop),e.settings.autoControlsSelector?a(e.settings.autoControlsSelector).html(e.controls.autoEl):e.controls.el.addClass("bx-has-controls-auto").append(e.controls.autoEl),H(e.settings.autoStart?"stop":"start")},z=function(){e.children.each(function(b){var c=a(this).find("img:first").attr("title");void 0!=c&&(""+c).length&&a(this).append('<div class="bx-caption"><span>'+c+"</span></div>")})},A=function(a){e.settings.auto&&f.stopAuto(),f.goToNextSlide(),a.preventDefault()},B=function(a){e.settings.auto&&f.stopAuto(),f.goToPrevSlide(),a.preventDefault()},C=function(a){f.startAuto(),a.preventDefault()},D=function(a){f.stopAuto(),a.preventDefault()},E=function(b){e.settings.auto&&f.stopAuto();var c=a(b.currentTarget),d=parseInt(c.attr("data-slide-index"));d!=e.active.index&&f.goToSlide(d),b.preventDefault()},F=function(b){var c=e.children.length;if("short"==e.settings.pagerType)return e.settings.maxSlides>1&&(c=Math.ceil(e.children.length/e.settings.maxSlides)),void e.pagerEl.html(b+1+e.settings.pagerShortSeparator+c);e.pagerEl.find("a").removeClass("active"),e.pagerEl.each(function(c,d){a(d).find("a").eq(b).addClass("active")})},G=function(){if(e.settings.infiniteLoop){var a="";0==e.active.index?a=e.children.eq(0).position():e.active.index==r()-1&&e.carousel?a=e.children.eq((r()-1)*s()).position():e.active.index==e.children.length-1&&(a=e.children.eq(e.children.length-1).position()),a&&("horizontal"==e.settings.mode?u(-a.left,"reset",0):"vertical"==e.settings.mode&&u(-a.top,"reset",0))}e.working=!1,e.settings.onSlideAfter(e.children.eq(e.active.index),e.oldIndex,e.active.index)},H=function(a){e.settings.autoControlsCombine?e.controls.autoEl.html(e.controls[a]):(e.controls.autoEl.find("a").removeClass("active"),e.controls.autoEl.find("a:not(.bx-"+a+")").addClass("active"))},I=function(){1==r()?(e.controls.prev.addClass("disabled"),e.controls.next.addClass("disabled")):!e.settings.infiniteLoop&&e.settings.hideControlOnEnd&&(0==e.active.index?(e.controls.prev.addClass("disabled"),e.controls.next.removeClass("disabled")):e.active.index==r()-1?(e.controls.next.addClass("disabled"),e.controls.prev.removeClass("disabled")):(e.controls.prev.removeClass("disabled"),e.controls.next.removeClass("disabled")))},J=function(){if(e.settings.autoDelay>0){setTimeout(f.startAuto,e.settings.autoDelay)}else f.startAuto();e.settings.autoHover&&f.hover(function(){e.interval&&(f.stopAuto(!0),e.autoPaused=!0)},function(){e.autoPaused&&(f.startAuto(!0),e.autoPaused=null)})},K=function(){var b=0;if("next"==e.settings.autoDirection)f.append(e.children.clone().addClass("bx-clone"));else{f.prepend(e.children.clone().addClass("bx-clone"));var c=e.children.first().position();b="horizontal"==e.settings.mode?-c.left:-c.top}u(b,"reset",0),e.settings.pager=!1,e.settings.controls=!1,e.settings.autoControls=!1,e.settings.tickerHover&&!e.usingCSS&&e.viewport.hover(function(){f.stop()},function(){var b=0;e.children.each(function(c){b+="horizontal"==e.settings.mode?a(this).outerWidth(!0):a(this).outerHeight(!0)});var c=e.settings.speed/b,d="horizontal"==e.settings.mode?"left":"top",g=c*(b-Math.abs(parseInt(f.css(d))));L(g)}),L()},L=function(a){speed=a||e.settings.speed;var b={left:0,top:0},c={left:0,top:0};"next"==e.settings.autoDirection?b=f.find(".bx-clone").first().position():c=e.children.first().position();var d="horizontal"==e.settings.mode?-b.left:-b.top,g="horizontal"==e.settings.mode?-c.left:-c.top,h={resetValue:g};u(d,"ticker",speed,h)},M=function(){e.touch={start:{x:0,y:0},end:{x:0,y:0}},e.viewport.bind("touchstart",N)},N=function(a){if(e.working)a.preventDefault();else{e.touch.originalPos=f.position();var b=a.originalEvent;e.touch.start.x=b.changedTouches[0].pageX,e.touch.start.y=b.changedTouches[0].pageY,e.viewport.bind("touchmove",O),e.viewport.bind("touchend",P)}},O=function(a){var b=a.originalEvent,c=Math.abs(b.changedTouches[0].pageX-e.touch.start.x),d=Math.abs(b.changedTouches[0].pageY-e.touch.start.y);if(3*c>d&&e.settings.preventDefaultSwipeX?a.preventDefault():3*d>c&&e.settings.preventDefaultSwipeY&&a.preventDefault(),"fade"!=e.settings.mode&&e.settings.oneToOneTouch){var f=0;if("horizontal"==e.settings.mode){var g=b.changedTouches[0].pageX-e.touch.start.x;f=e.touch.originalPos.left+g}else{var g=b.changedTouches[0].pageY-e.touch.start.y;f=e.touch.originalPos.top+g}u(f,"reset",0)}},P=function(a){e.viewport.unbind("touchmove",O);var b=a.originalEvent,c=0;if(e.touch.end.x=b.changedTouches[0].pageX,e.touch.end.y=b.changedTouches[0].pageY,"fade"==e.settings.mode){var d=Math.abs(e.touch.start.x-e.touch.end.x);d>=e.settings.swipeThreshold&&(e.touch.start.x>e.touch.end.x?f.goToNextSlide():f.goToPrevSlide(),f.stopAuto())}else{var d=0;"horizontal"==e.settings.mode?(d=e.touch.end.x-e.touch.start.x,c=e.touch.originalPos.left):(d=e.touch.end.y-e.touch.start.y,c=e.touch.originalPos.top),!e.settings.infiniteLoop&&(0==e.active.index&&d>0||e.active.last&&d<0)?u(c,"reset",200):Math.abs(d)>=e.settings.swipeThreshold?(d<0?f.goToNextSlide():f.goToPrevSlide(),f.stopAuto()):u(c,"reset",200)}e.viewport.unbind("touchend",P)},Q=function(b){var c=a(window).width(),d=a(window).height();g==c&&h==d||(g=c,h=d,f.redrawSlider())};return f.goToSlide=function(b,c){if(!e.working&&e.active.index!=b)if(e.working=!0,e.oldIndex=e.active.index,b<0?e.active.index=r()-1:b>=r()?e.active.index=0:e.active.index=b,e.settings.onSlideBefore(e.children.eq(e.active.index),e.oldIndex,e.active.index),"next"==c?e.settings.onSlideNext(e.children.eq(e.active.index),e.oldIndex,e.active.index):"prev"==c&&e.settings.onSlidePrev(e.children.eq(e.active.index),e.oldIndex,e.active.index),e.active.last=e.active.index>=r()-1,e.settings.pager&&F(e.active.index),e.settings.controls&&I(),"fade"==e.settings.mode)e.settings.adaptiveHeight&&e.viewport.height()!=n()&&e.viewport.animate({height:n()},e.settings.adaptiveHeightSpeed),e.children.filter(":visible").fadeOut(e.settings.speed).css({zIndex:0}),e.children.eq(e.active.index).css("zIndex",51).fadeIn(e.settings.speed,function(){a(this).css("zIndex",50),G()});else{e.settings.adaptiveHeight&&e.viewport.height()!=n()&&e.viewport.animate({height:n()},e.settings.adaptiveHeightSpeed);var d=0,g={left:0,top:0};if(!e.settings.infiniteLoop&&e.carousel&&e.active.last)if("horizontal"==e.settings.mode){var h=e.children.eq(e.children.length-1);g=h.position(),d=e.viewport.width()-h.outerWidth()}else{var i=e.children.length-e.settings.minSlides;g=e.children.eq(i).position()}else if(e.carousel&&e.active.last&&"prev"==c){var j=1==e.settings.moveSlides?e.settings.maxSlides-s():(r()-1)*s()-(e.children.length-e.settings.maxSlides),h=f.children(".bx-clone").eq(j);g=h.position()}else if("next"==c&&0==e.active.index)g=f.find("> .bx-clone").eq(e.settings.maxSlides).position(),e.active.last=!1;else if(b>=0){var k=b*s();g=e.children.eq(k).position()}if(void 0!==g){var l="horizontal"==e.settings.mode?-(g.left-d):-g.top;u(l,"slide",e.settings.speed)}}},f.goToNextSlide=function(){if(e.settings.infiniteLoop||!e.active.last){var a=parseInt(e.active.index)+1;f.goToSlide(a,"next")}},f.goToPrevSlide=function(){if(e.settings.infiniteLoop||0!=e.active.index){var a=parseInt(e.active.index)-1;f.goToSlide(a,"prev")}},f.startAuto=function(a){e.interval||(e.interval=setInterval(function(){"next"==e.settings.autoDirection?f.goToNextSlide():f.goToPrevSlide()},e.settings.pause),e.settings.autoControls&&1!=a&&H("stop"))},f.stopAuto=function(a){e.interval&&(clearInterval(e.interval),e.interval=null,e.settings.autoControls&&1!=a&&H("start"))},f.getCurrentSlide=function(){return e.active.index},f.getSlideCount=function(){return e.children.length},f.redrawSlider=function(){e.children.add(f.find(".bx-clone")).outerWidth(p()),e.viewport.css("height",n()),e.settings.ticker||t(),e.active.last&&(e.active.index=r()-1),e.active.index>=r()&&(e.active.last=!0),e.settings.pager&&!e.settings.pagerCustom&&(v(),F(e.active.index))},f.destroySlider=function(){e.initialized&&(e.initialized=!1,a(".bx-clone",this).remove(),e.children.each(function(){void 0!=a(this).data("origStyle")?a(this).attr("style",a(this).data("origStyle")):a(this).removeAttr("style")}),void 0!=a(this).data("origStyle")?this.attr("style",a(this).data("origStyle")):a(this).removeAttr("style"),a(this).unwrap().unwrap(),e.controls.el&&e.controls.el.remove(),e.controls.next&&e.controls.next.remove(),e.controls.prev&&e.controls.prev.remove(),e.pagerEl&&e.settings.controls&&e.pagerEl.remove(),a(".bx-caption",this).remove(),e.controls.autoEl&&e.controls.autoEl.remove(),clearInterval(e.interval),e.settings.responsive&&a(window).unbind("resize",Q))},f.reloadSlider=function(a){void 0!=a&&(d=a),f.destroySlider(),j()},j(),this}}(jQuery);
(function($){function ImageHash(hash){if(hash instanceof Array){this.bytesArray=this.chunkArray(hash,8).map(function(el){return el.join('');});this.hash=this.bytesArray.map(function(el){return parseInt(el,2).toString(16);}).join('');}else{this.hash=hash;this.bytesArray=this.hash.chunk(2).map(function(el){var bin=parseInt(el,16).toString(2);return Array(8+1-bin.length).join('0')+bin;});}}
ImageHash.prototype.chunkArray=function(array,size){var i,j,tmp=[];for(i=0,j=array.length;i<j;i+=size){tmp.push(array.slice(i,i+size));}
return tmp;};ImageHash.prototype.rotate=function(){var data=[];for(var i=0;i<=7;i++){for(var k=0;k<=7;k++){data.push(this.bytesArray[7-k][i]);}}
return new ImageHash(data);};ImageHash.prototype.mirror=function(){var data=[];for(var i=0;i<this.bytesArray.length;i++){data=data.concat(this.bytesArray[i].split('').reverse());}
return new ImageHash(data);};ImageHash.prototype.compareWith=function(hash){if(!(hash instanceof ImageHash)){return 64;}
var hash2BytesArray=hash.bytesArray;var res=0;for(var i=0;i<this.bytesArray.length;i++){var h1p=parseInt(this.bytesArray[i],2);var h2p=parseInt(hash2BytesArray[i],2);res+=(h1p^h2p).toString(2).split(1).length-1;}
return res;};ImageHash.prototype.debug=function(){var debug=$('<table></table>').css({'border-spacing':2,'background-color':'#808080','margin':10});for(var i=0;i<this.bytesArray.length;i++){var byte=$('<tr></tr>');for(var k=0;k<this.bytesArray[i].length;k++){var color=parseInt(this.bytesArray[i].charAt(k))?'#C1001F':'#FFFFFF';var cell=$('<td></td>').css({'background-color':color,'width':22,'height':24});byte.append(cell);}
debug.append(byte)}
$(document.body).append(debug);};$.fn.ImageLoader2=function(options){if(!window.File||!window.FileReader||!window.FileList){return this;}
var defaults={'group_action':false,'min_size_w':100,'min_size_h':100,'uploadFolder':'/local_files/temp/','limit':5,'hash':'images','uploaded':{},'uploadScript':'upload.php','maxSize':'10 MB','buttonHTML':false,'buttonTitle':'Выберите фото','photoBoxPosition':'after','uploadedListDisplay':true,'additionalParams':{},'thumbFile':false,'progressBarType':'normal','checkHashes':false,'draggable':true,'readonly':false,'allowAddInReadonly':false,'recommend_size_w':false,'recommend_size_h':false,'proportions':false,'proportionsErrorText':false,'minSizeErrorText':false,'onRender':function(id,image,editIcon,cancelIcon,fileSizeBlock){return image+editIcon+cancelIcon;},onInit:function(){},onError:function(msg){if(uBox.errorTimeOut){window.clearTimeout(uBox.errorTimeOut);}
$(uBox.messageBox).html('<div id="error_presence" class="p_error_block" style="display: block; text-align:left; "><span class="sprite p_error_icon"></span><span class="p_error">'+msg+'</span></div>');uBox.errorTimeOut=window.setTimeout(function(){$(uBox.messageBox).html("");},3000);},onDataRequest:function(fileObj){return fileObj;},onStartUpload:function(){},onComplete:function(uploadFolder,hash,response){},onCancel:function(id,uploadedFiles){return true;},onEdit:function(id,uploadedFiles){return true;},onDisableButton:function(){return true;},onEnableButton:function(){return true;},onGetFileId:function(id){return id;},onUploadSuccess:function(name,size){}};var config=$.extend(defaults,options);var $maxSize=(function(s){var t=s.split(' ');var u=t.pop();var multiplier=0;switch(u.toUpperCase()){case'MB':multiplier=1024*1024;break;case'KB':multiplier=1024;break;default:multiplier=1;}
return multiplier*parseInt(t.shift());})(config.maxSize);var uBox=this;var id=$(uBox).attr('id');$(uBox).empty();if(config.group_action){uBox.imageError=false;}
uBox.order_id=null;uBox.files={files:{},order:[],count:0};if(config.group_action){uBox.remove_files=[];}
uBox.queue={totalBytes:0,completedBytes:0,files:[]};uBox.onCancel=config.onCancel;if(config.group_action){uBox.onEdit=config.onEdit;}
uBox.onGetFileId=config.onGetFileId;var container="<div class='imageloader-container' id='"+id+"Container' ></div>";if(config.photoBoxPosition=='before'){uBox.before(container);}else{uBox.after(container);}
uBox.container=$('#'+id+'Container');uBox.container.append('<div id="'+id+'MessageBox"></div>');uBox.container.append('<div id="'+id+'ProgressBar"><div class="imageloader-progressbar"><div></div><div class="imageloader-progressbar-percent">0%</div></div></div>');if(config.uploadedListDisplay===true){uBox.container.append('<ul id="'+id+'LoadedPhotos" class="imageloader-photo-container"></ul>');}
uBox.photoContainer=$('#'+id+'LoadedPhotos');uBox.after('<input type="hidden" name="imageloader" value="1" />');uBox.messageBox=$('#'+id+'MessageBox');uBox.progressBar=$('#'+id+'ProgressBar').hide();if($('#imageloaderMask').length==0){$(document.body).append("<div id='imageloaderMask' class='imageloader-mask'></div>");}
uBox.mask=$('#imageloaderMask');config.onInit(uBox);uBox.coords={};uBox.isDraggableIObject=true;uBox.register={};uBox.getFilesData=function(){var files=[];for(var i in uBox.files.order){var fileID=uBox.files.order[i];if(uBox.files.files[fileID]){files.push(config.onDataRequest({filename:uBox.files.files[fileID].path,fileID:fileID}));}}
return{hash:config.hash,uploadFolder:config.uploadFolder,files:files};};uBox.reorder=function(){var newOrder=[];$('li.imageloader-item:not(.imageloader-placeholder)',$(uBox.photoContainer)).each(function(){var id=this.id.split('-');id.shift();id=id.join('-');newOrder.push(id);});uBox.files.order=newOrder;};uBox.renderButton=function(){if($(uBox._button).length>0){$(uBox._button).remove();}
if($(uBox.fakeButton).length){$(uBox.fakeButton).remove();}
var button=$("<input type='file' id='"+id+"-button' disabled='disabled' multiple='true' title='"+config.buttonTitle+"' name='_fake_file[]'/>");$(uBox).prepend(button);uBox._button=$('#'+id+'-button');uBox.fakeButton=null;if(config.buttonHTML){var fakeButton=$(config.buttonHTML).attr("id",uBox.attr('id')+'fakeButton');$(uBox._button).before(fakeButton);uBox.fakeButton=$('#'+fakeButton.attr('id'));$(uBox._button).parent().css({position:'relative'});$(uBox._button).css({opacity:0});var timerId=setTimeout(function setButtonWidth(){if(!$(uBox._button).is(':visible')){timerId=setTimeout(setButtonWidth,200);return;}
$(uBox._button).css({width:$(uBox.fakeButton).outerWidth(),height:$(uBox.fakeButton).outerHeight()});},200);$(uBox.fakeButton).css({position:'absolute',left:0,top:0,zIndex:0});$(uBox._button).on('mouseover',function(e){$(uBox.fakeButton).addClass('i-hover');});$(uBox._button).on('mouseout',function(e){$(uBox.fakeButton).removeClass('i-hover');$(uBox.fakeButton).removeClass('i-active');});$(uBox._button).on('mousedown',function(){$(uBox.fakeButton).addClass('i-active');});$(uBox._button).on('mouseup',function(){$(uBox.fakeButton).removeClass('i-active');});$(uBox._button).on('change',uBox.onSelectFiles);}};uBox.add=function(file,warning,isNew){if($('.imageloader-clear',uBox.photoContainer.parent()).length===0&&config.photoBoxPosition!=='modal'&&config.uploadedListDisplay===true){uBox.photoContainer.after("<div class='imageloader-clear'></div>");}
var className=' class = "imageloader-image" ';if(warning&&config.group_action){className=' class="imageloader-image-warning" ';}
if(isNew===true&&config.group_action){if(warning){className=' class="imageloader-image imageloader-image-warning imageloader-new" ';}else{className=' class="imageloader-image imageloader-new" ';}}
var cancelIcon='<a  class="imageloader-cancel-link" id="imageloaderCancel-'+file.id+'" title="Удалить"><span class="imageloader-cancel"></span></a>';if(config.group_action){var editIcon=(warning)?'':'<a  class="imageloader-edit-link" id="imageloaderEdit-'+file.id+'" title="Править"><span class="imageloader-edit"></span></a>';}else{var editIcon='';}
var path=(config.thumbFile===false)?file.path:config.thumbFile.replace(/%file%/gi,file.path);var bqHtml='';if(config.recommend_size_w&&config.recommend_size_h){if(typeof(file.isBadQuality)!='undefined'&&file.isBadQuality){bqHtml=$('<div />').addClass('imageloader-bad-quality').text('!').attr('title','Размер изображения не соответствует рекомендованному '+config.recommend_size_w+'x'+config.recommend_size_h);bqHtml=$('<div />').append(bqHtml).html();}}else if(typeof(file.isBadQuality)!='undefined'&&file.isBadQuality){bqHtml=$('<div />').addClass('imageloader-bad-quality').text('!').attr('title',config.minSizeErrorText||('Изображение должно быть не менее '+config.min_size_w+'x'+config.min_size_h+'px.'));bqHtml=$('<div />').append(bqHtml).html();}
if(file.isBadProportions&&bqHtml===''){bqHtml=$('<div />').addClass('imageloader-bad-quality').text('!').attr('title',config.proportionsErrorText?config.proportionsErrorText:('Изображение не соответстувет пропорциям '+config.proportions+'.'));bqHtml=$('<div />').append(bqHtml).html();}
var image='<div '+className+' style="background-image: url(\''+path+'\');">'+bqHtml+'</div>';first=($('#goods-imagesLoadedPhotos li').length!=0)?false:true;uBox.photoContainer.append('<li id="sphoto-'+file.id+'" class="imageloader-item"></li>');var item=$('#sphoto-'+file.id);uBox.draggableIObject=null;if(uBox.order_id!==null){uBox.files.order.splice(uBox.order_id,0,file.id).join();uBox.files.order.pop();if(uBox.order_id==0){if(first){$('#sphoto-'+file.id).append(config.onRender(file.id,image,editIcon,cancelIcon));}else{$('#goods-imagesLoadedPhotos li').eq(uBox.order_id).before($('#sphoto-'+file.id).append(config.onRender(file.id,image,editIcon,cancelIcon)));}}else{$('#goods-imagesLoadedPhotos li').eq(uBox.order_id-1).after($('#sphoto-'+file.id).append(config.onRender(file.id,image,editIcon,cancelIcon)));}
uBox.order_id=null;}else{$('#sphoto-'+file.id).append(config.onRender(file.id,image,editIcon,cancelIcon));if(!config.group_action){$('.imageloader-cancel-link').css('left','45px');}}
item.find('.imageloader-image:first').bind('mousedown',function(event){if(config.draggable===false){return true;}
this.item=item;if($(event.target).hasClass('imageloader-cancel')||uBox.isDraggableIObject===false){return true;}
uBox.draggableIObject=item;$(this.item).addClass('imageloader-draggable');this.item.sX=event.pageX-$(this.item).offset().left;this.item.sY=event.pageY-$(this.item).offset().top;$(this.item).css({position:'fixed',top:event.clientY-this.item.sY,left:event.clientX-this.item.sX}).css("z-index","100");$(this.item).before('<li class="imageloader-item imageloader-placeholder"><a  class="imageloader-cancel-link"><span class="imageloader-cancel"></span></a></li>');this.item.placeHolder=$('.imageloader-placeholder',$(this.item).parents('ul:first'));uBox.points={};this.item.canCheck=true;document.onselectstart=function(){return false;}});uBox.onGetFileId(file.id);};uBox.cancel=function(id){uBox.order_id=uBox.files.order.indexOf(id);if(uBox.files.files[id]){delete uBox.files.files[id];uBox.files.count--;$('#sphoto-'+id).remove();uBox.reorder();}
if(uBox.files.count===0){$('.imageloader-clear',uBox.photoContainer.parent()).remove();uBox.order_id=null;}
uBox.checkLimit();};uBox.drawMessage=function(msg){config.onError(msg);};uBox.checkLimit=function(){var left=config.limit-uBox.files.count;if(left<2){uBox._button.removeAttr("multiple");if(left<1){uBox.disableButton();}else{uBox.enableButton();}}else{uBox._button.attr("multiple","true");uBox.enableButton();}};uBox.disableButton=function(){uBox._button.attr("disabled","disabled");if(uBox.fakeButton){$(uBox.fakeButton).addClass("i-disabled");}
uBox.onDisableButton();};uBox.enableButton=function(){uBox._button.removeAttr("disabled");if(uBox.fakeButton){$(uBox.fakeButton).removeClass("i-disabled");}
uBox.onEnableButton();};uBox.onEnableButton=config.onEnableButton;uBox.onDisableButton=config.onDisableButton;uBox.onResizedFile=function(data,filename){data=data.substr(data.indexOf('base64')+7).chunk(1024000);var reader={};reader.data=data;reader.piece=0;reader.pieces=data.length;var params=$.extend({name:filename,type:'image/jpeg',size:data.length,hash:config.hash,uploadFolder:config.uploadFolder},config.additionalParams);reader.xhr=jQuery.ajaxSettings.xhr();reader.currentPiece=reader.data.shift();uBox.sendPiece(params,reader);};uBox.onSelectFiles=function(e){if(config.readonly&&!config.allowAddInReadonly){return;}
var files=e.target.files;uBox.queue.completedBytes=uBox.queue.totalBytes=0;if(window.FileReader&&window.Blob){modernSelectFile(files);}else{for(var i=0;i<files.length;i++){var f=files[i];if($.inArray(f.type,['image/jpeg','image/pjpeg','image/png','image/gif','image/jpg'])>-1){if(f.size>$maxSize){uBox.drawMessage('Размер файла не должен превышать '+config.maxSize);}else{uBox.queue.totalBytes+=f.size;uBox.queue.files.push({file:f,mimeType:f.type});}}else{uBox.drawMessage('Загружен файл в неподходящем формате. Пожалуйста, загрузите JPG, PNG или GIF файл.');}}
if(uBox.queue.files.length>0){uBox.onStartUpload();uBox.upload();}}};function modernSelectFile(files){for(var i=0;i<files.length;i++){var file=files[i];readFile(file,files.length);}
function readFile(file,filesCount){var fileReader=new FileReader();fileReader.onloadend=function(e){var arr=(new Uint8Array(e.target.result)).subarray(0,4);var header='';for(var j=0;j<arr.length;j++){header+=arr[j].toString(16);}
var mimeType='';switch(header){case"89504e47":mimeType="image/png";break;case"47494638":mimeType="image/gif";break;case"ffd8ffdb":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":mimeType="image/jpeg";break;default:mimeType="";break;}
if($.inArray(mimeType,['image/jpeg','image/pjpeg','image/png','image/gif','image/jpg'])>-1){if(file.size>$maxSize){uBox.drawMessage('Размер файла не должен превышать '+config.maxSize);}else{file.type=mimeType;uBox.queue.totalBytes+=file.size;uBox.queue.files.push({file:file,mimeType:mimeType});if(uBox.queue.files.length>0&&uBox.queue.files.length===filesCount){uBox.onStartUpload();uBox.upload();}}}else{uBox.drawMessage('Загружен файл в неподходящем формате. Пожалуйста, загрузите JPG, PNG или GIF файл.');}};fileReader.readAsArrayBuffer(file);}}
uBox.onStartUpload=function(){uBox.disableButton();if(config.progressBarType==='modal'){$('.imageloader-progressbar-wrapper',uBox.mask).remove();uBox.mask.append('<div class="imageloader-progressbar-wrapper"></div>');uBox.mask.find('.imageloader-progressbar-wrapper').append(uBox.progressBar);uBox.progressBar.parent('div.imageloader-progressbar-wrapper').center();uBox.mask.show();}
uBox.progressBar.show();config.onStartUpload();};uBox.upload=function(){if(uBox.files.count>=config.limit){uBox.drawMessage('Максимальное кол-во файлов: '+config.limit);uBox.queue.files=[];uBox.onComplete();}
if(!uBox.queue.files.length){return;}
var fileData=uBox.queue.files.shift();var file=fileData.file;var reader=new FileReader();reader.onload=function(e){var $data=e.target.result;$data=$data.substr($data.indexOf('base64')+7).chunk(1024000);var $this=reader;$this.data=$data;$this.piece=0;$this.pieces=$data.length;var params=$.extend({name:file.name,type:fileData.mimeType,size:file.size,hash:config.hash,uploadFolder:config.uploadFolder},config.additionalParams);$this.xhr=jQuery.ajaxSettings.xhr();if($this.xhr.upload){$this.xhr.upload.addEventListener('progress',function(e){uBox.reloadProgress((e.loaded/e.total)*parseFloat(file.size/$this.pieces));},false);}
reader.currentPiece=reader.data.shift();uBox.sendPiece(params,$this);};reader.readAsDataURL(file);};uBox.sendPiece=function(params,reader){if(reader.tempFileName){params.tempFileName=reader.tempFileName;}
if(reader.currentPiece===null){uBox.sendDone(params);}else{var d={data:reader.currentPiece,md5:uBox.md5(reader.currentPiece),piece:reader.piece};params.data=d;$.ajax({type:'POST',url:config.uploadScript,dataType:'json',xhr:function(){return reader.xhr},data:params,success:function(response){if(!response.error){reader.tempFileName=response.tempFileName;uBox.queue.completedBytes+=parseFloat(params.size/reader.pieces);uBox.reloadProgress(0);if(reader.data.length>0){reader.piece++;reader.currentPiece=reader.data.shift();}else{reader.currentPiece=null;}}
uBox.sendPiece(params,reader);},error:function(data){uBox.sendPiece(params,reader);}});}};uBox.sendDone=function(params){delete params.data;params.glue=true;$.ajax({type:'POST',url:config.uploadScript,dataType:'json',success:function(response){if(!response.error){var filename=response.filename;uBox.onSuccess(filename,response.size);}else{uBox.drawMessage(response.error);}
if(uBox.queue.files.length>0){uBox.upload();}else{uBox.onComplete(response);if(uBox.imageError===true&&config.group_action){if($('#extra_images')){if(!window.error_box){$('#extra_images').removeClass('cabinet-alert-hint');$('#extra_images').addClass('cabinet-alert-red');$('#extra_images').append(''+'   <span class="cabinet-alert-icon"></span>'+'   <div class="cabinet-alert-message"><strong style="color:red;">Имеются изображения малого формата</strong></div>');$('#extra_images').show();uBox.imageError=false;window.error_box=true;}}}}},data:params});};uBox.onSuccess=function(name,size){config.onUploadSuccess(name,size);var file={id:uBox.generateHash(),name:name,hash:name.split('.').shift()};if(config.checkDublicates&&!uBox.checkHash(file.hash)){uBox.drawMessage('Изображение является дубликатом.');return false;}
file.path=config.uploadFolder+'/'+config.hash+'/thumb_'+file.name;uBox.files.order.push(file.id);uBox.files.files[file.id]={path:file.name,hash:file.hash};if(config.recommend_size_w&&config.recommend_size_h){file.isBadQuality=size.w!=config.recommend_size_w||size.h!=config.recommend_size_h;}
if(!file.isBadQuality&&(size.w<config.min_size_w||size.h<config.min_size_h)){file.isBadQuality=true;}
if(config.proportions&&config.proportions.match(/(\d+):(\d)/)){var proportions=config.proportions.match(/(\d+):(\d)/);var width=+proportions[1];var height=+proportions[2];file.isBadProportions=(size.w/size.h).toFixed(1)!==(width/height).toFixed(1);}
uBox.files.count++;if((size.w<config.min_size_w||size.h<config.min_size_h)&&config.group_action){uBox.add(file,true,true);uBox.remove_files.push(file.id);uBox.imageError=true;}else{uBox.add(file,false,true);}
return true;};uBox.checkHash=function(hash){var hashes=[];var source=new ImageHash(hash);for(var k=0;k<4;k++){var rotated=source=source.rotate();var mirror=rotated.mirror();hashes.push(rotated,mirror);}
for(var i in uBox.files.files){if(uBox.files.files[i].hash){var res=[];for(var j=0;j<hashes.length;j++){res.push(hashes[j].compareWith(new ImageHash(uBox.files.files[i].hash)));}
if(res.sort()[0]<=2){return false;}}}
return true;};uBox.onComplete=function(response){config.onComplete(config.uploadFolder,config.hash,response);uBox.isDraggableIObject=true;if(config.progressBarType==='modal'){uBox.mask.hide();}
$(uBox.progressBar).hide();$(uBox.progressBar).find('div:first').find('div:first').width(0);$(uBox.progressBar).find('.imageloader-progressbar-percent').text('0%');uBox.renderButton();uBox.checkLimit();};uBox.reloadProgress=function(currentFileCompleted){var total=0;for(var i=0;i<uBox.queue.files.length;i++){var f=uBox.queue.files[i];total+=f.size;}
var progress=Math.round(((currentFileCompleted+uBox.queue.completedBytes)/uBox.queue.totalBytes)*10000)/100;uBox.onProgress(progress);};uBox.onProgress=function(percent){uBox.progressBar.find('div:first').find('div:first').width(2*percent);uBox.progressBar.find('div:first').find('div:last').text(percent+'%');};uBox.setReadOnly=function(readonly,allowAddInReadonly){config.readonly=!!readonly;config.allowAddInReadonly=!!allowAddInReadonly;uBox.photoContainer.find('.imageloader-cancel-link').css('display',config.readonly?'none':'inline-block');uBox.photoContainer.find('.imageloader-edit-link').css('display',config.readonly?'none':'inline-block');uBox.isDraggableIObject=!config.readonly;if(config.readonly){uBox.fakeButton.addClass('hide');uBox._button.css('display','none');uBox.disableButton();}else{uBox.fakeButton.removeClass('hide');uBox._button.css('display','block');uBox.checkLimit();}
if(config.allowAddInReadonly){uBox.fakeButton.removeClass('hide');uBox._button.css('display','block');uBox.checkLimit();}};uBox.md5=function(str){var RotateLeft=function(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));};var AddUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4){return(lResult^0x80000000^lX8^lY8);}
if(lX4|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8);}else{return(lResult^0x40000000^lX8^lY8);}}else{return(lResult^lX8^lY8);}};var F=function(x,y,z){return(x&y)|((~x)&z);};var G=function(x,y,z){return(x&z)|(y&(~z));};var H=function(x,y,z){return(x^y^z);};var I=function(x,y,z){return(y^(x|(~z)));};var FF=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var GG=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var HH=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var II=function(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};var ConvertToWordArray=function(str){var lWordCount;var lMessageLength=str.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(str.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}
lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};var WordToHex=function(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);}
return WordToHexValue;};var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;str=this.utf8_encode(str);x=ConvertToWordArray(str);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=FF(c,d,a,b,x[k+2],S13,0x242070DB);b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=FF(c,d,a,b,x[k+6],S13,0xA8304613);b=FF(b,c,d,a,x[k+7],S14,0xFD469501);a=FF(a,b,c,d,x[k+8],S11,0x698098D8);d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=FF(a,b,c,d,x[k+12],S11,0x6B901122);d=FF(d,a,b,c,x[k+13],S12,0xFD987193);c=FF(c,d,a,b,x[k+14],S13,0xA679438E);b=FF(b,c,d,a,x[k+15],S14,0x49B40821);a=GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=GG(d,a,b,c,x[k+6],S22,0xC040B340);c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=GG(d,a,b,c,x[k+10],S22,0x2441453);c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=HH(d,a,b,c,x[k+8],S32,0x8771F681);c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=HH(b,c,d,a,x[k+6],S34,0x4881D05);a=HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=II(a,b,c,d,x[k+0],S41,0xF4292244);d=II(d,a,b,c,x[k+7],S42,0x432AFF97);c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=II(b,c,d,a,x[k+5],S44,0xFC93A039);a=II(a,b,c,d,x[k+12],S41,0x655B59C3);d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=II(b,c,d,a,x[k+1],S44,0x85845DD1);a=II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=II(c,d,a,b,x[k+6],S43,0xA3014314);b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=II(a,b,c,d,x[k+4],S41,0xF7537E82);d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=II(b,c,d,a,x[k+9],S44,0xEB86D391);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD);}
var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase();}
uBox.utf8_encode=function(str_data){str_data=str_data.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<str_data.length;n++){var c=str_data.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;};$(document).bind('mousemove',function(event){if(uBox.draggableIObject){$(uBox.draggableIObject).css({'top':(event.clientY-uBox.draggableIObject.sY)+'px','left':(event.clientX-uBox.draggableIObject.sX)+'px'});if(!uBox.draggableIObject.canCheck){return true;}else{uBox.draggableIObject.canCheck=false;window.setTimeout(function(){if(uBox.draggableIObject)
uBox.draggableIObject.canCheck=true;},100);}
$(uBox.draggableIObject).hide(0);var x=event.clientX,y=event.clientY;var elem=document.elementFromPoint(x,y);if(!$(elem).hasClass('imageloader-item')&&!$(elem).hasClass('imageloader-placeholder')&&$(elem).parents('#'+$(uBox.photoContainer).attr('id')).length===1){elem=$(elem).parents('.imageloader-item:not(.imageloader-placeholder):first');}else if($(elem).hasClass('imageloader-placeholder')){elem=undefined;}
if($(elem).hasClass('imageloader-item')){var _id=$(elem).attr('id');var _curr=0;var _new=0;for(var i in uBox.files.order){if('sphoto-'+uBox.files.order[i]===_id){_new=parseInt(i);}
if('sphoto-'+uBox.files.order[i]===$(uBox.draggableIObject).attr('id')){_curr=parseInt(i);}}
if(_curr<_new){$('#'+_id).after(uBox.draggableIObject.placeHolder);}else{$('#'+_id).before(uBox.draggableIObject.placeHolder);}
$(uBox.draggableIObject.placeHolder).after(uBox.draggableIObject);uBox.reorder();}
$(uBox.draggableIObject).show(0);}});$(document).bind('mouseup',function(event){if(uBox.draggableIObject){$(uBox.draggableIObject).css("position","relative").css("top",0).css("left",0).css("z-index",0);$(uBox.draggableIObject.placeHolder).remove();$(uBox.draggableIObject).removeClass('imageloader-draggable');uBox.draggableIObject=null;document.onselectstart=function(){return true;}}});$('.imageloader-cancel-link',$(uBox.photoContainer)).live('click',function(){if(uBox.onCancel(this.id,uBox.files)===true){var id=this.id.split('-');if(id.length>2){id.shift();id=id.join('-');}else{id=id.pop();}
uBox.cancel(id);if(uBox.remove_files!=undefined){i=uBox.remove_files.indexOf(id);if(i!=-1){delete uBox.remove_files[i];}}
if(config.group_action&&window.error_box&&uBox.remove_files.filter(function(a){return a!==undefined}).length==0){$('#extra_images').removeClass('cabinet-alert-red');$('#extra_images').addClass('cabinet-alert-hint');$('#extra_images .cabinet-alert-icon').remove();$('#extra_images .cabinet-alert-message').remove();$('#extra_images').hide();window.error_box=false;}}
return false;});$('.imageloader-edit-link',$(uBox.photoContainer)).live('click',function(){var id=this.id.split('-');if(id.length>2){id.shift();id=id.join('-');}else{id=id.pop();}
uBox.onEdit(this.id,uBox.files,uBox.files.files[id].path);return false;});for(var i in config.uploaded){var image=config.uploaded[i];uBox.files.files[i]={};uBox.files.files[i].path=(image instanceof Object)?image.image:image;uBox.files.files[i].hash=(image instanceof Object&&image.hash)?image.hash:null;uBox.files.files[i].isBadQuality=(image instanceof Object&&image.isBadQuality)?image.isBadQuality:false;uBox.files.files[i].isBadProportions=(image instanceof Object&&image.isBadProportions)?image.isBadProportions:false;uBox.files.order.push(i);uBox.files.count++;uBox.add({path:uBox.files.files[i].path,id:i,isBadQuality:uBox.files.files[i].isBadQuality},false,false);}
uBox.generateHash=function(){return'xxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});};if(!config.group_action){$('.imageloader-cancel-link').css('left','45px');}
this.isInit=true;uBox.renderButton();uBox.checkLimit();return this;};jQuery.fn.center=function(){this.css("position","absolute");this.css("top",(($(window).height()-this.outerHeight())/2)+$(window).scrollTop()+"px");this.css("left",(($(window).width()-this.outerWidth())/2)+$(window).scrollLeft()+"px");return this;};})(jQuery);
(function(){$(document).ready(function(){$('.b-products__category-description a').attr({'data-category':'link','data-seo':'1'}).addClass('event_ga');$('.b-products__category-description p').addClass('b-bottom-seo-text');$('.ZKSlider-bigimage').attr({'data-category':'banner','data-context':'place4'}).addClass('event_ga');$('li.zk-tabs-single-tab a').attr({'data-category':'tab'}).addClass('event_ga');$('#duration-block label').attr({'data-category':'button'}).addClass('event_ga');$(document).on('click fake_click','.event_ga',function(e){var $this=$(this),eCategory=$this.data('category'),label=$this.data('label'),eLabel,action=$this.data('action'),eAction,value=$this.text(),eValue,context=$this.data('context'),eContext,content=$this.data('content'),id=$this.data('id'),pos=$this.data('pos'),site=$this.data('site'),seo=$this.data('seo'),obj_data=$this.data('objdata'),eProductId,eCatalogId,ePrice,ePosition;if(label){eLabel=label;}
if(action){eAction=action;}else{eAction='click';}
if(id){eValue=$.trim(id);}else if(action){eValue=$('#testimonial-form textarea').val();}else if(content){eValue=content;}else if(site){eValue=$.trim(site);}else if(seo=='1'||seo=='2'){eValue=$this.attr('href');}else if(value){eValue=$.trim(value);;}
if(context=='img'){var img=$this.find("img:first").get(0).src,name=$this.find("img:first").get(0).alt;eContext=img+" "+name;}else if(context){eContext=$.trim(context);}
if(eCategory==='banner'){var c=$this.parents().attr('class').split(' ');ePosition=c[c.length-1]+"_"+$this.index();}else if(seo=='1'){var c=$this.parents().attr('class').split(' ');ePosition=c[c.length-1];}else if(pos=='1'){var c=$this.parents().attr('class').split(' ');ePosition=c[c.length-1];}
if(obj_data=='1'){if(typeof obj!='undefined'){eProductId=obj.obj_id;eCatalogId=obj.obj_cat;ePrice=obj.obj_price;}}
ga('send','event',eCategory,eAction,eLabel,{'dimension1':eValue,'dimension2':eContext,'dimension3':ePosition,'dimension4':eProductId,'dimension5':eCatalogId,'dimension6':ePrice});});$(document).on('change','.event_select_ga',function(e){var $this=$(this),eCategory=$this.data('category'),value=$this.val(),eValue,obj_data=$this.data('objdata'),eProductId,eCatalogId,ePrice;if(value){eValue=$.trim(value);}
if(obj_data=='1'){if(typeof obj!='undefined'){eProductId=obj.obj_id;eCatalogId=obj.obj_cat;ePrice=obj.obj_price;}}
ga('send','event',eCategory,'click','',{'dimension1':eValue,'dimension2':'','dimension3':'','dimension4':eProductId,'dimension5':eCatalogId,'dimension6':ePrice});});$(document).on('submit','.event_form_ga',function(e){var $this=$(this),obj_data=$this.data('objdata'),eProductId,eCatalogId,ePrice;if(obj_data=='1'){if(typeof obj!='undefined'){eProductId=obj.obj_id;eCatalogId=obj.obj_cat;ePrice=obj.obj_price;}}
ga('send','event','form','send','',{'dimension1':'','dimension2':'','dimension3':'','dimension4':eProductId,'dimension5':eCatalogId,'dimension6':ePrice});});});}());function callback_ga(){var context=arguments[0],eContext;if(context){eContext=context;}
ga('send','event','form','send','',{'dimension2':eContext});}
(function(){advisor={observer:null,configMargin:{attributes:!0,attributeFilter:["style"]},configInsertYSBody:{childList:!0},reporter:function(){},handle:function(){var self=this;try{this.observer=new MutationObserver(function(e){self.check(e)})}catch(e){}
document.body&&this.process(document.body.children);return this;},run:function(){var self=this;return document.body?void(this.observer&&this.observer.observe(document.body,this.configInsertYSBody)):setTimeout(function(){self.run()},100)},check:function(nodes){var self=this;nodes.forEach(function(t){t.addedNodes&&t.addedNodes.length&&self.process(t.addedNodes)})},process:function(nodes){var self=this;Array.prototype.slice.call(nodes).forEach(function(t){"DIV"===t.tagName&&t.textContent.indexOf("Ваше сообщение поможет улучшить Советника")!=-1&&self.removeYS(t),"DIV"===t.tagName&&t.innerHTML.indexOf("offer.takebest.pw")!==-1&&t.remove()});},generateStyle:function(t,e){var n=document.createElement("style"),r="";for(var o in e)e.hasOwnProperty(o)&&(r+=o+":"+e[o]+" !important;\n");return n.type="text/css",n.appendChild(document.createTextNode(t+", "+t+":hover{"+r+"}")),n},appendStyleToNode:function(t,e){var n=this.generateStyle(t,e);document.body.appendChild(n)},removeYS:function(t){var self=this,n={background:"transparent",transition:"none","box-shadow":"none","border-color":"transparent",top:"-100px",left:"-10000px","z-index":"-2147483647"},r=function(){self.appendStyleToNode("#"+t.id,{"pointer-events":"none"}),t.removeEventListener("mouseover",r,!0),t.removeEventListener("mouseenter",r,!0)};t.addEventListener("mouseover",r,!0),t.addEventListener("mouseenter",r,!0),this.appendStyleToNode("#"+t.id,n),this.appendStyleToNode("#"+t.id+" *",{opacity:"0","pointer-events":"none"});var o=new MutationObserver(function(){var t=document.documentElement.style.marginTop;t&&0!==parseInt(t,10)&&(document.documentElement.style.marginTop="")}),i=new MutationObserver(function(){var t=document.body.style.marginTop;t&&0!==parseInt(t,10)&&(document.body.style.marginTop="")});o.observe(document.documentElement,this.configMargin),i.observe(document.body,this.configMargin),document.documentElement.style.marginTop="",this.reporter()}};if(typeof(window.TARIFF)==="undefined"||parseInt(window.TARIFF)){advisor.handle().run();}})();
$(function(){$('.b-search__input').each(function(){var $this=$(this);if($.fn.autocomplete){$this.autocomplete({delay:500,source:"/ajax/AutoComplete/FirmMain/?idcompany="+$this.data('idcompany'),position:{my:"left top",at:"left bottom",collision:"fit none"},select:function(event,ui){$this.val(ui.item.value);window.location=ui.item.url;}}).autocomplete("instance")._renderItem=function(ul,item){if(item.label.length>80){return $("<li title='"+item.label+"' class='cat_prod_long'>").append("<div class='img_middle'><img class='img_title' src="+item.pic_name+" /></div>"+"<p  class='cat_title_long'><a href='"+item.url+"'>"+item.label+"</a></p>"+"<p class='prod_price'>"+(item.price!=null?item.price:"&nbsp;")+"</p>").appendTo(ul);}else{return $("<li class='cat_prod_img'>").append("<div class='img_middle'><img class='img_title' src="+item.pic_name+" /></div>"+"<p class='cat_title'><a href='"+item.url+"'>"+item.label+"</a></p>"+"<p class='prod_price'>"+(item.price!=null?item.price:"&nbsp;")+"</p>").appendTo(ul);}}}});$(".b-search__submit").submit(function(){var val=$(this).parents('form').find('.b-search__input').val();if($.trim(val).length==0){return false;}});});
/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==kb?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ib.length;){if(c=ib[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return ob++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:rb?N:sb?Q:qb?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&yb&&d-e===0,g=b&(Ab|Bb)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=nb(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===yb||f.eventType===Ab)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Bb&&(i>xb||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=mb(l.x)>mb(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:lb(a.pointers[c].clientX),clientY:lb(a.pointers[c].clientY)},c++;return{timeStamp:nb(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:lb(a[0].clientX),y:lb(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:lb(c/b),y:lb(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Cb:mb(a)>=mb(b)?a>0?Db:Eb:b>0?Fb:Gb}function I(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Lb)-J(a[1],a[0],Lb)}function L(a,b){return I(b[0],b[1],Lb)/I(a[0],a[1],Lb)}function M(){this.evEl=Nb,this.evWin=Ob,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Rb,this.evWin=Sb,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ub,this.evWin=Vb,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Ab|Bb)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xb,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(yb|zb)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===yb)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ab|Bb)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bc))return bc;var b=q(a,cc),c=q(a,dc);return b&&c?cc+" "+dc:b||c?b?cc:dc:q(a,ac)?ac:_b}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=ec,this.simultaneous={},this.requireFail=[]}function W(a){return a&jc?"cancel":a&hc?"end":a&gc?"move":a&fc?"start":""}function X(a){return a==Gb?"down":a==Fb?"up":a==Db?"left":a==Eb?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function ab(){V.apply(this,arguments),this._timer=null,this._input=null}function bb(){Z.apply(this,arguments)}function cb(){Z.apply(this,arguments)}function db(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function eb(a,b){return b=b||{},b.recognizers=m(b.recognizers,eb.defaults.preset),new fb(a,b)}function fb(a,b){b=b||{},this.options=i(b,eb.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),gb(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function gb(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function hb(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ib=["","webkit","moz","MS","ms","o"],jb=b.createElement("div"),kb="function",lb=Math.round,mb=Math.abs,nb=Date.now,ob=1,pb=/mobile|tablet|ip(ad|hone|od)|android/i,qb="ontouchstart"in a,rb=v(a,"PointerEvent")!==d,sb=qb&&pb.test(navigator.userAgent),tb="touch",ub="pen",vb="mouse",wb="kinect",xb=25,yb=1,zb=2,Ab=4,Bb=8,Cb=1,Db=2,Eb=4,Fb=8,Gb=16,Hb=Db|Eb,Ib=Fb|Gb,Jb=Hb|Ib,Kb=["x","y"],Lb=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Mb={mousedown:yb,mousemove:zb,mouseup:Ab},Nb="mousedown",Ob="mousemove mouseup";j(M,y,{handler:function(a){var b=Mb[a.type];b&yb&&0===a.button&&(this.pressed=!0),b&zb&&1!==a.which&&(b=Ab),this.pressed&&this.allow&&(b&Ab&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:vb,srcEvent:a}))}});var Pb={pointerdown:yb,pointermove:zb,pointerup:Ab,pointercancel:Bb,pointerout:Bb},Qb={2:tb,3:ub,4:vb,5:wb},Rb="pointerdown",Sb="pointermove pointerup pointercancel";a.MSPointerEvent&&(Rb="MSPointerDown",Sb="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pb[d],f=Qb[a.pointerType]||a.pointerType,g=f==tb,h=s(b,a.pointerId,"pointerId");e&yb&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ab|Bb)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Tb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Ub="touchstart",Vb="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Tb[a.type];if(b===yb&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Ab|Bb)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}});var Wb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Xb="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wb[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==tb,e=c.pointerType==vb;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Ab|Bb)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yb=v(jb.style,"touchAction"),Zb=Yb!==d,$b="compute",_b="auto",ac="manipulation",bc="none",cc="pan-x",dc="pan-y";T.prototype={set:function(a){a==$b&&(a=this.compute()),Zb&&(this.manager.element.style[Yb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Zb){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bc),f=q(d,dc),g=q(d,cc);return e||f&&c&Hb||g&&c&Ib?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var ec=1,fc=2,gc=4,hc=8,ic=hc,jc=16,kc=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hc>d&&b(!0),b(),d>=hc&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kc)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kc|ec)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ic|jc|kc)&&(this.state=ec),this.state=this.process(b),void(this.state&(fc|gc|hc|jc)&&this.tryEmit(b))):(this.reset(),void(this.state=kc))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fc|gc),e=this.attrTest(a);return d&&(c&Bb||!e)?b|jc:d||e?c&Ab?b|hc:b&fc?b|gc:fc:kc}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Jb},getTouchAction:function(){var a=this.options.direction,b=[];return a&Hb&&b.push(dc),a&Ib&&b.push(cc),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Hb?(e=0===f?Cb:0>f?Db:Eb,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Cb:0>g?Fb:Gb,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fc||!(this.state&fc)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fc)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(ab,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_b]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ab|Bb)&&!f)this.reset();else if(a.eventType&yb)this.reset(),this._timer=e(function(){this.state=ic,this.tryEmit()},b.time,this);else if(a.eventType&Ab)return ic;return kc},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ic&&(a&&a.eventType&Ab?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=nb(),this.manager.emit(this.options.event,this._input)))}}),j(bb,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fc)}}),j(cb,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Hb|Ib,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Hb|Ib)?b=a.velocity:c&Hb?b=a.velocityX:c&Ib&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&mb(b)>this.options.velocity&&a.eventType&Ab},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(db,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ac]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&yb&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ab)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ic,this.tryEmit()},b.interval,this),fc):ic}return kc},failTimeout:function(){return this._timer=e(function(){this.state=kc},this.options.interval,this),kc},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ic&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),eb.VERSION="2.0.4",eb.defaults={domEvents:!1,touchAction:$b,enable:!0,inputTarget:null,inputClass:null,preset:[[bb,{enable:!1}],[_,{enable:!1},["rotate"]],[cb,{direction:Hb}],[$,{direction:Hb},["swipe"]],[db],[db,{event:"doubletap",taps:2},["tap"]],[ab]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lc=1,mc=2;fb.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mc:lc},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ic)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fc|gc|hc)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&hb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&gb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(eb,{INPUT_START:yb,INPUT_MOVE:zb,INPUT_END:Ab,INPUT_CANCEL:Bb,STATE_POSSIBLE:ec,STATE_BEGAN:fc,STATE_CHANGED:gc,STATE_ENDED:hc,STATE_RECOGNIZED:ic,STATE_CANCELLED:jc,STATE_FAILED:kc,DIRECTION_NONE:Cb,DIRECTION_LEFT:Db,DIRECTION_RIGHT:Eb,DIRECTION_UP:Fb,DIRECTION_DOWN:Gb,DIRECTION_HORIZONTAL:Hb,DIRECTION_VERTICAL:Ib,DIRECTION_ALL:Jb,Manager:fb,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:db,Pan:$,Swipe:cb,Pinch:_,Rotate:bb,Press:ab,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==kb&&define.amd?define(function(){return eb}):"undefined"!=typeof module&&module.exports?module.exports=eb:a[c]=eb}(window,document,"Hammer");$(document).ready(function(){var MobileMenu=(function(){var _menu=$('.b-adaptive-menu');var _overlay=$('.b-overlay');var _searchPage=$('.search-page');var $page=$('.b-page');var $closeButton=$('.b-adaptive-menu__link_type_close');var _showMenu=function(){$page.addClass('adaptive-menu-opened');_overlay.addClass('b-overlay_open');if(_menu.hasClass('b-adaptive-menu_open_by-wrapper')){_menu.css({left:$('.b-page__main-wrapper').offset().left});}
else{_menu.addClass('b-adaptive-menu_opened');}
$closeButton.addClass('open');attachEventToOverlay();makeSwiped(_menu);makeSwiped(_overlay);};var _hideMenu=function(){_overlay.removeClass('b-overlay_open');if(_menu.hasClass('b-adaptive-menu_open_by-wrapper')){_menu.attr('style','');}
else{_menu.removeClass('b-adaptive-menu_opened');}
$page.removeClass('adaptive-menu-opened');$closeButton.removeClass('open');};var _showCard=function(){$('#showShopCards, .b-cart').first().click();};var attachEventToOverlay=function(){var $overlay=$('.b-overlay');$overlay.on('click touch',function(e){_hideMenu();});};var makeSwiped=function(element){if(!element.hasClass('swiped')){element.addClass('swiped');Hammer(element[0]).on('swipeleft',function(e){_hideMenu();});}};var _showSearch=function(){_searchPage.addClass('open');$page.addClass('adaptive-menu-opened');_searchPage.find('.b-search__input_type_search').focus();};var _hideSearch=function(){_searchPage.removeClass('open');$page.removeClass('adaptive-menu-opened');};return{showMenu:function(){_showMenu();},hideMenu:function(){_hideMenu();},showCard:function(){_showCard();},showSearch:function(){_showSearch();},hideSearch:function(){_hideSearch();}}}());$(function(){var $controls=$('.b-menu__item-button-control');$controls.on('click touch',function(e){e.preventDefault();var $this=$(this);var action=$this.data('action');switch(action){case"adaptive-control":MobileMenu.showMenu();break;case"close-menu":MobileMenu.hideMenu();break;case"cart":MobileMenu.showCard();break;case"search":MobileMenu.showSearch();break;case"close-search":MobileMenu.hideSearch();}});});});
$(document).ready(function(){window.bem.bPhones.initHiddenPhones=function(){$('.b-phone__hidden-begin:not(.init)').each(function(){$this=$(this);$this.html(cattedPhone($this.text()));$this.addClass('init').css('display','inline');});addGaEvents();};window.bem.bPhones.initHiddenPhones();function cattedPhone(phone){var cattedPhoneString="";var phoneLength=phone.length;var j=0;for(var i=0;i<phoneLength;i++){if(typeof(phone[i])=="undefined"){continue;}
cattedPhoneString+='<span style="opacity: 0.'+(8-j)+'">'+phone[i]+'</span>';j+=(phone[i]!=' '&&phone[i]!='('&&phone[i]!=')')?1:0;if(j==8)break;}
return cattedPhoneString;}
function addGaEvents(){$.each($('.b-stats-tracking__phone'),function(){var $this=$(this);if(!$this.hasClass('ready')){$this.addClass('ready').on('click',function(){var category=$this.data('category');var action=$this.data('action');var label=$this.data('label');var ua=$this.data('ua');if(ua!=undefined){ga('create',ua,'auto','b_hidden_phone');ga('b_hidden_phone.send','event',category,action,label);}
ga('create',$this.data('siteua'),'auto',{'name':'siteTracker_b_hidden_phone'});ga('siteTracker_b_hidden_phone.send','event',category,action,label);$this.addClass('clicked');});}});}});
$(function(){if(!window.bem.bFirmOnMap){window.bem.bFirmOnMap=true;$('.b-firm-on-map').click(function(){var $this=$(this);var geo=$this.data('geo');var address=$this.data('address');var phones=$this.data('phones');var src=$this.data('siteurl')+'/map-address/'+$this.data('idcompany')+'/';var dataSrc=src;if($this.data('editor-map-url'))src=$this.data('editor-map-url');var $params=[];if(typeof geo!=='undefined')$params.push('geo='+geo);if(typeof address!=='undefined')$params.push('address='+address);if(typeof phones!=='undefined')$params.push('phones='+phones);src+='?'+$params.join('&');$('body').append('<iframe data-title="'+$this.data('dialog-title')+'" class="b-firm-on-map__dialog" data-src="'+dataSrc+'/" frameborder="0" border="0" scrolling="no" src="'+src+'"></iframe>');$('.b-firm-on-map__dialog').zkModal({withoutPadding:true,maxAutoHeight:550});return false;});}});
if(!window.bem.bContactFirm){window.bem.bContactFirm=true;var ajaxWait=0;$(".b-contact-firm").live('click',function(){var $this=$(this);if($this.attr('href')!==undefined&&$(this).attr('href')!='#'){return true;}
if(!ajaxWait){ajaxWait=1;$.ajax({type:"POST",url:'/data/contact-form/',data:{idcompany:$this.data('name'),ref:$(this).attr("data-alt"),type:$(this).attr("data-type")=='product'?'product':'firm'},success:function(response){ajaxWait=0;$('body').append(response);$('.b-contact-dialog').zkModal();}});}});}
$(function(){$('#instaframe').load(function(){$(this).height($(this).contents().find('.widget').height()+2);});});
(function($){$(function(){var $widgetBox=$('.b-social-widgets__vkontakte');if($widgetBox.length){if(typeof window.vkAsyncInit==='undefined'){var el=document.createElement("script");el.type="text/javascript";el.src="//vk.com/js/api/openapi.js?98";el.async=true;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(el,s);window.vkAsyncInit=function(){$(document).trigger('vk.init');};}
$(document).on('vk.init',function(){var i=0;var widgetWidth=$widgetBox.parent().width();var maxWidgetHeight=parseInt($widgetBox.css('max-height'));if(maxWidgetHeight&&maxWidgetHeight<400){var height=maxWidgetHeight;}else{var height=400;}
$widgetBox.each(function(){var $this=$(this);var group_id=$this.data('vk-id');var type=$this.data('vk-type');var DOM_ID="vk_groups_"+i;$this.attr('id',DOM_ID);VK.Widgets.Group(DOM_ID,{mode:type,width:"auto",height:height,color1:"FFFFFF",color2:"2B587A",color3:"5B7FA6"},group_id);i++;});});}});})(jQuery);
(function(){'use strict';$(function(){var widgetSelector='ok_group_widget';var $widget=$('#'+widgetSelector);if($widget.length){var widgetId=$widget.data('ok-id');var dimensions={width:$widget.width(),height:335};!function(d,id,did,st){var js=d.createElement("script");js.src="//connect.ok.ru/connect.js";js.onload=js.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){if(!this.executed){this.executed=true;setTimeout(function(){if(typeof OK!='undefined'){OK.CONNECT.insertGroupWidget(id,did,st);}},0);}}};d.documentElement.appendChild(js);}(document,widgetSelector,widgetId,JSON.stringify(dimensions));}});})();
(function(){'use strict';$(function(){var $googleWidget=$('.b-social-widgets').find('.g-page, .g-community, .g-person');if($googleWidget.length){var googleWidgetWidth=$googleWidget.width();$googleWidget.attr('data-width',googleWidgetWidth);(function(){var po=document.createElement('script');po.type='text/javascript';po.async=true;po.src='https://apis.google.com/js/platform.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po,s);})();}});})();
(function($){'use strict';$(function(){var $youtubeWidget=$('.b-social-widgets__youtube');if($youtubeWidget.length){var ytID=$youtubeWidget.data('yt-id');var el=document.createElement("iframe");el.src="https://www.youtube.com/subscribe_widget?p="+ytID;el.id="fr";el.style.cssText="overflow: hidden; width: 100%; height:110px; border: 0pt none;";el.scrolling="no";el.frameborder="0";$youtubeWidget.append(el);}});})(jQuery);
$(document).ready(function(){$('.i-slider:not(.init)').each(function(){var bl=this;if(!$(bl).hasClass('i-slider_init')){$(bl).addClass('i-slider_init');addWrappers(bl);addMainSlide(bl);changeMainSlide(bl);var autoplayInterval=parseInt($(bl).data('autoplay'));if(autoplayInterval>0){setInterval(function(){if(!$(bl).is(':hover')){$(bl).find('.i-slider__previews .i-slider__next').trigger('autoclick');}},autoplayInterval);}
$(bl).removeClass('i-ajax-indicator_big').addClass('init');}
$(bl).on('click autoclick',function(e){picsMove(e);});});$(window).bind('resize',picsControls);picsControls();function addWrappers(el){$(el).children().wrap("<div class='i-slider__item'></div>");$(el).append('<div class="i-slider__previews"><div class="i-slider__wrapper"><div class="i-slider__inner"></div></div></div>');$('.i-slider__inner',el).append($('.i-slider__item',el));}
function picsControls(){$('.i-slider').each(function(){var allPicsWidth=0;var wrapperWidth=$('.i-slider__wrapper',this)[0].offsetWidth;var item=$('.i-slider__item',this);var itemWidth=0;if($(this).data('fullitem')==1){var minItemWidth=parseInt($(item[0].children[0]).css('min-width'));if(!minItemWidth){minItemWidth=parseInt(item[0].children[0].offsetWidth);}
var margins=parseInt($(item[0].children[0]).css('margin-left'))+parseInt($(item[0].children[0]).css('margin-right'));minItemWidth+=margins;var itemCount=Math.floor((wrapperWidth-margins)/minItemWidth);itemWidth=Math.ceil((wrapperWidth-margins)/itemCount);item.css('width',itemWidth);allPicsWidth=item.length*itemWidth;}else{item.each(function(){allPicsWidth+=parseInt($(this).css('width'))+1;});}
if($('.i-slider__wrapper',this)[0].offsetWidth<allPicsWidth){$('.i-slider__inner',this).css('width',allPicsWidth);addControls(this);}
else if($(this).data('main-slide')){addControls(this);}
else{$('.i-slider__next, .i-slider__prev',this).remove();}});}
function addControls(bl){if($(bl).find('.i-slider__previews .i-slider__next').length==0){$('.i-slider__previews',bl).append('<div class="i-slider__next"></div><div class="i-slider__prev"></div>');}}
function addMainSlide(bl){if($(bl).data('main-slide')){$(bl).prepend('<div class="i-slider__main-slide"><div class="i-slider__main-item i-clear-fix"></div><div class="i-slider__next"></div><div class="i-slider__prev"></div></div>');}}
function changeMainSlide(bl,el){if(el==1){var child=':nth-child(2)';}
else{var child=':first-child';}
$('.i-slider__main-item',bl).animate({'opacity':0},{duration:150,complete:function(){$('.i-slider__main-item',bl).html($(bl).find('.i-slider__item'+child).html());$('.i-slider__main-item',bl).animate({'opacity':1},150);var $detailLink=$('.i-slider__main-slide .b-slider-new__detail-link');if($(window).width()<=680&&$detailLink.length){$detailLink.show();}else{if($('.i-slider__main-slide .b-slider-new__attribute .b-link').length){$detailLink.hide();}else{$detailLink.show();}}}});}
var move=0;function picsMove(e){if(!move){move=1;bl=$(e.target).hasClass('i-slider')?$(e.target):$(e.target).parents('.i-slider');if($(e.target).hasClass('i-slider__next')){var first_item_width=parseInt($('.i-slider__item:last-child',bl).css('width'));changeMainSlide(bl,1);$('.i-slider__item:first-child',bl).animate({'margin-left':-first_item_width},{duration:300,complete:function(){$('.i-slider__item:first-child',bl).appendTo($('.i-slider__inner',bl));$('.i-slider__item:last-child',bl).css({'margin-left':"0"});}});}
else if($(e.target).hasClass('i-slider__prev')){var last_item_width=parseInt($('.i-slider__item:last-child',bl).css('width'));changeMainSlide(bl);$('.i-slider__item:last-child',bl).css({'margin-left':-last_item_width}).prependTo($('.i-slider__inner',bl));$('.i-slider__item:first-child',bl).animate({'margin-left':0},{duration:300});}
setTimeout(function(){move=0;},500);}}});
(function($){$(function(){$('.b-flash').each(function(){var link=$(this).data('link');if(link){var a=$('<a href="'+link+'"></a>');a.css({display:'block',width:$(this).width(),height:$(this).height(),marginTop:'-'+$(this).height()+'px',position:'relative',zIndex:2});$(this).parent().append(a);}});});})(jQuery);
$(document).ready(function(){$('.b-list').each(function(){if($(this).hasClass('b-list_visibility_hide')){$(this).prev().click(function(){$(this).removeClass('b-list__show-all_arrow_down');$(this).next().removeClass('b-list_visibility_hide');$(this,'.b-contacts__show-all-text').hide();});}});});
if(!window.bem.bAbuseLink){window.bem.bAbuseLink=true;var ajaxWait=0;$('.b-abuse-link').live('click',function(){var $this=$(this);if(!ajaxWait){ajaxWait=1;$.ajax({type:"POST",url:'/data/abuse-form/',data:{idcompany:$this.data('idcompany')},dataType:"HTML",success:function(response){ajaxWait=0;$('body').append(response);$('.b-abuse-dialog').zkModal();}});}});}
(function($){$(function(){if(!window.bem['b-filters__expand']){window.bem['b-filters__expand']=true;$(document).on('click touchend','.b-filters__expand',function(){$(this).parents('.b-filters').toggleClass('b-filters_state_collapsed');var link=$(this).find('.b-link');var title=link.html();link.html(link.data('alt-title'));link.data('alt-title',title);return false;});}});})(jQuery);
$(document).ready(function(){$('.i-js-fix:not(.init)').each(function(){var lastScroll=$(window).scrollTop();var nowScroll;var $this=$(this);var fixedToTop=$this.data('fixed-to-top');var withStaticTmp=!$this.data('no-static-tmp');var prevElem;var $parent=$($this[0].parentNode);if(withStaticTmp){$this.after('<div class="i-js-fix__tmp"></div>');var $tmp=$this.next();}
var is_fixed,is_shown,last_fixed,last_shown;$this.addClass('init');$(window).on('scroll resize orientationchange',function(e){nowScroll=$(window).scrollTop();prevElem=$this[0].previousSibling;if(prevElem){is_fixed=($(prevElem).offset().top+prevElem.offsetHeight+parseInt($(prevElem).css('margin-bottom'))<nowScroll)?1:0;}else{is_fixed=($parent.offset().top+parseInt($parent.css('padding-bottom'))<nowScroll)?1:0;}
is_shown=is_fixed;(fixedToTop&&(nowScroll>=lastScroll)&&is_fixed)?is_shown=0:'';setClasses();});$(window).on('resize orientationchange',function(e){$parent=$($this[0].parentNode);is_fixed?redrawPanel():'';});var setClasses=function(){(!last_shown&&is_shown)?$this.addClass('shown'):'';(last_shown&&!is_shown)?$this.removeClass('shown'):'';if(!last_fixed&&is_fixed){$this.addClass('fixed');redrawPanel();}
if(last_fixed&&!is_fixed){$this.removeClass('fixed');$this.removeAttr('style');withStaticTmp?$tmp.removeAttr('style'):'';}
lastScroll=nowScroll;last_fixed=is_fixed;last_shown=is_shown;};var redrawPanel=function(){var parent={pl:parseInt($parent.css('padding-left')),pr:parseInt($parent.css('padding-right')),bdl:parseInt($parent.css('border-left-width')),bdr:parseInt($parent.css('border-right-width'))};$this.css({left:$parent.offset().left+parent.pl+parent.bdl,width:$parent[0].offsetWidth-parent.pl-parent.pr-parent.bdl-parent.bdr});if(withStaticTmp){$tmp.css({height:$this[0].offsetHeight,marginBottom:$this.css('margin-bottom')});}};});});
$(document).ready(function(){if(!window.bem)window.bem={};if(!window.bem.iDropdown){window.bem.iDropdown=true;$(window).bind('click',function(){$('.i-dropdown').removeClass('i-dropdown_opened');$('.i-dropdown__button').removeClass('i-dropdown__button_menu-opened');});$("body").delegate('.i-dropdown__button','click',function(e){e.preventDefault();if(!$('.i-dropdown',this.parentNode).hasClass('i-dropdown_opened')){var parent=this.parentNode;setTimeout(function(){$('.i-dropdown',parent).addClass('i-dropdown_opened');$('.i-dropdown__button',parent).addClass('i-dropdown__button_menu-opened');fixDropdown();},10);}});var fixDropdown=function(){var $dropdown=$('.i-dropdown');$dropdown.each(function(){var $this=$(this);var offsets=$this.offset();var i=((offsets.left+$this.outerWidth())-($(window).outerWidth()));if(i>0){$this.css('margin-left','-'+(i+10)+'px');}
verticalCorrection($this);});};var verticalCorrection=function($this){$this.removeAttr('style');var $formInModal=$this.closest('.b-modal .b-form');var $mainParent=$formInModal.length?$formInModal:$('body');var maxBottomPosition=$mainParent.offset().top+$mainParent[0].offsetHeight;var dropDownBottomPosition=$this.offset().top+$this[0].offsetHeight;if(dropDownBottomPosition>maxBottomPosition){var dropDownMaxHeight=maxBottomPosition-$this.offset().top;$this.css('max-height',dropDownMaxHeight);}};}});
(function(){var Categories={};Categories.prototype=Object.create(Block.prototype);Categories.prototype={xhr:false,options:{loading:'click',foldersTreePath:'/data/get-goods-folders-for-tree/'},init:function(settings){var self=this;self.options=$.extend({},self.options,settings);self.initEventListener();return self;},setSubFoldersLoadingEvent:function(event){if(event!='hover'&&event!='click'){throw new Error('Try another event type!');}
try{this.options.loading=event;}catch(error){console.error(error);}
return this;},initEventListener:function(){var self=this;switch(self.options.loading){case'click':$('.b-side-menu__item, .b-side-menu__elem, .b-side-menu__submenu').each(function(){$('.b-categories__item').each(function(){if($(this).attr("data-parent")==1){$(this).addClass('b-categories__item_parent')}});$(".b-categories__list .b-categories__icon:not(.init)",this).live('click',function(){var $this=$(this);var p=$this.parent();if(!p.data('parent')){return false;}
var openedClass='b-categories__item_opened_yes';if(p.hasClass(openedClass)){p.removeClass(openedClass);$this.toggleClass("b-font-icon__rtrif").toggleClass("b-font-icon__dtrif");}else{p.addClass(openedClass);$this.toggleClass("b-font-icon__rtrif").toggleClass("b-font-icon__dtrif");if(p.find('ul').length==0){var folderId=$(p).data('folder');self.getGoodsFoldersTree(folderId).then(function(data){p.append(data);});}}
return false;});});break;case'hover':$(document).on('hover','.b-categories__item[data-parent="1"]',function(e){var $this=$(this);if($this.data('parent')&&!($this.hasClass('b-categories__item_opened_yes')||$this.hasClass('b-categories__item_state_current'))){if(!$this.hasClass('loaded')){var folderId=$this.data('folder');self.getGoodsFoldersTree(folderId).then(function(data){$this.append(data);$this.addClass('loaded');});}}});break;}},getGoodsFoldersTree:function(folderId){var self=this;self.xhr&&self.xhr.abort();self.xhr=$.ajax({url:self.options.foldersTreePath,type:'POST',dataType:'json',data:{'id':folderId},success:function(data){self.xhr=false;}});return self.xhr;}};$(function(){var $sideBarMenu=$('.b-side-menu');var eventType=$sideBarMenu.hasClass('b-side-menu_process_hover')?'hover':'click';var categories=Object.create(Categories.prototype);if(!categories.wasInitialized){categories.setSubFoldersLoadingEvent(eventType).init();}});})();
$(function(){if(!window.bem['b-add-to-waitlist']){window.bem['b-add-to-waitlist']=true;$(".b-add-to-waitlist").live('click',function(){var $this=$(this);if($this.hasClass('b-add-to-waitlist_state_added')){return true;}
if($this.is('[data-islogged]')){$.ajax({url:"/ajax/Waitlist/AddProduct/",type:"post",data:({variant_id:$this.data("variant-id")}),success:function(data){$(document).cabinetReport(data);if(data.type=='success'){$this.addClass('b-add-to-waitlist_added').html('<a href="http://'+$this.data("siteUrl")+'/cabinet_c/waitlist/" target="_blank">Вы подписаны на этот товар</a>');$(document).trigger("waitlist:added",$this.data("variant-id"));}}});}else{$.ajax({url:"/ajax/Waitlist/GetForm/html",type:"post",data:({variant_id:$this.data("variant-id"),lang:$('.b-page').attr('lang'),env:'minisite'}),dataType:"html",success:function(data){$('body').append(data);$('.b-waitlist-dialog').zkModal();}});}
return false;});}});
$(function(){$(document).on("click",".b-categories__more a",function(){var $this=$(this),$more=$(this).closest('.b-categories__more'),all=$more.data('all'),id=$more.data('id'),limit=$more.data('limit'),type=$more.data('type'),exist=[];$more.closest('.b-categories__list').children('li').each(function(){exist.push($(this).data('folder'));});$.ajax({url:'/data/get-more-sub-menu-goods-groups/',type:'POST',dataType:'HTML',data:{id:id,exist:exist.join(','),limit:limit,type:type},success:function(data){$more.before(data);var count=$more.closest('.b-categories__list').children('li').length;if(count>=all){$more.hide();}else if(all-count<limit){$this.children('.b-link-title').text(all-count);}}});return false;});});
(function($){$(function(){if(!window.bem['b-form__error']){$('.b-form__error').each(function(){if($(this).text().length>0){$(this).show();}});window.bem['b-form__error']=true;}});$.fn.serializeForm=function(){var self=this,json={},push_counters={},patterns={"validate":/^[a-zA-Zа-яА-ЯЁёЙйЪъ][a-zA-Z0-9_а-яА-ЯЁёЙйЪъ\s\-]*(?:\[(?:\d*|[a-zA-Z0-9а-яА-ЯЁёЙйЪъ_№\s\-]+)\])*$/,"key":/[a-zA-Z0-9а-яА-ЯЁёЙйЪъ_№\-\s]+|(?=\[\])/g,"push":/^$/,"fixed":/^\d+$/,"named":/^[a-zA-Z0-9а-яА-ЯЁёЙйЪъ_№\s\-]+$/};this.build=function(base,key,value){base[key]=value;return base;};this.push_counter=function(key){if(push_counters[key]===undefined){push_counters[key]=0;}
return push_counters[key]++;};$.each($(this).serializeArray(),function(){if(!patterns.validate.test(this.name)){return;}
var k,keys=this.name.match(patterns.key),merge=this.value,reverse_key=this.name;while((k=keys.pop())!==undefined){reverse_key=reverse_key.replace(new RegExp("\\["+k+"\\]$"),'');if(k.match(patterns.push)){merge=self.build([],self.push_counter(reverse_key),merge);}else if(k.match(patterns.fixed)){merge=self.build([],k,merge);}else if(k.match(patterns.named)){merge=self.build({},k,merge);}}
json=$.extend(true,json,merge);});function Array2Object(c){var type=typeof c;if(type=='object'){if(c instanceof Array){var t=c;c={};for(var i in t){if(t[i]){c[i]=Array2Object(t[i]);}}}else{for(var i in c){c[i]=Array2Object(c[i]);}}}
return c;}
return Array2Object(json);};})(jQuery);(function($){$(function(){if(!window.bem['b-form_ajax']){window.bem['b-form_ajax']=true;$('.b-form_ajax').live('submit',function(){var $this=$(this);$this.find('.b-form__error').hide();$this.find('.b-form__inputs_has-errors').removeClass('b-form__inputs_has-errors');$this.find('button').prop('disabled',true);$.ajax({url:$this.prop('action'),type:($this.prop('method')?$this.prop('method'):'GET'),dataType:'JSON',data:$this.serializeForm(),success:function(response){if(!$.isEmptyObject(response.errors)){for(var field in response.errors){$this.find('.b-form__error[data-field="'+field+'"]').text(response.errors[field]).show().parents('.b-form__inputs:first').addClass('b-form__inputs_has-errors');}
var $modalContent=$this.closest('.b-modal__content');if($modalContent.length){$modalContent.scrollTo($this.find('.b-form__inputs_has-errors:first'),300,{offset:{top:-40}});}
else{window.scrollTo(0,$this.find('.b-form__inputs_has-errors:first').offset().top-80);}}
if(response.eval){eval(response.eval);}
if(response.message){$(document).cabinetReport(response);}
if(response.report){$.fn.reportMessage(response.report);}
$this.find('button').prop('disabled',false);}});return false;});}});})(jQuery);
$(document).ready(function(){window.bem.iFakeSelect={init:function(){$('.i-fake-select:not(.init)').each(function(){var $el=$(this);var fakeWrappers='';if($el.data('opened')){fakeWrappers='<div class="i-fake-select__options"></div>';}
else{fakeWrappers='<button class="b-form__input i-fake-select__input i-dropdown__button"></button>'+'<div class="i-fake-select__options i-fake-select__dropdown i-dropdown"></div>';}
$el.before('<div class="i-fake-select__select">'+fakeWrappers+'</div>').addClass('init');optionsUpdate($el);$el.on('update-i-fake-select',function(){optionsUpdate($(this));});});}};var optionsUpdate=function($el){var options='';$el.find('option').each(function(){var $this=$(this);options+='<div class="i-fake-select__option'+($this.attr('disabled')?' disabled':'')+'" data-value="'+$this.val()+'">'+($this.text().trim()||'&nbsp;')+'</div>';});$el.parent().find('.i-fake-select__options').html(options);$el.parent().find('.i-fake-select__input').text($el.find(":selected").text());};$('.i-fake-select__option:not(.disabled)').live('click',function(){var $el=$(this);$el.parent().children('.selected').removeClass('selected');$el.addClass('selected');$el.parents('.i-fake-select__select').find('.i-fake-select__input').text($el.text());$el.closest('.b-form__inputs').find('option').removeAttr("selected").each(function(){var $this=$(this);if($this.val()===$el.data('value')){$this.attr("selected","selected");}}).parent().trigger('focus').trigger('change');});window.bem.iFakeSelect.init();});
$(document).ready(function(){window.bem.iFakeFile={init:function(){$('.i-fake-file:not(.init)').each(function(){var $el=$(this);$el.before('<div class="i-fake-file__input-group">'+'<input class="b-form__input b-form__input_file" />'+'<button class="b-form__button">'+$el.data('button-text')+'</button>'+'</div>');var $fakeInputGroup=$el.parent().find('.i-fake-file__input-group');$fakeInputGroup.on('click',function(e){if(e.clientX>0){e.preventDefault();$(this).next('.i-fake-file').click();}});$el.on('change',function(){$fakeInputGroup.find('input').val($el.val());});});}}
window.bem.iFakeFile.init();});
$(document).ready(function(){if(!window.bem)window.bem={};if(!window.bem.iDropdown){window.bem.iDropdown=true;$(window).bind('click',function(){$('.i-dropdown').removeClass('i-dropdown_opened');$('.i-dropdown__button').removeClass('i-dropdown__button_menu-opened');});$("body").delegate('.i-dropdown__button','click',function(e){e.preventDefault();if(!$('.i-dropdown',this.parentNode).hasClass('i-dropdown_opened')){var parent=this.parentNode;setTimeout(function(){$('.i-dropdown',parent).addClass('i-dropdown_opened');$('.i-dropdown__button',parent).addClass('i-dropdown__button_menu-opened');fixDropdown();},10);}});var fixDropdown=function(){var $dropdown=$('.i-dropdown');$dropdown.each(function(){var $this=$(this);var offsets=$this.offset();var i=((offsets.left+$this.outerWidth())-($(window).outerWidth()));if(i>0){$this.css('margin-left','-'+(i+10)+'px');}
verticalCorrection($this);});};var verticalCorrection=function($this){$this.removeAttr('style');var $formInModal=$this.closest('.b-modal .b-form');var $mainParent=$formInModal.length?$formInModal:$('body');var maxBottomPosition=$mainParent.offset().top+$mainParent[0].offsetHeight;var dropDownBottomPosition=$this.offset().top+$this[0].offsetHeight;if(dropDownBottomPosition>maxBottomPosition){var dropDownMaxHeight=maxBottomPosition-$this.offset().top;$this.css('max-height',dropDownMaxHeight);}};}});
(function($){if(!window.bem['b-phone-input']){window.bem['b-phone-input']=true;$(function(){$('.b-phone-input').each(function(){addCodesDropdown();addPhoneCodeInput($('.i-form__input-phone'));updatePhoneFields($(this));});$(document).on('change blur','.b-phone-code__input, .b-phone-input__number',function(e){var $this=$(e.target).closest('.b-phone-input');updatePhoneFields($this);});function updatePhoneFields($this){var $number=$this.find('.b-phone-input__number');var $iso=$this.find('.b-phone-input__country-iso');var $phone=$this.find('.b-phone-input__phone');var number=$number.val().replace(/[^\d]/gi,'').replace(/^0+/,'');$number.val(number);var selectedCode=$('.b-phone-code__item_selected');var iso_current=selectedCode.attr('data-iso');var code=selectedCode.attr('data-code');$phone.val('+'+code+''+number);$iso.val(iso_current);}});}})(jQuery);
$(document).ready(function(){var bl='.b-phone-code';$('body').delegate(bl+'__item','click',function(e){var el=$(e.currentTarget);if(el.attr('data-iso')){var parent=el.parents(bl);var selectedCls='b-phone-code__item_selected';parent.find("."+selectedCls).removeClass(selectedCls);el.addClass(selectedCls);putSelectedCode();}});$('body').delegate('.b-phone-code__input','click',function(e){var pc=$('.b-phone-code');if(!pc.hasClass('b-phone-code_opened')){codesDropdownPosition();setTimeout(function(){pc.addClass('b-phone-code_opened');e.stopPropagation();},5);}});$(window).bind('click',function(){$('.b-phone-code').removeClass('b-phone-code_opened');});$('.b-phone-code__overlay').live('touchmove',function(e){console.log(e)
e.stopPropagation();e.preventDefault();})});function addCodesDropdown(){if(!window.recall_scope){$.ajax({url:'/ajax/PhoneCodes/GetJson/',type:'post',async:false,success:function(response){window.recall_scope=response.regions;window.country_code=response.countryCode;addDropdown();},dataType:'json'});}else{addDropdown();}
function addDropdown(){var body=$('body');var selectedCode='';if(body.find('.b-phone-code').length==0){var items='';var item='';var codeHtml='';var selectedClassName='';window.recall_scope.forEach(function(el){codeHtml='<i class="b-flag-icons b-flag-icons_iso_'+el['iso_3166_2']+'"></i> +'+el['phone_code'];if(el['id']){if(window.country_code==el['iso_3166_2']){selectedClassName=" b-phone-code__item_selected";selectedCode=codeHtml;}
item='<span class="b-phone-code__item'+selectedClassName+'" data-min-length="'+el['min_phone_len']+'" data-max-length="'+el['max_phone_len']+'" data-iso="'+el['iso_3166_2']+'" data-code="'+el['phone_code']+'"><span class="b-phone-code__code">'+codeHtml+'</span>'+el['area']+'</span>';selectedClassName?selectedClassName='':'';}else if(el['area']=='delimiter'){item='<span class="b-phone-code__item b-phone-code__item-delimiter"></span>';}
items+=item;});$('body').append('<div class="b-phone-code">'+items+'</div><div class="b-phone-code__overlay"></div>');}
putSelectedCode(selectedCode);codesDropdownPosition();$(window).resize(codesDropdownPosition);}
function findPhoneCodes(){$('.b-phone-code').length==0}}
function addPhoneCodeInput(el){el.each(function(){var $el=$(this);if($el.parent().find('.b-phone-code__input').length==0){$el.before('<div class="b-phone-code__input"></div>');}});putSelectedCode();}
function putSelectedCode(selectedCode){setTimeout(function(){if(!selectedCode){var selectedWrapper=$('.b-phone-code__item_selected');var selectedCode=selectedWrapper.find('.b-phone-code__code')[0].outerHTML;}
$('.b-phone-code__input').html(selectedCode);$('.b-phone-input__country-iso').val(selectedWrapper.attr('data-iso'));$('.b-phone-code__input').trigger('change');var $cdekPhoneCode=$('#cdek-phone-code');if($cdekPhoneCode.length>0){$cdekPhoneCode.val(selectedWrapper.attr('data-code'));$('#cdek-iso').val(selectedWrapper.attr('data-iso'));}},20);var input=$('.i-form__input-phone');if(!input.data('padding-left')){input.attr('data-padding-left',parseInt(input.css('padding-left')));}
function checkInput(){if($('.b-phone-code__input:visible').length>0){input.attr('style','padding-left:'+(parseInt($('.b-phone-code__input:visible')[0].offsetWidth)+3)+'px !important');}else{setTimeout(checkInput,10);}}
setTimeout(checkInput,40)}
function codesDropdownPosition(){changeDropdownPosition();function changeDropdownPosition(){if($('.i-form__input-phone:visible').length>0){var input=$('.i-form__input-phone:visible');var left=input.offset().left;var width=input[0].offsetWidth;var top=input.offset().top+input[0].offsetHeight;$('.b-phone-code').css({'width':width,'top':top,'left':left});}else{setTimeout(changeDropdownPosition,10);}}}
$('.b-select_with_comments').live('change',function(){var $this=$(this);var $selected=$this.find("[value='"+$this.val()+"']");var conditions=($selected.data('conditions')||$selected.data('comment'))||'';var comSelector=$this.nextAll('.b-select__comment');comSelector.html(conditions);});
if(!window.callback){var ajaxWait=0;window.callback=function(targetId,mode,phone,id){if(!ajaxWait){ajaxWait=1;$.ajax({type:"POST",url:'/data/recall-form/',data:{id:id},success:function(response){ajaxWait=0;$('body').append(response);$('.b-recall-dialog').zkModal();$('.b-recall, .b-recall__button').removeClass('i-ajax-indicator');}});}}}
!window.bem?window.bem={}:'';if(!window.bem.bRecall){window.bem.bRecall=true;$('.b-recall, .b-recall__button').live('click',function(){var $this=$(this);$this.addClass('i-ajax-indicator');window.callback(0,$this.data('mode'),'',$this.data('id'));});}
if(typeof window.ajaxLoading==='undefined')window.ajaxLoading=0;$('.b-recall-dialog__form').live('submit',function(e){e.preventDefault();if(!window.ajaxLoading){var $this=$(this);if(!window.tracing){trackVisit($this.data("idcompany"),'oneclick-preaction-goal');window.tracing=true;}
var $phoneNumber=$('.b-phone-input__number',$this);var phone_number=$phoneNumber.val().replace(/[\D]+/gi,"");var selectedCode=$('.b-phone-code__item_selected');var code=selectedCode.attr('data-code');var ajaxLoading=0;$phoneNumber.val(phone_number);if(!phone_number||(phone_number.length<selectedCode.attr('data-min-length')||phone_number.length>selectedCode.attr('data-max-length'))){$('#error_recallNumber').text('Введите правильный номер телефона');}
else{$('#error_recallNumber').text('');window.ajaxLoading=1;$.ajax({type:"POST",url:'/ajax/Product/CreateOrder/',data:{id:$this.data("variant-id"),idcompany:$this.data("idcompany"),mode:$this.data("mode"),phone:code+phone_number,phone_iso:selectedCode.attr('data-iso'),phone_code:code,env:window.environment},dataType:"JSON",success:function(response){$('.b-recall-dialog').zkModal('close');$.fn.cabinetReport(response);window.ajaxLoading=0;trackMarketGidOrder();trackVisit($this.data("idcompany"),'oneclick-goal');}});}}});$('.recallSubmit').live('click',function(){$('.b-recall-dialog__form').trigger('submit');});
$('.b-abuse-dialog__form').live('submit',function(e){e.preventDefault();var $form=$(this)
var error=0;$(".p_error_block").html("").hide();if(!check_field_is_empty('abuse_name',error)){error=1;}
if(!check_select_is_empty('abuse_type',error)){error=1;}
if(!check_field_is_empty('abuse_email',error)||!check_field_mail('abuse_email',error)){error=1;}
if($('#abuse_site').length&&(!check_field_is_empty('abuse_site',error)||!check_field_site('abuse_site',error))){error=1;}
if(!check_field_is_empty('abuse_comment',error)){error=1;}
if(error==1){return false;}else{$("#abuse_form").submit();}
if(error==1){console.log(error)
return false;}else{$.ajax({type:"POST",url:'/ajax/AbuseForm/Submit/',data:new FormData($form[0]),processData:false,contentType:false,dataType:"JSON",success:function(response){$('.b-abuse-dialog').zkModal('close');$.fn.cabinetReport(response);}});}});$('.abuseSubmit').live('click',function(){$('.b-abuse-dialog__form').trigger('submit');});
(function(){var ajaxLoadingNow=false;$('.b-contact-dialog__form').live('submit',function(e){e.preventDefault();if(!ajaxLoadingNow){var $form=$(this);var error=0;$(".p_error_block").html("").hide();if(!check_field_is_empty('subject')){error=1;}
if(!check_field_is_empty('message',error,8)){error=1;}else if(!check_field_overflow('message',4000)){error=1;}
if(!check_field_is_empty('from_email')){error=1;}else{if(!check_field_mail('from_email')){error=1;}}
var $phoneNumber=$('#contactNumber');var phone_number=$phoneNumber.val().replace(/[\D]+/gi,"");$phoneNumber.val(phone_number);var selectedCode=$('.b-phone-code__item_selected');if(!check_field_is_empty('contactNumber',error)){error=1;}else{var phone_min_length=selectedCode.attr('data-min-length');var phone_max_length=selectedCode.attr('data-max-length');var code=selectedCode.attr('data-code');if(!check_field_is_wrong_phone3('contactNumber','contactNumber',phone_min_length,phone_max_length,error)||!check_is_only_digits('contactNumber',error)){error=1;}}
if(error){return false;}else{var formData=new FormData($form[0]);formData.append('phone_code',selectedCode.attr('data-code'));formData.append('phone_iso',selectedCode.attr('data-iso'));ajaxLoadingNow=true;$.ajax({url:"/ajax/ContactNow/minisite-handle",type:'post',dataType:"html",processData:false,contentType:false,data:formData,success:function(response){eval(response);},complete:function(){ajaxLoadingNow=false;}});trackTargetAll('messageSentGoal');}}});$('.contactSubmit').live('click',function(){$('.b-contact-dialog__form').trigger('submit');});})();
if(!window.bem.bHidingNext){window.bem.bHidingNext=true;$('.b-hiding-next').live('click',function(){$(this).remove();});}
if(!window.bem.iCabinetReportTrigger){window.bem.iCabinetReportTrigger=true;$(document).on('click','.i-cabinet-report-trigger',function(e){e.preventDefault();var $html=$(this).next().html();$(document).cabinetReport({message:$html});});}
$(function(){if(!window.bem.bDeliveryPaymentLink){window.bem.bDeliveryPaymentLink=true;var ajaxWait=0;$(document).on("click",".b-delivery-payment-link, .b-link_type_delivery-payment, .b-link_type_free-delivery, .b-free-delivery-payment-link",function(){var productType=this.getAttribute('data-product-type');var idcompany=+this.getAttribute('data-idcompany');var editorUrl=this.getAttribute('data-editor-url');var url=editorUrl?editorUrl:'/delivery-and-payment/';var data={};if(idcompany>0){data.idcompany=idcompany;}
if(productType>0){data.productType=productType;}
if(!ajaxWait){ajaxWait=1;$.ajax({url:url,method:'POST',dataType:'JSON',data:data,success:function(data){ajaxWait=0;$('body').append(data);$('.b-delivery-dialog').zkModal();}});}
return false;});}});
$('.b-privacy-policy-link').live('click',function(e){e.preventDefault();var url=$(this).attr('href');if(!ajaxWait){ajaxWait=1;$.ajax({url:"/controller/urlloader.php?g="+url+"&isa=1",method:'GET',crossDomain:true,dataType:'HTML',success:function(data){ajaxWait=0;$(document.body).append(data);$('.privacy-policy').zkModal();}});}});
$(document).ready(function(){if(!window.bem)window.bem={};if(!window.bem.iDropdown){window.bem.iDropdown=true;$(window).bind('click',function(){$('.i-dropdown').removeClass('i-dropdown_opened');$('.i-dropdown__button').removeClass('i-dropdown__button_menu-opened');});$("body").delegate('.i-dropdown__button','click',function(e){e.preventDefault();if(!$('.i-dropdown',this.parentNode).hasClass('i-dropdown_opened')){var parent=this.parentNode;setTimeout(function(){$('.i-dropdown',parent).addClass('i-dropdown_opened');$('.i-dropdown__button',parent).addClass('i-dropdown__button_menu-opened');fixDropdown();},10);}});var fixDropdown=function(){var $dropdown=$('.i-dropdown');$dropdown.each(function(){var $this=$(this);var offsets=$this.offset();var i=((offsets.left+$this.outerWidth())-($(window).outerWidth()));if(i>0){$this.css('margin-left','-'+(i+10)+'px');}
verticalCorrection($this);});};var verticalCorrection=function($this){$this.removeAttr('style');var $formInModal=$this.closest('.b-modal .b-form');var $mainParent=$formInModal.length?$formInModal:$('body');var maxBottomPosition=$mainParent.offset().top+$mainParent[0].offsetHeight;var dropDownBottomPosition=$this.offset().top+$this[0].offsetHeight;if(dropDownBottomPosition>maxBottomPosition){var dropDownMaxHeight=maxBottomPosition-$this.offset().top;$this.css('max-height',dropDownMaxHeight);}};}});
/*! modernizr 3.2.0 (Custom Build) | MIT *
 * http://modernizr.com/download/?-touchevents-setclasses !*/
!function(e,n,t){function o(e,n){return typeof e===n}function s(){var e,n,t,s,a,i,r;for(var l in c)if(c.hasOwnProperty(l)){if(e=[],n=c[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(s=o(n.fn,"function")?n.fn():n.fn,a=0;a<e.length;a++)i=e[a],r=i.split("."),1===r.length?Modernizr[r[0]]=s:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=s),f.push((s?"":"no-")+r.join("-"))}}function a(e){var n=u.className,t=Modernizr._config.classPrefix||"";if(p&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),p?u.className.baseVal=n:u.className=n)}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):p?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function r(){var e=n.body;return e||(e=i(p?"svg":"body"),e.fake=!0),e}function l(e,t,o,s){var a,l,f,c,d="modernizr",p=i("div"),h=r();if(parseInt(o,10))for(;o--;)f=i("div"),f.id=s?s[o]:d+(o+1),p.appendChild(f);return a=i("style"),a.type="text/css",a.id="s"+d,(h.fake?h:p).appendChild(a),h.appendChild(p),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(n.createTextNode(e)),p.id=d,h.fake&&(h.style.background="",h.style.overflow="hidden",c=u.style.overflow,u.style.overflow="hidden",u.appendChild(h)),l=t(p,e),h.fake?(h.parentNode.removeChild(h),u.style.overflow=c,u.offsetHeight):p.parentNode.removeChild(p),!!l}var f=[],c=[],d={_version:"3.2.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){c.push({name:e,fn:n,options:t})},addAsyncTest:function(e){c.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=d,Modernizr=new Modernizr;var u=n.documentElement,p="svg"===u.nodeName.toLowerCase(),h=d._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];d._prefixes=h;var m=d.testStyles=l;Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",h.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");m(o,function(e){t=9===e.offsetTop})}return t}),s(),a(f),delete d.addTest,delete d.addAsyncTest;for(var v=0;v<Modernizr._q.length;v++)Modernizr._q[v]();e.Modernizr=Modernizr}(window,document);
var zoomedWasInitialized=false;function movePopup(el){var img=$('img',el);var w=img.data('width');var h=img.data('height');var ww=$(window).width();var wh=$(window).height();var ratio=w/h;var wratio=ww/wh;if(ratio>wratio&&w+80>ww){w=ww-80;h=Math.round(w/ratio);}
if(ratio<wratio&&h+80>wh){h=wh-80;w=Math.round(h*ratio);}
$(el).css({top:((wh-h-40)/2),left:(ww-w-40)/2,'zIndex':10001});img.css('width',w);}
function drawPopUp(el){$("#zoomed-mask").show();var container=$(el).parents('.b-img__zoomed-container');container.show();movePopup(container);}
function randomString(length){var result='';var chars='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-';for(var i=length;i>0;--i)result+=chars[Math.round(Math.random()*(chars.length-1))];return result;}
function zoomIt(){console.log("zoomIt()");var iid=$(this).data('id');if($('#zoomed-'+iid).length==0){var image=$(this).attr('src').replace(/pic_/,'').replace(/_([0-9])\d+x([0-9])\d+_\d/g,'').replace('/i/','/files/');$(document.body).append($('<div class="b-img__zoomed-container" style="position:fixed;padding:20px;background: #CACACA; border:3px solid #CACACA; border-radius: 10px;"><a href="'+image+'" target="_blank" class="b-img__zoomed-source-link"><img src="'+image+'"  id="zoomed-'+iid+'" /></a><a href="#" class="b-img__zoomed-close" title="Закрыть"></a></div>'));$('#zoomed-'+iid).get(0).onload=function(){$(this).data('width',$(this).width());$(this).data('height',$(this).height());drawPopUp($(this));}}else{drawPopUp($('#zoomed-'+iid));}}
function attachZoom(){$('.b-img_func_zoomed:not([data-passed="1"])').each(function(){$(this).on('click',zoomIt);$(this).attr('data-passed',1);var id='';while(1){id=randomString(16);if($('#zoomed-'+id).length==0){$(this).attr('data-id',id);break;}}});}
$(function(){if(!zoomedWasInitialized){attachZoom();function resizeMask(){var ww=$(window).width();var wh=$(window).height();$("#zoomed-mask").css({width:ww,height:wh});if($('.b-img__zoomed-container:visible').length>0){movePopup($('.b-img__zoomed-container:visible').eq(0));}}
if($("#zoomed-mask").length==0){$(document.body).append("<div id='zoomed-mask' style='z-index:10000;position:fixed;display:none;top:0;right:0;background:#000000;opacity:0.6'></div>");$(window).resize(resizeMask);$("#zoomed-mask").click(function(){$('.b-img__zoomed-container').hide();$(this).hide();});resizeMask();}
$(document).on('click','.b-img__zoomed-close',function(){$('.b-img__zoomed-container').hide();$("#zoomed-mask").hide();return false;});$(document).on('click','.b-img__zoomed-source-link',function(){var img=$('img',this);return(img.width()<img.data('width'));});$(document).on('variant-description-render',function(){attachZoom();});zoomedWasInitialized=true;}});
$(function(){var isTouchEventsEnabled=$('html').hasClass('touchevents');var isNonMobileTheme=['standart','gnarled','adaptive','hatless','minimalism','antiqua'].indexOf($('html').data('theme'))+1;var isDesctopOnMobileView=function(){if($(window).width()<1024&&isTouchEventsEnabled&&isNonMobileTheme){return true;}
return false;};var bound=isDesctopOnMobileView()?1920:400;var ZKLazyLoad=function(){var top=$(window).height()+$(window).scrollTop();var left=$(window).width()+$(window).scrollLeft();$(".b-img_lazyload_yes:visible").each(function(){CheckLazyLoad($(this),top,left);});};var ShowImage=function(img){img.fadeOut(0);img.attr('src',img.attr('data-original-src')).removeClass('b-img_lazyload_yes').removeAttr('data-original-src');img.fadeIn(500);}
var CheckLazyLoad=function(img,top,left){if((img.offset().top<top+bound&&img.offset().left<left+bound)){ShowImage(img);}};ZKLazyLoad();$(window).on('scroll touchmove resize orientationchange lazyrestart',function(){ZKLazyLoad();});$(document).on('click','.bx-next, .bx-prev',function(){setTimeout(ZKLazyLoad,200);});});
(function($){$(function(){$('.b-online-help_type_siteheart').each(function(){var widget_id=$(this).data('account');_shcp=[{widget_id:widget_id}];var lang="ru";var url="widget.siteheart.com/widget/sh/"+widget_id+"/"+lang+"/widget.js";var hcc=document.createElement("script");hcc.type="text/javascript";hcc.async=true;hcc.src=("https:"==document.location.protocol?"https":"http")+"://"+url;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hcc,s.nextSibling);});});})(jQuery);
(function($){$(function(){$('.b-online-help_type_jivosite').each(function(){var widget_id=$(this).data('account');var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='//code.jivosite.com/script/widget/'+widget_id;var ss=document.getElementsByTagName('script')[0];ss.parentNode.insertBefore(s,ss);});});})(jQuery);
(function($){$(function(){$('.b-online-help_type_redhelper').each(function(){var url="web.redhelper.ru/service/main.js?c="+$(this).data('account');var hcc=document.createElement("script");hcc.id="rhlpscrtg";hcc.type="text/javascript";hcc.async=true;hcc.src=("https:"==document.location.protocol?"https":"http")+"://"+url;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hcc,s.nextSibling);});});})(jQuery);
var liveTex=true,liveTexID=0,liveTex_object=true;(function($){$(function(){$('.b-online-help_type_livetex').each(function(){liveTexID=$(this).data('account');var lt=document.createElement('script');lt.type='text/javascript';lt.async=true;lt.src='//cs15.livetex.ru/js/client.js';var sc=document.getElementsByTagName('script')[0];if(sc){sc.parentNode.insertBefore(lt,sc);}else{document.documentElement.firstChild.appendChild(lt);}});});})(jQuery);
(function($){$(function(){$('.b-online-help_type_vk_community_messages').each(function(){var id='vk_community_messages_'+$(this).data('account'),$this=$(this);$('body').append($('<div id="'+id+'"></div>'));if(typeof window.vkAsyncInit==='undefined'){var el=document.createElement("script");el.type="text/javascript";el.src="//vk.com/js/api/openapi.js?98";el.async=true;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(el,s);window.vkAsyncInit=function(){$(document).trigger('vk.init');};}
$(document).on('vk.init',function(){VK.Widgets.CommunityMessages(id,$this.data('account'));});});});})(jQuery);